(this["webpackJsonpvendor-app"]=this["webpackJsonpvendor-app"]||[]).push([[0],Array(31).concat([function(e,t,n){e.exports=n(86)},,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return et}));var r={};n.r(r),n.d(r,"fetchUser",(function(){return B})),n.d(r,"fetchGold",(function(){return F})),n.d(r,"fetchDay",(function(){return x})),n.d(r,"fetchSuppliers",(function(){return R}));var a=n(0),i=n.n(a),o=n(13),s=n.n(o),u=n(8),c=n(11),l=n(29),p=n(4),d=n(5),m=n(1),h=n(7),v=n(6),f=(n(42),n(43),n(44),n(45),n(2)),b={potion:"potion",weapon:"weapon",armor:"armor"},g=["healing"],y=function(){var e=b,t=g,n=[],r={},a={},i=0,o=function(e){var t=e.type,n=e.name,o=e.value,s=e.prototypeId,u=e.rarity;this.type=t,this.name=n,this.value=o,this.prototypeId=s,this.rarity=u,this.id=i,r[i]=t,a[i]=s,i++},s=function(e){var t=e.type,n=e.level;this.type=t,this.level=n},u=function(e){var t=e.damage,n=e.level;this.damage=t,this.level=n},c=function(e){var t=e.armor,n=e.level;this.armor=t,this.level=n};return{createItem:function(t){var r=t.type,a=t.name,i=t.value,l=t.itemPayload,p=t.prototypeId,d=t.rarity;if(e[r]){var m=new o({type:r,name:a,value:i,prototypeId:p,rarity:d});switch(m.type){case e.potion:var h=l.type;if(!h)return void console.log("attempted to create invalid potion type");var v=l.level;if(!v)return void console.log("attempted to create a potion with an invalid level");var f={type:h,level:v};m[m.type]=new s(f);break;case e.weapon:var b=l.damage;if(!b)return void console.log("attempted to create a weapon without damage");var g=l.level;if(!g)return void console.log("attempted to create a weapon with an invalid level");var y={damage:b,level:g};m[m.type]=new u(y);break;case e.armor:var E=l.armor;if(!E)return void console.log("attempted to make a new armor without an armor value");var k=l.level;if(!k)return void console.log("attempted to make a new armor without a level value");var S={armor:E,level:k};m[m.type]=new c(S)}return n.push(m),m.id}console.log("invalid item type passed to items.createItem()")},getItem:function(e){var t=n.find((function(t){return t.id===e}));if(t)return t;console.log("attempted to retrieve invalid item.")},destroyItem:function(e){var t=n.find((function(t){return t.id===e}));return!!t&&(n=n.filter((function(t){return t.id!==e})),t=null,!0)},getItemType:function(e){return null!==r[e]&&r[e]},getItemPrototypeId:function(e){return null!==a[e]&&a[e]},getItemTypeIndex:function(){return r},createTestPotion:function(n){var r=new o({type:e.potion,name:"Healing Potion",value:60});return r[e.potion]=new s({type:t.healing,level:n}),r},getItemTypes:function(){return e},composePayloadFromProto:function(e){var t={};switch(t.level=e.level,e.item.type){case b.potion:t.type=e.type;break;case b.weapon:t.damage=e.damage;break;case b.armor:t.armor=e.armor}var n={};return n.itemPayload=t,n.type=e.item.type,n.name=e.item.name,n.value=e.item.value,n.prototypeId=e.item.id,n.rarity=e.item.rarity,n}}}(),E=function(){var e=[],t=function(){var t=[];return e.forEach((function(e){var n=y.getItem(e.itemId);t.push(Object(f.a)(Object(f.a)({},n),{},{markup:e.markup}))})),t};return{addItem:function(t){if(null===t||void 0===t)return!1;var n={itemId:t,markup:150};e.push(n)},removeItem:function(t){e.find((function(e){return e.itemId===t}))&&(e=e.filter((function(e){return e.itemId!==t})))},getStoreInventory:function(){return e},updateStoreInventory:function(){!function(){var t={type:"SET_STORE_INVENTORY",inventory:e};et.dispatch(t)}()},getComposedInventory:function(){return t()},getFilteredInventory:function(e){return e&&"all"!==e.toLowerCase()?(n=e,t().filter((function(e){return e.type===n}))):t();var n},getFilteredStoreItems:function(t){return n=t,e.filter((function(e){return E.getItemType(e.itemId)===n}));var n},markupFilteredStoreItems:function(t){var n,r,a=t.filter,i=t.markup;n=a,r=i,e.forEach((function(e){"all"!==n.toLowerCase()&&y.getItemType(e.itemId)!==n||(e.markup+=r,e.markup>4e3&&(e.markup=4e3),e.markup<0&&(e.markup=0))}))},markupStoreItem:function(t){!function(t,n){e.find((function(e){return e.itemId===t})).markup+=n}(t.id,t.markup)},markupPrototypes:function(t){!function(t,n){e.forEach((function(e){y.getItemPrototypeId(e.itemId)===t&&(e.markup+=n),e.markup>4e3&&(e.markup=4e3),e.markup<0&&(e.markup=0)}))}(t.prototypeId,t.markup)}}}(),k=E,S=(n(46),n(47),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"coin-outer"},i.a.createElement("div",{className:"coin-inner"}))}}]),n}(i.a.Component)),N=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={markup:50},r.timer=void 0,r.mobileMultiplier=2,r.delay=200,r.markupIntensity=10,r.valence=1,r.increaseMarkup=r.increaseMarkup.bind(Object(m.a)(r)),r.repeat=r.repeat.bind(Object(m.a)(r)),r.onMouseDown=r.onMouseDown.bind(Object(m.a)(r)),r.onMouseUp=r.onMouseUp.bind(Object(m.a)(r)),r.markupOut=r.markupOut.bind(Object(m.a)(r)),r.handleMobileFocus=r.handleMobileFocus.bind(Object(m.a)(r)),r.handleOneIncrement=r.handleOneIncrement.bind(Object(m.a)(r)),r.handlePrototypeIncrement=r.handlePrototypeIncrement.bind(Object(m.a)(r)),r.getInventoryItems=r.getInventoryItems.bind(Object(m.a)(r)),r.getIncrementOneButtons=r.getIncrementOneButtons.bind(Object(m.a)(r)),r.getIncrementAllButtons=r.getIncrementAllButtons.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=JSON.parse(JSON.stringify(k.getStoreInventory()));this.props.setInventory(e)}},{key:"increaseMarkup",value:function(){this.setState({markup:this.state.markup+this.markupIntensity})}},{key:"onMouseDown",value:function(e){var t=e.e,n=null,r=null;null!==e.id&&(n=e.id),null!==e.prototypeId&&(r=e.prototypeId);var a=t.target.classList;(a.contains("decreaseOne")||a.contains("minusOne")||a.contains("decreaseProto")||a.contains("minusProto"))&&(this.valence=-1),(a.contains("increaseOne")||a.contains("plusOne")||a.contains("increaseProto")||a.contains("plusProto"))&&(this.valence=1);var i={id:n,prototypeId:r};this.repeat(i)}},{key:"repeat",value:function(e){var t=this,n=e.id,r=e.prototypeId,a={id:n,prototypeId:r};this.increaseMarkup(),void 0!==n&&this.handleOneIncrement(n),void 0!==r&&this.handlePrototypeIncrement(r);var i=this.delay*this.mobileMultiplier;this.mobileMultiplier>1&&(this.mobileMultiplier=1),this.timer=setTimeout((function(){return t.repeat(a)}),i),this.markupIntensity+=5}},{key:"onMouseUp",value:function(){clearTimeout(this.timer),this.markupIntensity=10,this.valence=1,this.mobileMultiplier=2,this.markupOut()}},{key:"markupOut",value:function(){this.setState({markup:50})}},{key:"handleOneIncrement",value:function(e){var t=this.valence,n={id:e,markup:this.state.markup*t};k.markupStoreItem(n),this.props.toggleStoreUpdateStatus()}},{key:"handlePrototypeIncrement",value:function(e){var t=this.valence,n={prototypeId:e,markup:this.state.markup*t};k.markupPrototypes(n),this.props.toggleStoreUpdateStatus()}},{key:"getIncrementOneButtons",value:function(e){var t=this;return this.props.isPc?i.a.createElement("div",{className:"incrementButtons incrementOneSet"},i.a.createElement("div",{className:"decreaseOne incrementButton button secondary",onMouseDown:function(n){return t.onMouseDown({id:e,e:n})},onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minusOne"},"-")),i.a.createElement("div",{className:"increaseOne incrementButton button secondary",onMouseDown:function(n){return t.onMouseDown({id:e,e:n})},onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plusOne"},"+"))):i.a.createElement("div",{className:"incrementButtons incrementOneSet"},i.a.createElement("div",{className:"decreaseOne incrementButton button secondary",onTouchStart:function(n){return t.onMouseDown({id:e,e:n})},onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minusOne"},"-")),i.a.createElement("div",{className:"increaseOne incrementButton button secondary",onTouchStart:function(n){return t.onMouseDown({id:e,e:n})},onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plusOne"},"+")))}},{key:"getIncrementAllButtons",value:function(e){var t=this;return this.props.isPc?i.a.createElement("div",{className:"incrementButtons incrementAllSet"},i.a.createElement("div",{className:"decreaseProto incrementButtonWide button secondary",onMouseDown:function(n){return t.onMouseDown({prototypeId:e,e:n})},onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minusProto"},"--")),i.a.createElement("div",{className:"increaseProto incrementButtonWide button secondary",onMouseDown:function(n){return t.onMouseDown({prototypeId:e,e:n})},onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plusProto"},"++"))):i.a.createElement("div",{className:"incrementButtons incrementAllSet"},i.a.createElement("div",{className:"decreaseProto incrementButtonWide button secondary",onTouchStart:function(n){return t.onMouseDown({prototypeId:e,e:n})},onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minusProto"},"--")),i.a.createElement("div",{className:"increaseProto incrementButtonWide button secondary",onTouchStart:function(n){return t.onMouseDown({prototypeId:e,e:n})},onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plusProto"},"++")))}},{key:"handleMobileFocus",value:function(e){var t;this.props.mobileItemDetail&&(t=this.props.mobileItemDetail),this.props.mobileItemDetail&&this.props.mobileDetail&&t.id===e.id?(this.props.setStoreMobileDetail(!1),this.props.setStoreMobileDetailItem(null),window.inventory=void 0):(this.props.setStoreMobileDetail(!0),this.props.setStoreMobileDetailItem(e),window.inventory=this)}},{key:"getInventoryItems",value:function(){var e,t=this;return this.props.inventory&&this.props.inventory.length>0?(e=this.props.filterActive&&"all"!==this.props.storeFilter?k.getFilteredInventory(this.props.storeFilter):k.getComposedInventory(),i.a.createElement("div",null,e.map((function(e){var n=Math.floor(e.value*(1+e.markup/1e3)),r="InventoryItem itemBackground";return t.props.mobileDetail&&e.id===t.props.mobileItemDetail.id&&(r+=" activeMobileItem"),i.a.createElement("div",{className:r,key:e.id,onTouchStart:function(){return t.handleMobileFocus(e)}},i.a.createElement("span",{className:"InventoryItemName"},e.name),t.props.isPc?t.getIncrementOneButtons(e.id):"",t.props.isPc?t.getIncrementAllButtons(e.prototypeId):"",i.a.createElement("div",{className:"ItemValueGroup"},i.a.createElement("span",{className:"InventoryItemValue"},i.a.createElement("span",{className:"CoinSymbol"},i.a.createElement(S,null)," "),n)))})))):i.a.createElement("div",null)}},{key:"render",value:function(){return i.a.createElement("div",{className:"StoreInventory primary"},this.getInventoryItems())}}]),n}(i.a.Component),O=Object(u.b)((function(e){return{inventory:e.storeState.inventory,inventoryCount:e.storeState.inventoryCount,filterActive:e.storeState.filterActive,storeFilter:e.storeState.filter,storeNeedsUpdate:e.storeState.needsUpdate,isMobile:e.app.isMobile,isPc:e.app.isPc,mobileDetail:e.storeState.mobileDetail,mobileItemDetail:e.storeState.mobileItemDetail}}),(function(e){return{setInventory:function(t){return e({type:"SET_STORE_INVENTORY",inventory:t})},toggleStoreUpdateStatus:function(){return e({type:"SET_STORE_UPDATE_STATUS"})},setStoreMobileDetail:function(t){return e({type:"SET_STORE_MOBILE_DETAIL",detail:t})},setStoreMobileDetailItem:function(t){return e({type:"SET_STORE_MOBILE_DETAIL_ITEM",itemDetail:t})}}}))(N),T=n(3),I=n.n(T),M=n(9),D=n(30),w=n.n(D),j=function(){var e="",t=1e3;return{chargeGold:function(e){if(t<e)return console.log("attempted to charge more gold than vendor owns"),!1;t-=e},creditGold:function(e){t+=e},getName:function(){return e},setName:function(t){e=t},getStartingGold:function(){return 1e3},getGold:function(){return t},setGold:function(e){t=e},updateGold:function(){!function(){var e={type:"SET_STORE_GOLD",amount:t};et.dispatch(e)}()}}}(),L=function(){var e=1;return{getDay:function(){return e},setDay:function(t){"number"===typeof t?e=t:console.log("trying to set day to a non number value!")},resetDay:function(){e=1}}}(),P=n(12),_=function(){var e=[],t={},n=1,r=Object.values(b),a=r.length,i=0,o=function(){var e=Object(M.a)(I.a.mark((function e(){var t,a,o,s,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n){e.next=3;break}return e.abrupt("return");case 3:return"armor"!==(a=r[i])&&(a+="s"),1,o=t,s="/".concat(a,"-in-level-range?min-level=").concat(1,"&max-level=").concat(o),e.prev=8,e.next=11,fetch(s);case 11:u=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.log(e.t0);case 17:return u&&(u=u.json()),e.abrupt("return",u);case 19:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(){return e.apply(this,arguments)}}(),s=function e(){var n;i>=a||o().then((function(o){return n=o.filter((function(e){return 1e3===e.item.rarity})),null===t[r[i]]&&(t[r[i]]=[]),t[r[i]].push(n),++i===a&&function(e){var t={type:"SET_SUPPLY_SPAWNED",value:e};et.dispatch(t)}(!0),e(),!0})).catch((function(e){return console.log(e)}))},u=function(){var n=Math.floor(Math.random()*r.length),a=r[n],i=t[a],o=i[Math.floor(Math.random()*i.length)];Array.isArray(o)&&(o=o[0]);var s=y.composePayloadFromProto(o),u=y.createItem(s);e.push(u)};return{getSupplies:function(){return e},fillSupplies:function(){for(var e=0;e<10;e++)u();!function(e){var t={type:"SET_SUPPLY_READY",value:e};et.dispatch(t)}(!0)},fillSupplyPool:function(){i=0,r.forEach((function(e){null==t[e]&&(t[e]=[]),t[e].length=0})),s()},depleteSupply:function(t){var n=e.indexOf(t);if(n>=0)return e.splice(n,1)},setSupplyLevel:function(e){n=e}}}(),C={fetchRoute:function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/".concat(t));case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:return n&&(n=n.json()),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},A=function(){var e=[],t=0,n=function(e){var n=e.name,r=e.offerings;this.name=n,this.offerings=r,this.inventory=[],this.id=t,t++};n.prototype.rankFavorites=function(){for(var e=[],t=this.offerings.length,n=0;n<t;n++)e.push(this.offerings[n]);e.sort((function(e,t){return e.markup-t.markup})),this.rankedOfferings=e},n.prototype.sellItem=function(e){var t=e.id,n=e.price,r=this.inventory.indexOf(t);return!(!r&&0!==r)&&(this.inventory.splice(r,1),this.gold+=n,!0)},n.prototype.takeIncome=function(){this.gold+=100};var r=function(e){var t={type:"SET_SUPPLIERS",payload:e};et.dispatch(t)},a=function(){var e=Object(M.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.fetchRoute("suppliers"),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:case"end":return e.stop()}}),e)}));return{initializeSuppliers:function(){var t=Object(M.a)(I.a.mark((function t(a){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i().next().value.then((function(t){if(t){for(var i=t;e.length<a&&i.length>0;){var o=Math.floor(Math.random()*i.length),s=i.splice(o,1),u={name:(s=s[0]).name,offerings:s.offerings},c=new n(u);c.gold=1e3,e.push(c)}return e.forEach((function(e){return e.rankFavorites()})),r(e),e}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getSuppliers:function(){return e},takeSupplierTurn:function(){!function(){var t=JSON.parse(JSON.stringify(_.getSupplies())),n=[],r=[];t.forEach((function(e){var t=y.getItem(e);n.push(t.type),r.push(t.value)}));var a=0,i=e.length;t.forEach((function(t,o){for(var s=[],u=0;u<i;u++){var c=a+u;c>=i&&(c-=i),s.push(c)}var l=!1;s.forEach((function(s){var u,c=e[s].rankedOfferings,p=Object(P.a)(c);try{for(p.s();!(u=p.n()).done;){if(u.value.type===n[o]&&!l&&e[s].gold>=r[o]){null===e[s].inventory&&(e[s].inventory=[]);var d=_.depleteSupply(t);Array.isArray(d)&&(d=d[0]),e[s].gold-=r[o],e[s].inventory.push(d),l=!0,(a=s+1)>i&&(a=0)}}}catch(m){p.e(m)}finally{p.f()}}))}))}(),r(e),function(e){var t={type:"SET_SUPPLY_READY",value:e};et.dispatch(t)}(!1)},sellItem:function(t){var n=t.id,r=t.itemId,a=t.price,i=e.find((function(e){return e.id===n}));if(!i)return!1;var o={id:r,price:a};return!!i.sellItem(o)},takeSupplierIncomeTurns:function(){e.length<1||e.forEach((function(e){e.takeIncome()}))},updateSuppliers:function(){r(e)}}}(),B=function(){return function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/current_user");case 2:n=e.sent,t({type:"FETCH_USER",payload:n.data}),n.data&&n.data.import_nickname&&t({type:"SET_STORE_NAME",name:n.data.nickname});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){return function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getGold();case 2:n=e.sent,t({type:"SET_STORE_GOLD",amount:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(){return function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getDay();case 2:n=e.sent,t({type:"SET_DAY",day:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=function(){return function(){var e=Object(M.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getSuppliers();case 2:n=e.sent,t({type:"SET_SUPPLIERS",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={markup:50},r.timer=void 0,r.delay=200,r.mobileMultiplier=2,r.markupIntensity=10,r.valence=1,r.increaseMarkup=r.increaseMarkup.bind(Object(m.a)(r)),r.repeat=r.repeat.bind(Object(m.a)(r)),r.onMouseDown=r.onMouseDown.bind(Object(m.a)(r)),r.onMouseUp=r.onMouseUp.bind(Object(m.a)(r)),r.markupOut=r.markupOut.bind(Object(m.a)(r)),r.getMobileDetail=r.getMobileDetail.bind(Object(m.a)(r)),r.componentDidMount=r.componentDidMount.bind(Object(m.a)(r)),r.toggleFilter=r.toggleFilter.bind(Object(m.a)(r)),r.getFilter=r.getFilter.bind(Object(m.a)(r)),r.handleFilter=r.handleFilter.bind(Object(m.a)(r)),r.getIncrementButtons=r.getIncrementButtons.bind(Object(m.a)(r)),r.handleIncrease=r.handleIncrease.bind(Object(m.a)(r)),r.handleDecrease=r.handleDecrease.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchGold()}},{key:"handleFilter",value:function(e){var t=e.target.value;this.props.setStoreFilter(t)}},{key:"increaseMarkup",value:function(){this.setState({markup:this.state.markup+this.markupIntensity})}},{key:"onMouseDown",value:function(e){var t=e.target;(t.classList.contains("decreaseAll")||t.classList.contains("minus"))&&(this.valence=-1),t.classList.contains("increaseAll")&&(this.valence=1),this.repeat()}},{key:"repeat",value:function(){this.increaseMarkup(),-1===this.valence&&this.handleDecrease(),1===this.valence&&this.handleIncrease();var e=this.delay;this.props.pc||(e*=this.mobileMultiplier),this.mobileMultiplier>1&&(this.mobileMultiplier=1),this.timer=setTimeout(this.repeat,e),this.markupIntensity+=5}},{key:"onMouseUp",value:function(){clearTimeout(this.timer),this.markupIntensity=10,this.valence=1,this.mobileMultiplier=2,this.markupOut()}},{key:"markupOut",value:function(){this.setState({markup:50})}},{key:"handleIncrease",value:function(){var e={filter:this.props.storeFilter,markup:this.state.markup};k.markupFilteredStoreItems(e),k.updateStoreInventory(),this.props.toggleStoreUpdateStatus()}},{key:"handleDecrease",value:function(){var e={filter:this.props.storeFilter,markup:-1*this.state.markup};k.markupFilteredStoreItems(e),k.updateStoreInventory(),this.props.toggleStoreUpdateStatus()}},{key:"getIncrementButtons",value:function(){return this.props.filterActive?this.props.isPc?i.a.createElement("div",{className:"incrementButtons"},i.a.createElement("div",{className:"decreaseAll incrementButton button",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minus"},"-")),i.a.createElement("div",{className:"increaseAll incrementButton button",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plus"},"+"))):i.a.createElement("div",{className:"incrementButtons"},i.a.createElement("div",{className:"decreaseAll incrementButton button",onTouchStart:this.onMouseDown,onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minus"},"-")),i.a.createElement("div",{className:"increaseAll incrementButton button",onTouchStart:this.onMouseDown,onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plus"},"+"))):""}},{key:"getFilter",value:function(){if(!this.props.filterActive)return"";var e=Object.values(b);return i.a.createElement("select",{className:"StoreItemTypeFilter",defaultValue:this.props.storeFilter,onChange:this.handleFilter},i.a.createElement("option",{value:"all"},"all"),e.map((function(e){return i.a.createElement("option",{value:e},e)})))}},{key:"toggleFilter",value:function(){var e=!this.props.filterActive;e&&this.props.mobileDetail&&window.inventory.handleMobileFocus(this.props.mobileItemDetail);this.props.setStoreFilterActive(e)}},{key:"getMobileDetail",value:function(){if(this.props.isPc)return"";if(this.props.filterActive&&!this.props.mobileDetail)return i.a.createElement("div",{className:"MobileDetailContainer mobileDetailActive"},this.getIncrementButtons(),this.getFilter());if(this.props.mobileDetail){var e=window.inventory;return i.a.createElement("div",{className:"MobileDetailContainer mobileDetailActive primary-surface"},i.a.createElement("div",{className:"itemDetailName"},this.props.mobileItemDetail.name),e.getIncrementOneButtons(this.props.mobileItemDetail.id),e.getIncrementAllButtons(this.props.mobileItemDetail.prototypeId))}return i.a.createElement("div",{className:"MobileDetailContainer"})}},{key:"render",value:function(){return i.a.createElement("div",{className:"Store"},i.a.createElement("div",{className:"StoreMenuBar darkgrey"},i.a.createElement("h2",{className:"StoreName"},this.props.storeName),i.a.createElement("div",{className:"FilterGroup"},this.props.isPc?this.getIncrementButtons():"",this.props.isPc?this.getFilter():""),i.a.createElement("span",{className:"Inspect",role:"img","aria-label":"inspect",onClick:this.toggleFilter},"\ud83d\udd0d "),i.a.createElement("div",{className:"GoldDisplay"},i.a.createElement("div",{className:"StoreGold"},i.a.createElement("span",{className:"CoinSymbol",role:"img","aria-label":"coin"},i.a.createElement(S,null)," "),this.props.gold))),i.a.createElement(O,null),this.getMobileDetail())}}]),n}(i.a.Component),G=Object(u.b)((function(e){return{storeName:e.storeState.name,gold:e.storeState.gold,filterActive:e.storeState.filterActive,storeFilter:e.storeState.filter,storeNeedsUpdate:e.storeState.needsUpdate,isMobile:e.app.isMobile,isPc:e.app.isPc,mobileDetail:e.storeState.mobileDetail,mobileItemDetail:e.storeState.mobileItemDetail}}),(function(e){return{setStoreGold:function(t){return e({type:"SET_STORE_GOLD",amount:t})},fetchGold:function(){return e(F())},setStoreFilter:function(t){return e({type:"SET_STORE_FILTER",filter:t})},setStoreFilterActive:function(t){return e({type:"SET_STORE_FILTER_ACTIVE",value:t})},toggleStoreUpdateStatus:function(){return e({type:"SET_STORE_UPDATE_STATUS"})}}}))(U),H=(n(67),n(14)),V=(n(68),n(69),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"SupplierBuyButton button secondary"},i.a.createElement("div",{className:"supplierBuyButtonIcon"},"buy"))}}]),n}(i.a.Component)),q=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).getSuppllierInventory=r.getSuppllierInventory.bind(Object(m.a)(r)),r.handlePurchase=r.handlePurchase.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"handlePurchase",value:function(e){var t=e.ids,n=e.price;if(!(n>this.props.storeGold)){var r=t[0],a={id:this.props.supplier.id,itemId:r,price:n};A.sellItem(a)&&(j.chargeGold(n),k.addItem(r),j.updateGold(),k.updateStoreInventory(),A.updateSuppliers())}}},{key:"getSuppllierInventory",value:function(){var e=this;if(!this.props.initialized)return"";var t=[];this.props.supplier.inventory.forEach((function(e){var n=y.getItem(e);t.push(n)}));var n={},r={},a={},o={};t.forEach((function(e){n[e.name]?(n[e.name]+=1,o[e.name].push(e.id)):(n[e.name]=1,r[e.name]=e.value,a[e.name]=e.type,o[e.name]=[e.id])}));for(var s=[],u=0,c=Object.entries(n);u<c.length;u++){var l=Object(H.a)(c[u],2),p=l[0],d={name:p,count:l[1],type:a[p],value:r[p],ids:o[p]};s.push(d)}return s.sort((function(e,t){var n=e.name.toUpperCase(),r=t.name.toUpperCase();return n<r?-1:n>r?1:0})),s.map((function(t){var n=e.props.supplier.offerings,r=n.findIndex((function(e){return e.type===t.type})),a=t.value;return-1!==r&&(a*=1+n[r].markup/1e3,a=Math.floor(a)),i.a.createElement("div",{className:"SupplierInventoryItem itemBackground",key:t.id},i.a.createElement("span",{className:"SupplierInventoryItemName"},t.name," (",t.count,")"),i.a.createElement("div",{className:"SupplierItemsValueGroup"},i.a.createElement("span",{className:"CoinSymbol"},i.a.createElement(S,null)," "),i.a.createElement("span",{className:"InventoryItemValue"},a)),i.a.createElement("div",{className:"BuyButtonContainer",onClick:function(){return e.handlePurchase({ids:t.ids,price:a})}},i.a.createElement(V,null)))}))}},{key:"render",value:function(){var e="Supplier primary";return this.props.isMobile&&(e+=" mobileSupplier"),i.a.createElement("div",{className:e},i.a.createElement("div",{className:"SupplierName"},this.props.supplier.name,i.a.createElement("div",{className:"SupplierValueGroup"},i.a.createElement("span",{className:"CoinSymbol"},i.a.createElement(S,null)," "),i.a.createElement("span",{className:"InventoryItemValue"},this.props.supplier.gold))),i.a.createElement("div",{className:"supplierInventory primary-light"},this.getSuppllierInventory()))}}]),n}(i.a.Component),W=Object(u.b)((function(e){return{supplyReady:e.supplies.ready,storeGold:e.storeState.gold,isMobile:e.app.isMobile}}))(q),z=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).getSuppliers=r.getSuppliers.bind(Object(m.a)(r)),r.componentDidUpdate=r.componentDidUpdate.bind(Object(m.a)(r)),r.componentDidMount=r.componentDidMount.bind(Object(m.a)(r)),r.updateSuppliers=r.updateSuppliers.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"updateSuppliers",value:function(){Array.isArray(this.props.suppliers)&&this.props.supplySpawned&&(this.props.supplyReady||_.fillSupplies()),Array.isArray(this.props.suppliers)&&this.props.supplyReady&&(this.props.suppliersInitialized||(A.takeSupplierTurn(),this.props.setSuppliersInitialized(!0)))}},{key:"componentDidMount",value:function(){this.updateSuppliers()}},{key:"componentDidUpdate",value:function(){this.updateSuppliers()}},{key:"getSuppliers",value:function(){var e=this;if(this.props.detailUpdate)return"";var t="suppliersContainer",n="spacer";this.props.isPc||(t+=" nonPcContainer",t+=" mobileContainer",n+=" mobileSpacer");var r=this.props.suppliers;if(Array.isArray(r)){var a=r.map((function(t){return i.a.createElement(W,{supplier:t,initialized:e.props.suppliersInitialized})}));return i.a.createElement("div",{className:t,ref:function(t){e.container=t}},a,i.a.createElement("div",{className:n}))}return"no suppliers to render"}},{key:"render",value:function(){var e="Suppliers primary-dark";return this.props.isPc||(e+=" mobileSuppliers"),i.a.createElement("div",{className:e},this.getSuppliers())}}]),n}(i.a.Component),Y=Object(u.b)((function(e){return{suppliers:e.suppliers.suppliers,supplyReady:e.supplies.ready,supplySpawned:e.supplies.spawned,isPc:e.app.isPc,isMobile:e.app.isMobile,suppliersInitialized:e.suppliers.initialized,detailUpdate:e.detail.update}}),(function(e){return{setSuppliersInitialized:function(t){return e({type:"SET_SUPPLIERS_INITIALIZED",value:t})}}}))(z),J=(n(70),{maxSuppliers:3,startingAdventurers:5,dailyAdventurers:1,adventurerStartingGold:400}),Z=function(){var e=0,t=[],n={heal:"heal",defend:"defend",special:"special",attack:"attack"},r=function(t){var n=t.protoId,r=t.name,a=t.boss,i=t.level,o=t.hp,s=t.damage,u=t.defense,c=t.stealth,l=t.initiative,p=t.special,d=t.heal,m=t.experience,h=t.dropList,v=t.monsterBehavior;this.protoId=n,this.name=r,this.boss=a,this.level=i,this.hp=o,this.maxHp=o,this.damage=s,this.defense=u,this.stealth=c,this.initiative=l,this.special=p,this.heal=d,this.experience=m,this.dropList=h,this.monsterBehavior=v,this.id=e,this.specialCooldown=4,this.defending=!1,e++};r.prototype.getInitiativeRoll=function(){var e=(.9*this.initiative+.3*this.stealth)/10;return Math.random()*e},r.prototype.takeTrapDamage=function(e){var t=Math.floor(3*Math.pow(1.25,e-1));return t>this.hp&&(t=this.hp),this.hp-=t,t},r.prototype.checkNeedsHeal=function(){return(this.maxHp-this.hp)/this.maxHp>Math.random()},r.prototype.checkUseHeal=function(){return this.monsterBehavior.heal/1e3>Math.random()},r.prototype.checkUseSpecial=function(){return this.monsterBehavior.special_move/1e3>Math.random()},r.prototype.checkDefend=function(){return!this.defending&&this.monsterBehavior.defend/1e3>Math.random()},r.prototype.checkBlockFlee=function(){return this.monsterBehavior.flee/1e3>Math.random()},r.prototype.getBattleDecision=function(){var e=new a(this.id);return this.monsterBehavior.heal&&(e.needHealing=this.checkNeedsHeal(),e.useHeal=this.checkUseHeal()),this.monsterBehavior.special_move&&(e.useSpecial=this.checkUseSpecial()),e.defend=this.checkDefend(),e.weighDecisionTournament()},r.prototype.takeBattleDamage=function(e){this.hp-=e};var a=function(e){this.monsterId=e,this.needHealing=!1,this.useHeal=!1,this.useSpecial=!1,this.defend=!1};return a.prototype.weighDecisionTournament=function(){var e=this,r=t.find((function(t){return t.id===e.monsterId})),a=[],i={useHeal:r.monsterBehavior.heal,useSpecial:r.monsterBehavior.special_move,defend:r.monsterBehavior.defend};if(this.needHealing&&this.useHeal&&a.push(n.heal),this.useSpecial&&a.push(n.special),this.defend&&a.push(n.defend),a.push(n.attack),1===a.length)return a[0];for(var o=Math.ceil(Math.log2(a.length)),s=function(e){for(var t=a.length,n=[],r=Math.floor(t/2),o=0;o<r;o++){var s=[a[o],a[t-(o+1)]];n.push(s)}var u=[];n.forEach((function(e){var t=Math.random()*i[e[0]],n=Math.random()*i[e[1]],r=Math.random();t>n||t===n&&r<.5?u.push(e[1]):u.push(e[0])}));for(var c=function(e){var t=u[e];a=a.filter((function(e){return e!==t}))},l=0;l<u.length;l++)c(l)},u=0;u<o;u++)s();return a[0]},{createMonster:function(e){var n=new r(e);return t.push(n),n.id},getMonster:function(e){var n=t.find((function(t){return t.id===e}));return void 0!==n&&null!==n&&n},composePayloadFromProto:function(e){return{protoId:e.id,name:e.name,boss:e.boss,level:e.level,hp:e.hp,damage:e.damage,defense:e.defense,stealth:e.stealth,initiative:e.initiative,special:e.special,heal:e.heal,experience:e.experience,dropList:e.drop_list,monsterBehavior:e.monster_behavior}},getMonsterDecisions:function(){return n}}}(),X=function(){var e,t=[],n=[],r=0,a=function(e){var t=e.number,n=e.boss,r=e.bossId,a=e.monstersMinLevel,i=e.monstersMaxLevel,o=e.tileAssignments,s=e.treasureDropList;this.number=t,this.boss=n,this.bossId=r,this.monstersMinLevel=a,this.monstersMaxLevel=i,this.tileAssignments=o,this.treasureDropList=s,this.treasures=[],this.droppedTreasures=[],this.monsters=[],this.lurkingMonsters=[],this.monstersLoot=[],this.treasureListFetched=!1,this.monstersFetched=!1,this.monsterDropListItemsFetched=!1,this.intialized=!1};a.prototype.initialize=Object(M.a)(I.a.mark((function e(){var t=this;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){h(t.monstersMinLevel,t.monstersMaxLevel).next().value.then((function(n){if(!n)return!1;var r=[];n.forEach((function(e){t.monsters.push(e);var n=e.drop_list.drops;n&&n.forEach((function(e){var t=e.itemId;r.find((function(e){return e.itemId===t}))||r.push({itemId:t,dropType:e.drop_type})}))}));var a=[];t.treasureDropList.drops.forEach((function(e){var t=e.itemId;a.find((function(e){return e.itemId===t}))||a.push({itemId:t,dropType:e.drop_type})})),new Promise((function(e,n){r.forEach((function(n,a){f(n).next().value.then((function(n){Array.isArray(n)&&(n=n[0]),t.monstersLoot.push(n),a===r.length-1&&e()}))}))})).then((function(){new Promise((function(e,n){a.forEach((function(n,r){f(n).next().value.then((function(n){Array.isArray(n)&&(n=n[0]),t.treasures.push(n),r===a.length-1&&e()}))}))})).then((function(){t.initialized=!0,console.log("level initialized."),e(!0)}))}))}))})));case 1:case"end":return e.stop()}}),e)}))),a.prototype.activateTile=function(){var e=Object(M.a)(I.a.mark((function e(t){var n=this;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){for(var a=[],i=0;i<n.tileAssignments.length;i++){var u=n.tileAssignments[i].probability,c=Math.random()*u;a.push({tile:i,result:c})}a.sort((function(e,t){return e.result>t.result?-1:e.result<t.result?1:0}));var l=a[0].tile,p=n.tileAssignments[l].dungeon_tile,d=0;t.informed&&(d=20);var m=$.getActions(),h=0;t.action===m.checkForTreasure&&(h=10);var v=0;t.action===m.checkForTraps&&(v=50);var f=Math.random()*(p.treasure+d+h),b=Math.random()*p.encounter,g=Math.random()*(p.trap-v),E=125*Math.random();if(E>f&&E>b&&E>g)e();else if(f>b&&f>g){console.log("treasure event");var k=Math.floor(Math.random()*n.treasures.length),S=n.treasures[k],N=n.treasureDropList.drops.find((function(e){return e.itemId===S.id})).dropChance/1e3>Math.random(),O=n.treasureDropList.gold_min,T=n.treasureDropList.gold_max-O,I=Math.floor(Math.random()*T)+O;if(n.treasureDropList.gold_chance/1e3>Math.random()&&t.creditAccount(I),N){var M=y.composePayloadFromProto(S),D=y.createItem(M),w=y.getItem(D);t.considerTreasure(w)}e()}else{if(g>f&&g>b)return t.encounterTrap(n.number),void e();if(b>g&&b>f){console.log("perform encounter");var j=Math.floor(Math.random()*n.monsters.length),L=n.monsters[j],P=Z.composePayloadFromProto(L),_=Z.createMonster(P),C=Z.getMonster(_);t.setWeaknessChecked(!1),t.logEncounterStart(C.name);var A=new o({adventurer:t,monster:C,level:n.number,levelLoot:n.monstersLoot});s.addBattle(A),A.startBattle(e),console.log("battle created.")}}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var i=function(){this.currentBattles=[],this.currentBattleId=0};i.prototype.addBattle=function(e){return e.id=this.currentBattleId,this.currentBattles.push(e),this.currentBattleId++,e.id},i.prototype.clearBattleRound=function(e){var t=e.roundNumber,n=e.battleId;this.currentBattles.find((function(e){return e.id===n})).clearRound(t)},i.prototype.addBattleRound=function(e){var t=e.battleId,n=e.newRound;this.currentBattles.find((function(e){return e.id===t})).addRound(n)},i.prototype.getBattleLevelLoot=function(e){return this.currentBattles.find((function(t){return t.id===e})).levelLoot};var o=function(e){var t=e.adventurer,n=e.monster,r=e.level,a=e.levelLoot;this.adventurer=t,this.monster=n,this.rounds=[],this.currentRoundNumber=0,this.level=r,this.levelLoot=a};o.prototype.startBattle=function(e){this.resolution=e;var t=new u({adventurer:this.adventurer,monster:this.monster,battleId:this.id});this.addRound(t),t.startRound()},o.prototype.addRound=function(e){e.roundNumber=this.currentRoundNumber,this.currentRoundNumber++,this.rounds.push(e)},o.prototype.clearRound=function(e){var n=this,r=this.rounds.find((function(t){return t.roundNumber===e}));r.fleed&&t.find((function(e){return e.number===n.level})).lurkingMonsters.push(this.monster);this.rounds=this.rounds.filter((function(t){return t.roundNumber!==e})),r&&(r=null),0===this.rounds.length&&this.resolution()};var s,u=function(e){var t=e.adventurer,n=e.monster,r=e.battleId;this.battleId=r,this.adventurer=t,this.monster=n,this.fleed=!1};u.prototype.startRound=function(){var e=$.getActions(),t=this.adventurer.getInitiativeRoll(),n=this.monster.getInitiativeRoll();if(this.adventurer.action.currentAction===e.setTrap){var r=this.monster.takeTrapDamage(this.adventurer.level);this.adventurer.logTrap({trapDamage:r,monsterName:this.monster.name}),this.adventurer.unsetTrap()}if(t>n?(this.adventurerTurn(),this.monster.hp>0&&!this.fleed&&this.monsterTurn()):(this.monsterTurn(),this.adventurer.hp>0&&this.adventurerTurn()),console.log(this.monster.hp),this.adventurer.hp>0&&this.monster.hp>0&&!this.fleed&&this.addRound(),this.adventurer.hp<=0&&(this.adventurer.logBattleLoss({monsterName:this.monster.name}),this.adventurer.returnToTown(),this.fleed=!0),this.monster.hp<=0){this.adventurer.gainExperience(this.monster.experience),console.log("monster treasure event"),console.log(this.monster.dropList.drops);var a=Math.floor(Math.random()*this.monster.dropList.drops.length),i=s.getBattleLevelLoot(this.battleId),o=this.monster.dropList.drops;console.log(i),console.log(o);var u=o.map((function(e){console.log(e);var t=e.itemid;return console.log(t),i.find((function(e){return e.itemId===t}))}));console.log(u);var c=u[a];console.log(c);var l=o[a].dropChance/1e3>Math.random(),p=this.monster.dropList.gold_min,d=this.monster.dropList.gold_max-p,m=Math.floor(Math.random()*d)+p;if(console.log(m),this.monster.dropList.gold_chance/1e3>Math.random()&&this.adventurer.creditAccount(m),l){var h=y.composePayloadFromProto(c),v=y.createItem(h),f=y.getItem(v);this.adventurer.considerTreasure(f)}this.adventurer.logVictory({monsterName:this.monster.name})}this.clearSelf()},u.prototype.adventurerTurn=function(){console.log("adventurer turn");var e=$.getBattleDecisions(),t=this.adventurer.getBattleDecision(this.monster);(t===e.defend?(this.adventurer.defending=!0,this.adventurer.logDefend()):this.adventurer.defending=!1,t===e.usePotion&&this.adventurer.usePotion(),t===e.flee)&&(this.monster.checkBlockFlee()?.05+(this.monster.level-this.adventurer.level)/10>Math.random()?(this.fleed=!0,this.adventurer.logFlee()):this.adventurer.logFleeFail(this.monster.name):(this.fleed=!0,this.adventurer.logFlee()));if(t===e.checkWeakness&&(this.adventurer.setWeaknessChecked(!0),this.adventurer.logWeaknessChecked({monsterName:this.monster.name})),t===e.attack){var n=0;n="thief"===this.adventurer.adventurerClass.name?Math.floor(.75*this.adventurer.cunning)+this.adventurer.strength:"bard"===this.adventurer.adventurerClass.name?Math.floor(.5*this.adventurer.cunning)+this.adventurer.strength:"soldier"===this.adventurer.adventurerClass.name?Math.floor(.2*this.adventurer.cunning)+this.adventurer.strength:this.adventurer.strength;var r=0;this.adventurer.equipment.weapon&&(r=this.adventurer.equipment.weapon.damage);var a=Math.floor(n/2),i=n-a,o=a+Math.floor(Math.random()*i)+r-Math.floor(Math.random()*(.5*this.monster.defense)+.5*this.monster.defense);if(this.monster.defending&&(o=Math.floor(o/2)),this.adventurer.weaknessChecked)o=o*Math.floor(1.3*Math.pow(1.14,this.adventurer.cunning));(o=Number.parseInt(o))<1&&(o=Math.random()>.5?1:0),o>this.monster.hp&&(o=this.monster.hp),this.monster.takeBattleDamage(o);var s={monsterName:this.monster.name,damage:o};this.adventurer.logHitMonster(s)}},u.prototype.monsterTurn=function(){var e=Z.getMonsterDecisions(),t=this.monster.getBattleDecision();if(t===e.defend?this.monster.defending=!0:this.monster.defending=!1,t===e.attack){var n=Math.floor(this.monster.damage/2),r=this.monster.damage-n,a=Math.floor(Math.random()*r),i=Math.floor((this.adventurer.adventurerClass.armor+Math.floor(this.adventurer.adventurerClass.tactics/2))/2),o=0;this.adventurer.equipment.armor&&(o=this.adventurer.equipment.armor.armor);var s=n+a-i-o;this.adventurer.defending&&(s=Math.floor(s/2)),s<1&&(s=Math.random()>.5?1:0);var u={monsterName:this.monster.name,damage:s};this.adventurer.takeBattleDamage(u)}},u.prototype.addRound=function(){var e=new u({adventurer:this.adventurer,monster:this.monster,battleId:this.battleId});s.addBattleRound({newRound:e,battleId:this.battleId}),e.startRound()},u.prototype.clearSelf=function(){s.clearBattleRound({roundNumber:this.roundNumber,battleId:this.battleId})};var c=function(){var e={type:"SET_DUNGEON_LEVELS",payload:t};et.dispatch(e)},l=function(){var e={type:"SET_DUNGEON_LEVEL_EXPLORED",level:r};et.dispatch(e)},p=function(){var e={type:"SET_DUNGEON_ADVENTURERS",adventurers:n};et.dispatch(e)},d=function(){var e=Object(M.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.fetchRoute("levels-full"),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:case"end":return e.stop()}}),e)})),h=I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,n);case 2:case"end":return e.stop()}}),e)})),v=function(){var e=Object(M.a)(I.a.mark((function e(t,n){var r,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/monsters-in-level-range?min-level=".concat(t,"&max-level=").concat(n),e.prev=1,e.next=4,fetch(r);case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return a&&(a=a.json()),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),f=I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:case"end":return e.stop()}}),e)})),b=function(){var e=Object(M.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/".concat(t.dropType,"-id?id=").concat(t.itemId),e.prev=1,e.next=4,fetch(n);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return r&&(r=r.json()),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(M.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=r+1;t.find((function(e){return e.number===a})).initialize().then((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{initializeLevels:function(){var n=Object(M.a)(I.a.mark((function n(){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=new i,m().next().value.then((function(e){if(!e)return!1;for(;e.length>0;){var n=e.shift();Array.isArray(n)&&(n=n[0]);var r={number:n.number,boss:n.boss,bossId:n.boss_id,monstersMinLevel:n.monsters_min_level,monstersMaxLevel:n.monsters_max_level,tileAssignments:n.tile_assignments,treasureDropList:n.drop_list},i=new a(r);t.push(i)}})).then((function(){e=t.length,t.sort((function(e,t){return e.number>t.number?1:e.number<t.number?-1:0})),c(),l()}));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),updateLevels:function(){c()},getExploredLevel:function(){return r},receiveAdventurer:function(e){!function(e){n.push({adventurerId:e,level:1}),r<1&&(r=1,l())}(e),p()},releaseAdventurer:function(e){!function(e){n=n.filter((function(t){return t.adventurerId!==e}))}(e),p()},executeTurn:function(){var e=Object(M.a)(I.a.mark((function e(r){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var i=n.find((function(e){return e.adventurerId===r.id}));t.find((function(e){return e.number===i.level})).activateTile(r).then((function(){e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),checkLevelReadiness:function(){if(0===r)return!1;if(!n)return!1;for(var t=1,a=0;a<n.length;a++)n[a].level>t&&(t=n[a].level);return!(r<=t)||!(r<e)},loadNextLevel:I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:case"end":return e.stop()}}),e)}))}}(),K=function(){var e={name:"adventurerNameTag",monsterName:"monsterNameTag",status:"status",value:"value"};return{getFilterClasses:function(){return e}}}(),$=function(){var e=[],t=0,n={checkForTreasure:"checkForTreasure",checkForTraps:"checkForTraps",setTrap:"setTrap"},r="usePotion",a="advance",o="checkForTraps",s="checkForTreasure",u="setTrap",c="returnToTown",l={usePotion:"usePotion",defend:"defend",flee:"flee",checkWeakness:"checkWeakness",attack:"attack"},p=function(e){var n=e.name,r=e.strength,a=e.speed,i=e.cunning,o=e.intelligence,s=e.constitution,u=e.dungeonBehavior,c=e.townBehavior,l=e.adventurerClass;this.name=n,this.strength=r,this.speed=a,this.cunning=i,this.intelligence=o,this.constitution=s,this.dungeonBehavior=u,this.townBehavior=c,this.adventurerClass=l,this.gold=J.adventurerStartingGold,this.level=1,this.experience=0,this.hp=7+s,this.maxHp=this.hp,this.inventory=[],this.equipment={weapon:null,armor:null},this.inDungeon=!1,this.informed=!1,this.hasFoundStairs=!1,this.currentTotalDungeonTurns=0,this.action={currentAction:null,turns:0},this.id=t,this.defending=!1,this.weaknessChecked=!1,t++};p.prototype.checkAccount=function(e){return this.gold>=e},p.prototype.chargeAccount=function(e){this.gold-=e},p.prototype.creditAccount=function(e){this.gold+=e},p.prototype.unequipItem=function(e){this.equipment[e]=null},p.prototype.equipItem=function(e){this.equipment[e.type]=e,console.log(this.equipment)},p.prototype.getCurrentItemCount=function(e){if(this.inventory.length<=0)return 0;var t,n=0,r=Object(P.a)(this.inventory);try{for(r.s();!(t=r.n()).done;){t.value.prototypeId===e&&n++}}catch(a){r.e(a)}finally{r.f()}return n},p.prototype.addCombatLog=function(e){this.combatLog||(this.combatLog=[]),this.combatLog.push(e)},p.prototype.getCombatLog=function(){return this.combatLog||(this.combatLog=[]),this.combatLog},p.prototype.checkHealthChoice=function(){return this.hp!==this.maxHp&&(this.maxHp-this.hp)/this.maxHp+this.dungeonBehavior.conserve_health/1e3>Math.random()},p.prototype.checkHasPotion=function(){return!(this.inventory.length<1)&&this.inventory.find((function(e){return e.type===b.potion}))},p.prototype.checkPotionUse=function(){return this.dungeonBehavior.use_potion/1e3>Math.random()},p.prototype.checkDefend=function(){return this.dungeonBehavior.defend/1e3-this.dungeonBehavior.attack/2e3>Math.random()},p.prototype.checkFlee=function(e){var t=e.level-this.level;t<0?t=1:t+=1;var n=((this.maxHp-this.hp)/this.maxHp-.8*((e.maxHp-e.hp)/e.maxHp))*Math.pow(1.2,t)*.8+this.dungeonBehavior.flee_encounter/4e3;return console.log("flee decisionFactor: ".concat(n)),n>Math.random()},p.prototype.checkWeakness=function(){return!this.weaknessChecked&&this.dungeonBehavior.check_monster_weakness/1e3>Math.random()},p.prototype.usePotion=function(){var e,t=K.getFilterClasses(),n=this.inventory.filter((function(e){return e.type===b.potion})),r=this.maxHp-this.hp;r/this.maxHp>.5?(n.sort((function(e,t){return e[b.potion].level<t[b.potion].level?1:e[b.potion].level>t[b.potion].level?-1:0})),e=n[0]):(n.sort((function(e,t){return e[b.potion].level<t[b.potion].level?-1:e[b.potion].level>t[b.potion].level?1:0})),e=n[0]);var a=Math.floor(e[b.potion].level*(4*Math.pow(1.08,e[b.potion].level)));a>r&&(a=r),this.hp=this.hp+a;var o=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:t.name},this.name," "),"  used ",e.name,". ",i.a.createElement("span",{className:t.name},this.name," ")," healed ",i.a.createElement("span",{className:t.value},a)," hp.");this.addCombatLog(o),this.inventory=this.inventory.filter((function(t){return t.id!==e.id})),y.destroyItem(e.id),e=null},p.prototype.checkTrapDecision=function(){return 3*((this.maxHp-this.hp)/this.maxHp)+this.dungeonBehavior.check_for_traps/1e3>Math.random()},p.prototype.checkTreasureDecision=function(){return this.dungeonBehavior.search_for_treasure/1e3>Math.random()},p.prototype.checkSetTrapDecision=function(){return this.dungeonBehavior.set_trap/1e3+this.dungeonBehavior.prefer_weaker_monster/4e3>Math.random()},p.prototype.checkAdvanceDecision=function(){var e=(this.maxHp-this.hp)/this.maxHp,t=15-this.inventory.length/15,n=this.dungeonBehavior.fill_inventory*t/1e3;return this.dungeonBehavior.advance_tile/1e3-2*e-this.currentTotalDungeonTurns/600+3*n>Math.random()},p.prototype.checkReturnToTown=function(){var e,t=(this.maxHp-this.hp)/this.maxHp,n=1;e=this.currentTotalDungeonTurns<15?(15-(n=-1)*this.currentTotalDungeonTurns)/15:n*this.currentTotalDungeonTurns/400;var r=(15-this.inventory.length)/15,a=this.dungeonBehavior.fill_inventory/1e3*r;return this.dungeonBehavior.return_to_town/1e3-5*a+2*t+e>Math.random()},p.prototype.considerTreasure=function(e){if(console.log(e),this.inventory.length<15)return this.inventory.push(e),!0},p.prototype.encounterTrap=function(e){var t=K.getFilterClasses(),n=3*Math.pow(1.25,e-1),r=(this.adventurerClass.traps+this.adventurerClass.agility+this.cunning)/(10*this.level*Math.pow(1.25,e-1)),a=Math.floor(n*(1/r));if(Math.random()*r>10*Math.random()){var o=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:t.name},this.name," ")," avoided a trap.");return this.addCombatLog(o),!1}console.log("trapDamage: ".concat(a)),a>this.hp&&(a=this.hp),this.hp-=a;var s=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:t.name},this.name)," took ",i.a.createElement("span",{className:t.value},a)," damage from a trap!");this.addCombatLog(s)},p.prototype.logEncounterStart=function(e){var t=K.getFilterClasses(),n="";switch(e.charAt(0).toLowerCase()){case"a":case"e":case"i":case"o":case"u":n="n";break;default:n=""}var r=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:t.name},this.name)," encountered a",n," ",i.a.createElement("span",{className:t.monsterName},e),"!");this.addCombatLog(r)},p.prototype.logTrap=function(e){var t=e.trapDamage,n=e.monsterName,r=K.getFilterClasses(),a=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:r.name},this.name),"'s' trap hit ",i.a.createElement("span",{className:r.monsterName},n)," for ",i.a.createElement("span",{className:r.value},t)," damage.");this.addCombatLog(a)},p.prototype.unsetTrap=function(){this.action={currentAction:null,turns:0}},p.prototype.setWeaknessChecked=function(e){this.weaknessChecked=e},p.prototype.getInitiativeRoll=function(){var e=.7*this.adventurerClass.tactics/10+.3*this.adventurerClass.agility/10;return Math.random()*e},p.prototype.takeBattleDamage=function(e){var t,n=K.getFilterClasses(),r=e.monsterName,a=e.damage,o=Number.parseInt(a);o>this.hp&&(o=this.hp),o&&(this.hp-=o),t=o>0?i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:n.monsterName},r)," hit ",i.a.createElement("span",{className:n.name},this.name)," for ",i.a.createElement("span",{className:n.value},o)," damage."):i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:n.monsterName},r)," attempted to hit ",i.a.createElement("span",{className:n.name},this.name),", but did no damage."),this.addCombatLog(t)},p.prototype.logDefend=function(){var e,t=K.getFilterClasses();e=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:t.name},this.name)," assumed a defensive posture."),this.addCombatLog(e)},p.prototype.logFlee=function(){var e,t=K.getFilterClasses();e=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:t.name},this.name)," fled from battle!"),this.addCombatLog(e)},p.prototype.logFleeFail=function(e){var t,n=K.getFilterClasses(),r=e.monsterName;t=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:n.name},this.name)," attempted to flee from ",i.a.createElement("span",{className:n.monsterName},r)," but failed!"),this.addCombatLog(t)},p.prototype.logBattleLoss=function(e){var t,n=K.getFilterClasses(),r=e.monsterName;t=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:n.monsterName},r)," defeated ",i.a.createElement("span",{className:n.name},this.name)," and is now roaming loose in the dungeon!"),this.addCombatLog(t)},p.prototype.logReturnToTown=function(){var e,t=K.getFilterClasses();e=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:t.name},this.name)," returned to town."),this.addCombatLog(e)},p.prototype.logWeaknessChecked=function(e){var t,n=K.getFilterClasses(),r=e.monsterName;t=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:n.name},this.name)," checked ",i.a.createElement("span",{className:n.monsterName},r)," for weaknesses."),this.addCombatLog(t)},p.prototype.logHitMonster=function(e){var t,n=K.getFilterClasses(),r=e.monsterName,a=e.damage;t=a>0?i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:n.name},this.name)," hit ",i.a.createElement("span",{className:n.monsterName},r)," for ",i.a.createElement("span",{className:n.value},a)," damage."):i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:n.name},this.name)," attempted to hit ",i.a.createElement("span",{className:n.monsterName},r),", but did no damage."),this.addCombatLog(t)},p.prototype.logVictory=function(e){var t,n=K.getFilterClasses(),r=e.monsterName;t=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:n.name},this.name)," defeated ",i.a.createElement("span",{className:n.monsterName},r),"!"),this.addCombatLog(t)},p.prototype.gainExperience=function(e){this.experience+=e},p.prototype.returnToTown=function(){X.releaseAdventurer(this.id),this.inDungeon=!1;var e={adventurerId:this.id,day:L.getDay()};d.clearAdventurerTurns(e),this.hp=this.maxHp,this.logReturnToTown()},p.prototype.getBattleDecision=function(e){var t=new f(this.id);t.needHealing=this.checkHealthChoice(),t.hasPotion=this.checkHasPotion(),t.usePotion=this.checkPotionUse(),t.defend=this.checkDefend(),t.flee=this.checkFlee(e),t.checkWeakness=this.checkWeakness();return t.flee?l.flee:t.weighDecisionTournament()};var d,m=function(){this.currentTurns=[],this.currentId=0};m.prototype.addTurn=function(e){e.id=this.currentId,this.currentTurns.push(e),this.currentId++},m.prototype.clearTurn=function(e){var t=this.currentTurns.find((function(t){return t.id===e}));this.currentTurns=this.currentTurns.filter((function(t){return t.id!==e})),t&&(t=null),0===this.currentTurns.length&&(this.currentId=0,E())},m.prototype.clearAdventurerTurns=function(e){var t=e.adventurerId,n=e.day,r=this.currentTurns.filter((function(e){return e.adventurerId===t&&e.day===n}));this.currentTurns=this.currentTurns.filter((function(e){return e.adventurerId!==t&&e.day!==n})),r.forEach((function(e){null}))},m.prototype.startTurns=function(){if(0===this.currentTurns.length)return!1;this.currentTurns.filter((function(e){return 1===e.turnNumber})).forEach((function(e){e.runTurn()}))},m.prototype.startTurn=function(e){var t=e.adventurerId,n=e.day,r=e.turn,a=this.currentTurns.find((function(e){return e.adventurerId===t&&e.day===n&&e.turnNumber===r}));a&&a.runTurn()};var h=function(e){var t=e.adventurer,n=e.day,r=e.turnNumber,a=e.nextTurn;this.adventurer=t,this.adventurerId=t.id,this.day=n,this.turnNumber=r,this.nextTurn=a};h.prototype.runTurn=Object(M.a)(I.a.mark((function e(){var t,n=this;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=K.getFilterClasses(),new Promise((function(e,l){var p,m=n.adventurer,h=new v(m.id);if(m.hp<m.maxHp&&(h.needHealing=m.checkHealthChoice(),h.hasPotion=m.checkHasPotion(),h.needHealing&&h.hasPotion&&(h.usePotion=m.checkPotionUse())),m.action.currentAction||(h.checkForTraps=m.checkTrapDecision(),h.checkForTreasure=m.checkTreasureDecision(),h.setTrap=m.checkSetTrapDecision()),h.advance=m.checkAdvanceDecision(),h.returnToTown=m.checkReturnToTown(),(p=h.weighDecisionLogical())||(p=h.weighDecisionTournament()),0===m.hp&&(p=c),p===r&&m.usePotion(),p===o||p===s||p===u){m.action.currentAction=p;var f=2*m.speed;m.action.turns=f;var b="";p===o?b="is checking for traps":p===s?b="is checking for treasure":p===u&&(b="sets a trap");var g=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:t.name},m.name," ")," ",b,".");m.addCombatLog(g)}if(p===c){X.releaseAdventurer(m.id),m.inDungeon=!1;var y={adventurerId:n.adventurerId,day:n.day};d.clearAdventurerTurns(y),m.hp=m.maxHp,m.logReturnToTown(),e()}new Promise((function(e,t){p===a?X.executeTurn(m).then((function(){e()})):e()})).then((function(){n.adventurer.currentTotalDungeonTurns++,e()}))})).then((function(){if(n.nextTurn){var e={turn:n.nextTurn,adventurerId:n.adventurerId,day:n.day};d.startTurn(e)}d.clearTurn(n.id)}));case 2:case"end":return e.stop()}}),e)})));var v=function(e){this.adventurerId=e,this.needHealing=!1,this.hasPotion=!1,this.usePotion=!1,this.checkForTraps=!1,this.checkForTreasure=!1,this.setTrap=!1,this.advance=!1,this.returnToTown=!1};v.prototype.weighDecisionLogical=function(){return this.needHealing&&this.hasPotion&&this.usePotion&&!this.advance?r:!this.returnToTown||this.usePotion||this.hasPotion||this.advance?!(this.usePotion||!this.advance||this.checkForTraps||this.checkTreasure)&&a:c},v.prototype.weighDecisionTournament=function(){var t=this,n=e.find((function(e){return e.id===t.adventurerId})),i=[],l={usePotion:n.dungeonBehavior.use_potion,checkForTraps:n.dungeonBehavior.check_for_traps,checkForTreasure:n.dungeonBehavior.search_for_treasure,setTrap:n.dungeonBehavior.set_trap,advance:n.dungeonBehavior.advance_tile,returnToTown:n.dungeonBehavior.return_to_town};if(this.usePotion&&this.hasPotion&&i.push(r),this.checkForTraps&&i.push(o),this.checkForTreasure&&i.push(s),this.setTrap&&i.push(u),this.advance&&i.push(a),this.returnToTown&&i.push(c),1===i.length)return i[0];for(var p=Math.ceil(Math.log2(i.length)),d=function(e){for(var t=i.length,n=[],r=Math.floor(t/2),a=0;a<r;a++){var o=[i[a],i[t-(a+1)]];n.push(o)}var s=[];n.forEach((function(e){var t=Math.random()*l[e[0]],n=Math.random()*l[e[1]],r=Math.random();t>n||t===n&&r<.5?s.push(e[1]):s.push(e[0])}));for(var u=function(e){var t=s[e];i=i.filter((function(e){return e!==t}))},c=0;c<s.length;c++)u(c)},m=0;m<p;m++)d();return i[0]};var f=function(e){this.adventurerId=e,this.needHealing=!1,this.hasPotion=!1,this.usePotion=!1,this.defend=!1,this.flee=!1,this.checkWeakness=!1};f.prototype.weighDecisionTournament=function(){var t=this,n=e.find((function(e){return e.id===t.adventurerId})),r=[],a={usePotion:n.dungeonBehavior.use_potion,defend:n.dungeonBehavior.defend,flee:n.dungeonBehavior.flee_encounter,checkWeakness:n.dungeonBehavior.check_monster_weakness,attack:n.dungeonBehavior.attack};if(this.usePotion&&this.hasPotion&&r.push(l.usePotion),this.defend&&r.push(l.defend),this.flee&&r.push(l.flee),this.checkWeakness&&r.push(l.checkWeakness),r.push(l.attack),1===r.length)return r[0];for(var i=Math.ceil(Math.log2(r.length)),o=function(e){for(var t=r.length,n=[],i=Math.floor(t/2),o=0;o<i;o++){var s=[r[o],r[t-(o+1)]];n.push(s)}var u=[];n.forEach((function(e){var t=Math.random()*a[e[0]],n=Math.random()*a[e[1]],r=Math.random();t>n||t===n&&r<.5?u.push(e[1]):u.push(e[0])}));for(var c=function(e){var t=u[e];r=r.filter((function(e){return e!==t}))},l=0;l<u.length;l++)c(l)},s=0;s<i;s++)o();return r[0]};var g=function(e){var t={type:"SET_ADVENTURERS",payload:e};et.dispatch(t)},E=function(){var e={type:"SET_DETAIL_UPDATE",value:!0};et.dispatch(e)},S=function(){var e=Object(M.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.fetchRoute("adventurers-full"),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:case"end":return e.stop()}}),e)})),O=function(){e.filter((function(e){return!1===e.inDungeon})).forEach((function(e){if(e.townBehavior.enter_dungeon/1e3>=Math.random()){var t=K.getFilterClasses(),n=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:t.name},e.name," ")," entered the dungeon.");e.inDungeon=!0,e.currentTotalDungeonTurns=0;var r=n;e.addCombatLog(r),X.receiveAdventurer(e.id)}}))},T=function(){var t=e.filter((function(e){return!0===e.inDungeon}));new Promise((function(e,n){var r=L.getDay();console.log(r),t.forEach((function(n,a){for(var i=n.speed,o=1;o<=i;o++){var s=new h({adventurer:n,day:r,turnNumber:o,nextTurn:o<i?o+1:null});d.addTurn(s)}a===t.length-1&&e()}))})).then((function(){d.startTurns()}))};return{initializeAdventurers:function(){var t=Object(M.a)(I.a.mark((function t(n){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N().next().value.then((function(t){if(t){for(var r=t;e.length<n&&r.length>0;){var a=Math.floor(Math.random()*r.length),i=r.splice(a,1),o={name:(i=i[0]).name,strength:i.strength,speed:i.speed,cunning:i.cunning,intelligence:i.intelligence,constitution:i.constitution,dungeonBehavior:i.dungeon_behavior,townBehavior:i.town_behavior,adventurerClass:i.adventurer_class},s=new p(o);e.push(s)}return d=new m,g(e),e}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateAdventurers:function(){g(e)},takeAdventurerTurn:function(){(e.filter((function(e){return!1===e.inDungeon})).forEach((function(e){var t=e.townBehavior.use_tavern/1e3;if(e.informed&&(t=0),t>=Math.random()){var n=10*e.level;if(e.checkAccount(n)){var r=K.getFilterClasses(),a=i.a.createElement("div",{className:"combatLogEntry"},i.a.createElement("span",{className:r.name},e.name," "),"  stayed at the inn. ",i.a.createElement("span",{className:r.name},e.name," ")," is now ",i.a.createElement("span",{className:r.status},"informed"),".");e.chargeAccount(n),e.informed=!0;var o=a;e.addCombatLog(o)}}})),function(){var t=k.getStoreInventory(),n=[];t.forEach((function(e){var t=e;t.item=y.getItem(e.itemId),n.push(t)}));var r=e.filter((function(e){return!1===e.inDungeon})),a=0,i=r.length;n.forEach((function(e){for(var t=[],n=0;n<i;n++){var o=a+n;o>=i&&(o-=i),t.push(o)}var s=!1;t.forEach((function(t){var n="",o=r[t];o.equipment[e.item.type]&&e.item.type!==b.potion?n+="upgrade":n+="buy",n+="_"+e.item.type;var u=o.townBehavior[n]/1e3-e.markup/1600;u<0&&(u=0);var c=e.item.prototypeId,l=o.getCurrentItemCount(c);e.item.type===b.potion?u-=.1*l:u-=.3*l;var p=u>=Math.random();if(o.equipment[e.item.type]){var d=o.equipment[e.item.type];if(e.item.type===b.weapon)d[b.weapon].damage>=d[b.weapon].damage&&(p=!1);else if(e.item.type===b.armor){d[b.armor].armor>=e.item[b.armor].armor&&(p=!1)}}if(o.inventory.length>=15&&(p=!1),p&&!s){var m=Math.floor(e.item.value*(1+e.markup/1e3));if(o.checkAccount(m)){o.chargeAccount(m),j.creditGold(m),j.updateGold();var h=y.getItem(e.itemId);k.removeItem(e.itemId),k.updateStoreInventory(),o.inventory.push(h),h.type!==b.potion&&(o.equipment[h.type]&&o.unequipItem(h.type),o.equipItem(h)),s=!0,(a=t+1)>i&&(a=0)}}}))}))}(),X.checkLevelReadiness())?(O(),T(),g(e)):X.loadNextLevel().next().value.then((function(){O(),T(),g(e)}))},getActions:function(){return n},getBattleDecisions:function(){return l}}}(),Q={init:function(e){L.setDay(1),e.name||console.log("Game must be started with a payload object that contains a store name!"),j.setName(e.name);var t=j.getStartingGold();j.setGold(t),_.setSupplyLevel(1),_.fillSupplyPool(),A.initializeSuppliers(J.maxSuppliers),$.initializeAdventurers(J.startingAdventurers),X.initializeLevels()},getGameLevel:function(){return 1},performTurn:function(){$.takeAdventurerTurn(),_.fillSupplies(),A.takeSupplierIncomeTurns(),A.takeSupplierTurn(),function(){var e={type:"SET_DETAIL_UPDATE",value:!0};et.dispatch(e)}()}},ee=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).handleNextDay=r.handleNextDay.bind(Object(m.a)(r)),r.componentDidMount=r.componentDidMount.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchDay()}},{key:"handleNextDay",value:function(){Q.performTurn();var e=this.props.day;L.setDay(e+1),this.props.mobileDropdown&&this.props.setMobileDropdown(!1),this.props.fetchDay()}},{key:"render",value:function(){return i.a.createElement("div",{className:"Days primary-dark"},i.a.createElement("div",{className:"DayTitle"},"Day: ",this.props.day),i.a.createElement("div",{className:"nextDay button secondary",onClick:this.handleNextDay},"Finish Day"))}}]),n}(i.a.Component),te=Object(u.b)((function(e){return{day:e.days.day,mobileDropdown:e.mobileMenu.dropdown}}),(function(e){return{fetchDay:function(){return e(x())},setMobileDropdown:function(t){return e({type:"SET_MOBILE_DROPDOWN",value:t})}}}))(ee),ne=(n(71),n(72),{adventurers:"adventurers",adventurer:"adventurer",dungeon:"dungeon",adventurersPartial:"adventurersPartial"}),re=function(){var e="",t=0,n=[ne.adventurers,ne.dungeon],r={};return{init:function(){e=n[0],t=0,n.forEach((function(e,t){r[e]=t}))},getCurrentMenu:function(){return e},nextMenu:function(){++t>=n.length&&(t=0),e=n[t]},previousMenu:function(){--t<0&&(t=n.length-1),e=n[t]},getMenus:function(){return n},setmenu:function(a){var i=r[a];return null!==i&&(t=i,e=n[i],!0)},updateMenu:function(){!function(){var t={type:"SET_PC_DETAIL",detail:e};et.dispatch(t)}()}}}(),ae=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).componentDidMount=r.componentDidMount.bind(Object(m.a)(r)),r.handlePrevious=r.handlePrevious.bind(Object(m.a)(r)),r.handleNext=r.handleNext.bind(Object(m.a)(r)),r.handleDropdown=r.handleDropdown.bind(Object(m.a)(r)),r.handleMenuChange=r.handleMenuChange.bind(Object(m.a)(r)),r.getPCDropdown=r.getPCDropdown.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){re.init()}},{key:"handlePrevious",value:function(){re.previousMenu(),re.updateMenu(),this.props.pcDropdown&&this.props.setPcDropdown(!1)}},{key:"handleNext",value:function(){re.nextMenu(),re.updateMenu(),this.props.pcDropdown&&this.props.setPcDropdown(!1)}},{key:"handleDropdown",value:function(){this.props.setPcDropdown(!this.props.pcDropdown)}},{key:"handleMenuChange",value:function(e){re.setmenu(e),re.updateMenu(),this.props.setPcDropdown(!1)}},{key:"getPCDropdown",value:function(){var e=this,t=re.getMenus();return!!this.props.pcDropdown&&i.a.createElement("div",{className:"PCDropdown primary-dark"},t.map((function(t){return i.a.createElement("div",{className:"PCDropdownOption primary-medium",onClick:function(){return e.handleMenuChange(t)}},t)})))}},{key:"render",value:function(){var e=this.props.pcDetailMenu;return e===ne.adventurersPartial&&(e=ne.adventurers),i.a.createElement("div",{className:"PCDetailMenu primary-saturated"},i.a.createElement("span",{className:"previousMenu screenArrowPC",onClick:this.handlePrevious},"\u2190"),i.a.createElement("span",{className:"PCMenuTitle",onClick:this.handleDropdown},e),i.a.createElement("span",{className:"nextMenu screenArrowPC",onClick:this.handleNext},"\u2192"),this.getPCDropdown())}}]),n}(i.a.Component),ie=Object(u.b)((function(e){return{pcDetailMenu:e.pcMenu.detail,pcDropdown:e.pcMenu.dropdown,dungeonLevelExplored:e.dungeon.exploredLevel}}),(function(e){return{setPcDetailMenu:function(t){return e({type:"SET_PC_DETAIL",detail:t})},setPcDropdown:function(t){return e({type:"SET_PC_DROPDOWN",value:t})}}}))(ae),oe=(n(73),n(74),function(){var e=!0,t=!1,n=!0,r=function(){var e={type:"SET_IS_FULLSCREEN",value:n};et.dispatch(e)};return{init:function(){e=!(window.orientation>-1),function(){var e=document.querySelector(".App").getBoundingClientRect();e.width<768&&(t=!0)}(),function(){var t={type:"SET_IS_PC",value:e};et.dispatch(t)}(),function(){var e={type:"SET_IS_MOBILE",value:t};et.dispatch(e)}()},getIsPc:function(){return e},getIsMobile:function(){return t},goFullScreen:function(){!function(){var e=document.querySelector(".App");e.requestFullscreen&&(e.requestFullscreen(),n=!0),e.msRequestFullscreen&&(e.msRequestFullscreen(),n=!0),e.mozRequestFullscreen&&(e.mozRequestFullscreen(),n=!0),e.webkitRequestFullscreen&&(e.webkitRequestFullscreen(),n=!0)}(),r()},leaveFullScreen:function(){n=!1,document.exitFullscreen(),r()}}}()),se=function(){var e=[],t=function(e){var t=e.displayPayload,n=e.isMobile,r=e.scrollPos;this.displayPayload=t,this.isMobile=n,this.scrollPos=r};return t.prototype.dispatchDisplay=function(){this.isMobile?et.dispatch({type:"SET_MOBILE_SCREEN",screen:this.displayPayload}):et.dispatch({type:"SET_PC_DETAIL",detail:this.displayPayload})},{popBreadcrumb:function(){if(e.length<1)return!1;e.pop().dispatchDisplay()},addBreadcrumb:function(n){var r=n.display,a=n.scrollPos,i=oe.getIsMobile(),o=new t({displayPayload:r,scrollPos:a,isMobile:i});e.push(o)}}}(),ue=function(){var e="",t=0,n=["store","suppliers","adventurers","dungeon"],r={store:"store",suppliers:"suppliers",adventurers:"adventurers",adventurer:"adventurer",dungeon:"dungeon",adventurersPartial:"adventurersPartial"},a={};return{init:function(){e=n[0],t=0,n.forEach((function(e,t){a[e]=t}))},getCurrentScreen:function(){return e},nextScreen:function(){++t>=n.length&&(t=0),e=n[t]},previousScreen:function(){--t<0&&(t=n.length-1),e=n[t]},getScreens:function(){return n},getAllScreens:function(){return r},setScreen:function(r){var i=a[r];return null!==i&&(t=i,e=n[i],!0)},updateScreen:function(){!function(){var t={type:"SET_MOBILE_SCREEN",screen:e};et.dispatch(t)}()}}}(),ce=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).handleZoom=r.handleZoom.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"handleZoom",value:function(){var e=this;if(this.props.adventurer){var t=this.props.partialAdventurers,n="adventurers";if(t)void 0!==t.find((function(t){return t===e.props.adventurer.id}))&&(n="adventurersPartial");this.props.setDetailId(this.props.adventurer.id);var r=document.querySelector(".adventurers").scrollTop;if(console.log(r),se.addBreadcrumb({display:n,screenPos:r}),oe.getIsMobile()){var a=ue.getAllScreens();this.props.setMobileScreen(a.adventurer)}else this.props.setPCDetail(ne.adventurer)}}},{key:"render",value:function(){if(!this.props.adventurer)return"";var e,t,n=this.props.adventurer,r=n.adventurerClass,a={thief:"thief",bard:"bard",soldier:"soldier"};t="adventurerClassIcon",e="adventurerClass",e+=" ".concat(a[r.name]),t+=" ".concat(a[r.name]);var o=r.name.charAt(0),s=i.a.createElement("div",{className:"dungeonIcon"},i.a.createElement("p",null,"D"),i.a.createElement("p",null,"U"),i.a.createElement("p",null,"N"));return i.a.createElement("div",{className:"adventurerDisplay primary",onClick:this.handleZoom},i.a.createElement("div",{className:t},o),i.a.createElement("div",{className:"adventurerDetails"},i.a.createElement("p",{className:"adventurerName"},n.name),i.a.createElement("p",{className:e},r.name),i.a.createElement("div",{className:"adventurerStatGroupWide"},i.a.createElement("p",{className:"adventurerStatLabel"},"exp"),i.a.createElement("p",{className:"adventurerStat"},n.experience)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"lvl"),i.a.createElement("p",{className:"adventurerStat"},n.level)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"gold"),i.a.createElement("p",{className:"adventurerStat"},n.gold)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"hp"),i.a.createElement("p",{className:"adventurerStat"},n.hp)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"str"),i.a.createElement("p",{className:"adventurerStat"},n.strength)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"spd"),i.a.createElement("p",{className:"adventurerStat"},n.speed)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"cun"),i.a.createElement("p",{className:"adventurerStat"},n.cunning)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"int"),i.a.createElement("p",{className:"adventurerStat"},n.intelligence)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"con"),i.a.createElement("p",{className:"adventurerStat"},n.constitution))),i.a.createElement("div",{className:"adventurerDungeonIndicator"},n.inDungeon?s:i.a.createElement("span",{className:"dungeonIcon"})))}}]),n}(i.a.Component),le=Object(u.b)((function(e){return{partialAdventurers:e.adventurers.partialAdventurers}}),(function(e){return{setDetailId:function(t){return e({type:"SET_DETAIL_ID",id:t})},setMobileScreen:function(t){return e({type:"SET_MOBILE_SCREEN",screen:t})},setPCDetail:function(t){return e({type:"SET_PC_DETAIL",detail:t})}}}))(ce),pe=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).getAdventurers=r.getAdventurers.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"getAdventurers",value:function(){return this.props.adventurers.map((function(e){return i.a.createElement(le,{adventurer:e})}))}},{key:"render",value:function(){return this.props.adventurers?i.a.createElement("div",{className:"adventurers"},this.getAdventurers(),i.a.createElement("div",{className:"spacer-vertical"})):""}}]),n}(i.a.Component),de=Object(u.b)((function(e){return{adventurers:e.adventurers.adventurers,adventurerUpdate:e.adventurers.update}}))(pe),me=(n(75),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).handleBack=r.handleBack.bind(Object(m.a)(r)),r.componentDidMount=r.componentDidMount.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.scrollCombatLog()}},{key:"getInventory",value:function(e){var t=e.inventory;return t?t.map((function(t){var n="";return e.equipment[t.type]&&e.equipment[t.type].id===t.id&&(n+=" (equipped)"),i.a.createElement("div",{className:"adventurerInventoryItem"},t.name,n)})):"no inventory"}},{key:"getCombatLog",value:function(e){if(!e)return"no combat log";var t=e.getCombatLog();return t.length<=0?"No combat log entries.":t}},{key:"scrollCombatLog",value:function(){var e=document.querySelector(".adventurer-combat-log");e&&(e.scrollTop=e.scrollHeight)}},{key:"handleBack",value:function(){se.popBreadcrumb()||console.log("breadcrumb failed!")}},{key:"render",value:function(){var e=this;if(!this.props.detailId&&0!==this.props.detailId||!this.props.adventurers)return"";var t,n,r=this.props.adventurers.find((function(t){return t.id===e.props.detailId})),a=r.adventurerClass,o={thief:"thief",bard:"bard",soldier:"soldier"};n="adventurerClassIcon",t="adventurerClass",t+=" ".concat(o[a.name]),n+=" ".concat(o[a.name]);var s=a.name.charAt(0);return i.a.createElement("div",{className:"AdventurerDetail primary"},i.a.createElement("div",{className:"title-bar"},i.a.createElement("div",{className:"back-button",onClick:this.handleBack},"\u2190"),i.a.createElement("div",{className:"adventurer-title"},r.name)),i.a.createElement("div",{className:"primary-stats-bar"},i.a.createElement("div",{className:n},s),i.a.createElement("div",{className:"primary-cascade"},i.a.createElement("div",{className:"adventurerStatGroupWide"},i.a.createElement("p",{className:"adventurerStatLabel"},"exp"),i.a.createElement("p",{className:"adventurerStat"},r.experience)),i.a.createElement("div",{className:"adventurerStatGroupWide"},i.a.createElement("p",{className:"adventurerStatLabel"},"lvl"),i.a.createElement("p",{className:"adventurerStat"},r.level)))),i.a.createElement("div",{className:"adventurerDetailsView"},i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:t},a.name)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"gold"),i.a.createElement("p",{className:"adventurerStat"},r.gold)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"hp"),i.a.createElement("p",{className:"adventurerStat"},r.hp)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"str"),i.a.createElement("p",{className:"adventurerStat"},r.strength)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"spd"),i.a.createElement("p",{className:"adventurerStat"},r.speed)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"cun"),i.a.createElement("p",{className:"adventurerStat"},r.cunning)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"int"),i.a.createElement("p",{className:"adventurerStat"},r.intelligence)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"con"),i.a.createElement("p",{className:"adventurerStat"},r.constitution))),i.a.createElement("p",{className:"adventurerInventoryHeadline"},"Inventory"),i.a.createElement("div",{className:"adventurerInventoryDetails"},this.getInventory(r)),i.a.createElement("p",{className:"adventurerInventoryHeadline"},"Combat Log"),i.a.createElement("div",{className:"adventurer-combat-log"},this.getCombatLog(r)))}}]),n}(i.a.Component)),he=Object(u.b)((function(e){return{adventurers:e.adventurers.adventurers,detailId:e.detail.id}}))(me),ve=(n(76),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).getAdventurers=r.getAdventurers.bind(Object(m.a)(r)),r.handleBack=r.handleBack.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"getAdventurers",value:function(e){return e.map((function(e){return i.a.createElement(le,{adventurer:e})}))}},{key:"handleBack",value:function(){this.props.setPartialAdventurers(null),se.popBreadcrumb()||console.log("breadcrumb failed!")}},{key:"render",value:function(){if(!this.props.adventurers||!this.props.partialAdventurers)return"";var e=this.props.partialAdventurers,t=this.props.adventurers;return e=e.map((function(e){return t.find((function(t){return t.id===e}))})),i.a.createElement("div",{className:"adventurers"},i.a.createElement("div",{className:"back-button partial-back primary",onClick:this.handleBack},"\u2190"),this.getAdventurers(e),i.a.createElement("div",{className:"spacer-vertical"}))}}]),n}(i.a.Component)),fe=Object(u.b)((function(e){return{partialAdventurers:e.adventurers.partialAdventurers,adventurers:e.adventurers.adventurers}}),(function(e){return{setPartialAdventurers:function(t){return e({type:"SET_PARTIAL_ADVENTURERS",payload:t})}}}))(ve),be=(n(77),n(78),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).handleAdventurerList=r.handleAdventurerList.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"handleAdventurerList",value:function(e){var t=e.map((function(e){return e.adventurerId}));this.props.setPartialAdventurers(t);var n=document.querySelector(".Dungeon").scrollTop;if(se.addBreadcrumb({display:"dungeon",screenPos:n}),oe.getIsMobile()){var r=ue.getAllScreens();this.props.setMobileScreen(r.adventurersPartial)}else this.props.setPCDetail(ne.adventurersPartial)}},{key:"render",value:function(){var e=this;if(!this.props.level)return"";var t=this.props.level,n=[],r=this.props.dungeonAdventurers;return r&&(n=r.filter((function(e){return e.level===t.number}))),i.a.createElement("div",{className:"levelDisplay primary"},i.a.createElement("div",{className:"levelNumber"},"LEVEL ",t.number),i.a.createElement("div",{className:"adventurersNumberContainer"},i.a.createElement("div",{className:"adventurersNumber",onClick:function(){return e.handleAdventurerList(n)}},n.length>0?n.length:""),i.a.createElement("div",{className:"adventurersNumberLabel"},"adventurers")))}}]),n}(i.a.Component)),ge=Object(u.b)((function(e){return{dungeonAdventurers:e.dungeon.adventurers}}),(function(e){return{setPartialAdventurers:function(t){return e({type:"SET_PARTIAL_ADVENTURERS",payload:t})},setMobileScreen:function(t){return e({type:"SET_MOBILE_SCREEN",screen:t})},setPCDetail:function(t){return e({type:"SET_PC_DETAIL",detail:t})}}}))(be),ye=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).getLevels=r.getLevels.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"getLevels",value:function(){var e=this;return this.props.levels.filter((function(t){return t.number<=e.props.exploredLevel})).map((function(e){return i.a.createElement(ge,{level:e})}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"Dungeon primary-dark"},this.getLevels())}}]),n}(i.a.Component),Ee=Object(u.b)((function(e){return{levels:e.dungeon.levels,exploredLevel:e.dungeon.exploredLevel}}))(ye),ke=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).formTable={},r.state={initialized:!1},r.componentDidMount=r.componentDidMount.bind(Object(m.a)(r)),r.loadFormTable=r.loadFormTable.bind(Object(m.a)(r)),r.getDetail=r.getDetail.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.loadFormTable(),this.setState({initialized:!0})}},{key:"loadFormTable",value:function(){for(var e={},t=0,n=Object.values(ne);t<n.length;t++){e[n[t]]=null}this.formTable=e,this.formTable.blank=i.a.createElement("div",{className:"BlankForm"},"detail type unknown"),this.formTable[ne.adventurers]=i.a.createElement(de,null),this.formTable[ne.adventurer]=i.a.createElement(he,null),this.formTable[ne.dungeon]=i.a.createElement(Ee,null),this.formTable[ne.adventurersPartial]=i.a.createElement(fe,null)}},{key:"getDetail",value:function(){return this.state.initialized?this.props.detailUpdate?(this.props.setDetailUpdate(!1),""):this.props.pcDetailMenu?void 0===this.formTable[this.props.pcDetailMenu]?this.formTable.blank:this.formTable[this.props.pcDetailMenu]:i.a.createElement("div",{className:"BlankForm"},"no details to display"):""}},{key:"render",value:function(){return i.a.createElement("div",{className:"Details primary-dark"},i.a.createElement(ie,null),this.getDetail())}}]),n}(i.a.Component),Se=Object(u.b)((function(e){return{pcDetailMenu:e.pcMenu.detail,detailUpdate:e.detail.update}}),(function(e){return{setDetailUpdate:function(t){return e({type:"SET_DETAIL_UPDATE",value:t})}}}))(ke),Ne=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"GameScreen flex-container primary-light"},i.a.createElement("div",{className:"CommerceColumn"},i.a.createElement(te,null),i.a.createElement(G,null),i.a.createElement(Y,null)),i.a.createElement(Se,null))}}]),n}(i.a.Component),Oe=Object(u.b)((function(e){return{storeName:e.storeState.name}}))(Ne),Te=(n(79),n(80),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"Title"},"VENDOR")}}]),n}(i.a.Component)),Ie=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={edited:!1},r.handleStart=r.handleStart.bind(Object(m.a)(r)),r.handleNameInput=r.handleNameInput.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleStart",value:function(){var e=this.props.name;e&&""!==e&&(Q.init({name:e}),this.props.setStarted(!0))}},{key:"handleNameInput",value:function(e){13===e.charCode&&this.handleStart(),this.props.edited||this.setState({edited:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"StartScreen primary-surface"},i.a.createElement(Te,null),i.a.createElement("div",{className:"NameInput"},i.a.createElement("div",{className:"nameInputGroup"},i.a.createElement("label",{htmlFor:"name",className:"NameLabel"},"Name: "),i.a.createElement("input",{id:"name",value:this.props.name,type:"text",onChange:function(t){return e.props.setStoreName(t.target.value)},onKeyPress:this.handleNameInput})),i.a.createElement("button",{onClick:this.handleStart,className:"StartButton"},"Start!")))}}]),n}(i.a.Component),Me=Object(u.b)((function(e){return{started:e.gameState.started,name:e.storeState.name,auth:e.auth}}),(function(e){return{setStoreName:function(t){return e({type:"SET_STORE_NAME",name:t})},setStarted:function(t){return e({type:"SET_GAME_STATE",value:t})}}}))(Ie),De=(n(81),{makeRequest:function(){var e=Object(M.a)(I.a.mark((function e(t,n){var r,a,i,o,s,u,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},a=Object(P.a)(n);try{for(a.s();!(i=a.n()).done;)o=Object(H.a)(i.value,2),s=o[0],u=o[1],r[s]=u}catch(l){a.e(l)}finally{a.f()}return r=JSON.stringify(r),c=fetch("/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:r}),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),we=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).handleClose=r.handleClose.bind(Object(m.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r.updateUser=r.updateUser.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"handleClose",value:function(){this.props.profileActive&&this.props.setProfileActive(!1)}},{key:"updateUser",value:I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.makeRequest("user",t);case 2:case"end":return e.stop()}}),e)}))},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData(e.target);this.updateUser(n).next().value.then((function(){t.props.fetchUser(),t.props.setProfileActive(!1)}))}},{key:"render",value:function(){var e="",t=!1,n=null;return console.log(this.props.auth),this.props.auth&&(e=this.props.auth.nickname,t=this.props.auth.import_nickname,n=this.props.auth.id),i.a.createElement("div",{className:"ProfileViewer primary-surface"},i.a.createElement("div",{className:"ProfileForm"},i.a.createElement("form",{action:"/profile",className:"input-fields-area",id:"ProfileForm",method:"POST",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"input-group"},i.a.createElement("label",{className:"item-label",htmlFor:"nickname"},"Nickname"),i.a.createElement("input",{type:"text",name:"nickname",id:"nickname",className:"input-text",placeholder:"nickname",maxLength:"40",defaultValue:e})),i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"checkbox",name:"import_nickname",id:"import_nickname",class:"input-checkbox",defaultChecked:t,value:!0}),i.a.createElement("label",{className:"item-label",htmlFor:"import_nickname"},"Import nickname as store name by default")),i.a.createElement("input",{type:"hidden",name:"id",value:n}),i.a.createElement("input",{type:"submit",value:"Update Profile",className:"button profile-submit"}))),i.a.createElement("div",{className:"CloseButton",onClick:this.handleClose},"X"))}}]),n}(i.a.Component),je=Object(u.b)((function(e){return{profileActive:e.profile.active,auth:e.auth}}),(function(e){return{setProfileActive:function(t){return e({type:"SET_PROFILE_ACTIVE",value:t})},fetchUser:function(){return e(B())}}}))(we),Le=(n(82),n(83),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"MobileStoreHeadbar"},i.a.createElement("h2",{className:"StoreName"},this.props.storeName),i.a.createElement("div",{className:"GoldDisplay"},i.a.createElement("div",{className:"StoreGold"},i.a.createElement("span",{className:"CoinSymbol",role:"img","aria-label":"coin"},i.a.createElement(S,null)," "),this.props.gold)))}}]),n}(i.a.Component)),Pe=Object(u.b)((function(e){return{storeName:e.storeState.name,gold:e.storeState.gold}}))(Le),_e=(n(84),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).componentDidMount=r.componentDidMount.bind(Object(m.a)(r)),r.handlePrevious=r.handlePrevious.bind(Object(m.a)(r)),r.handleNext=r.handleNext.bind(Object(m.a)(r)),r.handleDropdown=r.handleDropdown.bind(Object(m.a)(r)),r.handleScreenChange=r.handleScreenChange.bind(Object(m.a)(r)),r.getMobileDropdown=r.getMobileDropdown.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){ue.init()}},{key:"handlePrevious",value:function(){ue.previousScreen(),ue.updateScreen(),this.props.mobileDropdown&&this.props.setMobileDropdown(!1)}},{key:"handleNext",value:function(){ue.nextScreen(),ue.updateScreen(),this.props.mobileDropdown&&this.props.setMobileDropdown(!1)}},{key:"handleDropdown",value:function(){this.props.setMobileDropdown(!this.props.mobileDropdown)}},{key:"handleScreenChange",value:function(e){ue.setScreen(e),ue.updateScreen(),this.props.setMobileDropdown(!1)}},{key:"getMobileDropdown",value:function(){var e=this,t=ue.getScreens();return!!this.props.mobileDropdown&&i.a.createElement("div",{className:"MobileDropdown primary-medium"},i.a.createElement(te,null),t.map((function(t){return i.a.createElement("div",{className:"mobileDropdownOption",onClick:function(){return e.handleScreenChange(t)}},t)})))}},{key:"render",value:function(){var e=this.props.mobileScreen,t=ue.getAllScreens();return e===t.adventurersPartial&&(e=t.adventurers),i.a.createElement("div",{className:"MobileMenu primary-saturated"},i.a.createElement("span",{className:"previousScreen screenArrow",onClick:this.handlePrevious},"\u2190"),i.a.createElement("span",{className:"mobileTitle",onClick:this.handleDropdown},e),i.a.createElement("span",{className:"nextScreen screenArrow",onClick:this.handleNext},"\u2192"),this.getMobileDropdown())}}]),n}(i.a.Component)),Ce=Object(u.b)((function(e){return{mobileScreen:e.mobileMenu.screen,mobileDropdown:e.mobileMenu.dropdown,dungeonLevelExplored:e.dungeon.exploredLevel}}),(function(e){return{setMobileDropdown:function(t){return e({type:"SET_MOBILE_DROPDOWN",value:t})}}}))(_e),Ae=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).formTable={},r.state={currentScreen:"store",initialized:!1},r.componentDidMount=r.componentDidMount.bind(Object(m.a)(r)),r.loadFormTable=r.loadFormTable.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.loadFormTable(),this.setState({initialized:!0})}},{key:"loadFormTable",value:function(){for(var e=ue.getAllScreens(),t={},n=0,r=Object.values(e);n<r.length;n++){t[r[n]]=null}this.formTable=t,this.formTable.blank=i.a.createElement("div",{className:"BlankForm"},"detail type unknown"),this.formTable[e.store]=i.a.createElement(G,null),this.formTable[e.suppliers]=i.a.createElement("div",null,i.a.createElement(Pe,null),i.a.createElement(Y,null)),this.formTable[e.adventurers]=i.a.createElement(de,null),this.formTable[e.adventurer]=i.a.createElement(he,null),this.formTable[e.dungeon]=i.a.createElement(Ee,null),this.formTable[e.adventurersPartial]=i.a.createElement(fe,null)}},{key:"getCurrentScreen",value:function(){return this.state.initialized?this.props.detailUpdate?(this.props.setDetailUpdate(!1),""):this.props.mobileScreen?void 0===this.formTable[this.props.mobileScreen]?this.formTable.blank:this.formTable[this.props.mobileScreen]:i.a.createElement("div",{className:"BlankForm"},"no details to display"):""}},{key:"render",value:function(){return i.a.createElement("div",{className:"MobileGameScreen primary-dark"},i.a.createElement(Ce,null),this.getCurrentScreen())}}]),n}(i.a.Component),Be=Object(u.b)((function(e){return{mobileScreen:e.mobileMenu.screen,detailUpdate:e.detail.update}}),(function(e){return{setDetailUpdate:function(t){return e({type:"SET_DETAIL_UPDATE",value:t})}}}))(Ae),Fe=(n(85),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={mobileOpen:!1},r.handleProfileActive=r.handleProfileActive.bind(Object(m.a)(r)),r.getLoginContainer=r.getLoginContainer.bind(Object(m.a)(r)),r.renderProfileLink=r.renderProfileLink.bind(Object(m.a)(r)),r.renderLogin=r.renderLogin.bind(Object(m.a)(r)),r.renderEditorLink=r.renderEditorLink.bind(Object(m.a)(r)),r.handleFullscreen=r.handleFullscreen.bind(Object(m.a)(r)),r.getFullScreenControls=r.getFullScreenControls.bind(Object(m.a)(r)),r.handleMobileOpen=r.handleMobileOpen.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"handleProfileActive",value:function(){this.props.profileActive||this.props.setProfileActive(!0),this.handleMobileOpen()}},{key:"handleMobileOpen",value:function(){this.props.profileActive&&!this.state.mobileOpen||this.setState({mobileOpen:!this.state.mobileOpen})}},{key:"renderProfileLink",value:function(){switch(this.props.auth){case null:case!1:return"";default:return i.a.createElement("li",{key:"profile",class:"profileLink",onClick:this.handleProfileActive},"profile")}}},{key:"renderLogin",value:function(){switch(this.props.auth){case null:return;case!1:return i.a.createElement("li",{key:"login"},i.a.createElement("a",{href:"/auth/facebook",className:"facebookLogo"},i.a.createElement("span",null,"f")));default:return i.a.createElement("li",{key:"login"},i.a.createElement("a",{href:"/api/logout"},"logout"))}}},{key:"renderEditorLink",value:function(){switch(this.props.auth){case null:case!1:return!1;default:return!("owner"!==this.props.auth.type||!oe.getIsPc())&&i.a.createElement("li",{key:"editorLink"},i.a.createElement("a",{className:"EditorLink",href:"/editor"},"editor"))}}},{key:"getLoginContainer",value:function(){return this.props.isPc?i.a.createElement("ul",{className:"LoginContainer"},this.renderProfileLink(),this.renderEditorLink(),this.renderLogin()):i.a.createElement("div",{className:"hamburgerContainer",onClick:this.handleMobileOpen},i.a.createElement("div",{className:"hamburgerLine primary"}),i.a.createElement("div",{className:"hamburgerLine primary"}),i.a.createElement("div",{className:"hamburgerLine primary"}))}},{key:"getMobileMenu",value:function(){if(!this.props.isPc&&this.state.mobileOpen){var e={},t=2;return this.props.auth&&(t+=1),e.height="calc(".concat(2.4*t,"rem + ").concat(2*t*.8,"rem - 1px)"),this.props.isMobile&&(e.height="calc(".concat(1.8*t,"rem + ").concat(2*t*.8,"rem - 1px)")),i.a.createElement("div",{className:"mobileMenuContainer primary",onClick:this.handleMobileOpen},i.a.createElement("ul",{className:"LoginContainer mobileMenu primary-light",style:e},this.getFullScreenControls(),this.renderProfileLink(),this.renderLogin()))}}},{key:"handleFullscreen",value:function(){this.props.isFullscreen?oe.leaveFullScreen():oe.goFullScreen()}},{key:"getFullScreenControls",value:function(){return this.props.isFullscreen?i.a.createElement("li",{key:"exitFullscren",className:"ExitFullScreen screenLink",onClick:this.handleFullscreen},"\u256c"):i.a.createElement("li",{key:"goFullscreen",className:"Fullscreen screenLink",onClick:this.handleFullscreen},"[  ]")}},{key:"render",value:function(){return i.a.createElement("div",{className:"MenuBar primary-light"},i.a.createElement("span",{className:"MenuTitle"},i.a.createElement("a",{href:"/"},"VENDOR")),this.getLoginContainer(),this.getMobileMenu())}}]),n}(i.a.Component)),xe=Object(u.b)((function(e){return{auth:e.auth,profileActive:e.profile.active,isMobile:e.app.isMobile,isPc:e.app.isPc,isFullscreen:e.app.isFullscreen}}),(function(e){return{setProfileActive:function(t){return e({type:"SET_PROFILE_ACTIVE",value:t})}}}))(Fe),Re=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).getMainView=r.getMainView.bind(Object(m.a)(r)),r.getProfileViewer=r.getProfileViewer.bind(Object(m.a)(r)),r.componentDidMount=r.componentDidMount.bind(Object(m.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchUser(),oe.init()}},{key:"getMainView",value:function(){return this.props.started?this.props.isPc?i.a.createElement(Oe,null):i.a.createElement(Be,null):i.a.createElement(Me,null)}},{key:"getProfileViewer",value:function(){if(this.props.profileActive)return i.a.createElement(je,null)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App",ref:function(t){e.container=t}},i.a.createElement(xe,null),this.getMainView(),this.getProfileViewer())}}]),n}(i.a.Component),Ue=Object(u.b)((function(e){return{started:e.gameState.started,profileActive:e.profile.active,isMobile:e.app.isMobile,isPc:e.app.isPc}}),r)(Re),Ge={day:1},He={started:!1,storeUpdate:!1},Ve={name:"",gold:0,filterActive:!1,filter:"all",needsUpdate:!1,inventory:[],inventoryCount:0,mobileDetail:null,mobileItemDetail:null},qe={suppliers:null,count:0,initialized:!1},We={ready:!1,spawned:!1},ze={active:!1},Ye={isFullscreen:!1,isPc:!0,isMobile:!1},Je={screen:"store",dropdown:!1},Ze={adventurers:null,partialAdventurers:null},Xe={detail:ne.adventurers,dropdown:!1},Ke={id:null,update:!1},$e={levels:null,exploredLevel:0,adventurers:null},Qe=Object(c.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER":return t.payload||!1;default:return e}},days:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DAY":return Object(f.a)(Object(f.a)({},e),{},{day:t.day});default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GAME_STATE":return Object(f.a)(Object(f.a)({},e),{},{started:t.value});case"SET_UPDATES":var n=t.payload,r=n.storeUpdate;return Object(f.a)(Object(f.a)({},e),{},{storeUpdate:r});case"SET_STORE_UPDATE":return Object(f.a)(Object(f.a)({},e),{},{storeUpdate:t.value});default:return e}},storeState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STORE_NAME":return Object(f.a)(Object(f.a)({},e),{},{name:t.name});case"SET_STORE_GOLD":return Object(f.a)(Object(f.a)({},e),{},{gold:t.amount});case"SET_STORE_INVENTORY":var n=t.inventory,r=e.inventoryCount;return Array.isArray(n)&&(r=n.length),Object(f.a)(Object(f.a)({},e),{},{inventory:n,inventoryCount:r});case"SET_STORE_FILTER_ACTIVE":return Object(f.a)(Object(f.a)({},e),{},{filterActive:t.value});case"SET_STORE_FILTER":return Object(f.a)(Object(f.a)({},e),{},{filter:t.filter});case"SET_STORE_UPDATE_STATUS":var a=!e.needsUpdate;return Object(f.a)(Object(f.a)({},e),{},{needsUpdate:a});case"SET_STORE_MOBILE_DETAIL":return Object(f.a)(Object(f.a)({},e),{},{mobileDetail:t.detail});case"SET_STORE_MOBILE_DETAIL_ITEM":return Object(f.a)(Object(f.a)({},e),{},{mobileItemDetail:t.itemDetail});default:return e}},suppliers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SUPPLIERS":var n=0;return Array.isArray(t.payload)&&(n=t.payload.length),Object(f.a)(Object(f.a)({},e),{},{suppliers:t.payload,count:n});case"SET_SUPPLIERS_INITIALIZED":return Object(f.a)(Object(f.a)({},e),{},{initialized:t.value});default:return e}},supplies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SUPPLY_READY":return Object(f.a)(Object(f.a)({},e),{},{ready:t.value});case"SET_SUPPLY_SPAWNED":return Object(f.a)(Object(f.a)({},e),{},{spawned:t.value});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PROFILE_ACTIVE":return Object(f.a)(Object(f.a)({},e),{},{active:t.value});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_FULLSCREEN":return Object(f.a)(Object(f.a)({},e),{},{isFullscreen:t.value});case"SET_IS_PC":return Object(f.a)(Object(f.a)({},e),{},{isPc:t.value});case"SET_IS_MOBILE":return Object(f.a)(Object(f.a)({},e),{},{isMobile:t.value});default:return e}},mobileMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MOBILE_SCREEN":return Object(f.a)(Object(f.a)({},e),{},{screen:t.screen});case"SET_MOBILE_DROPDOWN":return Object(f.a)(Object(f.a)({},e),{},{dropdown:t.value});default:return e}},adventurers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ADVENTURERS":return Object(f.a)(Object(f.a)({},e),{},{adventurers:t.payload});case"SET_PARTIAL_ADVENTURERS":return Object(f.a)(Object(f.a)({},e),{},{partialAdventurers:t.payload});default:return e}},pcMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PC_DETAIL":return Object(f.a)(Object(f.a)({},e),{},{detail:t.detail});case"SET_PC_DROPDOWN":return Object(f.a)(Object(f.a)({},e),{},{dropdown:t.value});default:return e}},detail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DETAIL_ID":return Object(f.a)(Object(f.a)({},e),{},{id:t.id});case"SET_DETAIL_UPDATE":return Object(f.a)(Object(f.a)({},e),{},{update:t.value});default:return e}},dungeon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DUNGEON_LEVELS":return Object(f.a)(Object(f.a)({},e),{},{levels:t.payload});case"SET_DUNGEON_LEVEL_EXPLORED":return Object(f.a)(Object(f.a)({},e),{},{exploredLevel:t.level});case"SET_DUNGEON_ADVENTURERS":return Object(f.a)(Object(f.a)({},e),{},{adventurers:t.adventurers});default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var et=Object(c.d)(Qe,{},Object(c.a)(l.a));s.a.render(i.a.createElement(u.a,{store:et},i.a.createElement(i.a.StrictMode,null,i.a.createElement(Ue,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[31,1,2]]]);
//# sourceMappingURL=main.e3fdee42.chunk.js.map