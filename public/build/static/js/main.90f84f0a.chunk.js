(this["webpackJsonpvendor-app"]=this["webpackJsonpvendor-app"]||[]).push([[0],{31:function(e,t,n){e.exports=n(81)},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Re}));var a={};n.r(a),n.d(a,"fetchUser",(function(){return F})),n.d(a,"fetchGold",(function(){return L})),n.d(a,"fetchDay",(function(){return U})),n.d(a,"fetchSuppliers",(function(){return R}));var r=n(0),i=n.n(r),o=n(12),s=n.n(o),l=n(8),c=n(11),u=n(29),p=n(3),m=n(4),d=n(1),h=n(6),v=n(5),f=(n(42),n(43),n(44),n(45),n(2)),b={potion:"potion",weapon:"weapon",armor:"armor"},y=["healing"],E=function(){var e=b,t=y,n=[],a={},r={},i=0,o=function(e){var t=e.type,n=e.name,o=e.value,s=e.prototypeId;this.type=t,this.name=n,this.value=o,this.prototypeId=s,this.id=i,a[i]=t,r[i]=s,i++},s=function(e){var t=e.type,n=e.level;this.type=t,this.level=n},l=function(e){var t=e.damage,n=e.level;this.damage=t,this.level=n},c=function(e){var t=e.armor,n=e.level;this.armor=t,this.level=n};return{createItem:function(t){var a=t.type,r=t.name,i=t.value,u=t.itemPayload,p=t.prototypeId;if(e[a]){var m=new o({type:a,name:r,value:i,prototypeId:p});switch(m.type){case e.potion:var d=u.type;if(!d)return void console.log("attempted to create invalid potion type");var h=u.level;if(!h)return void console.log("attempted to create a potion with an invalid level");var v={type:d,level:h};m[m.type]=new s(v);break;case e.weapon:var f=u.damage;if(!f)return void console.log("attempted to create a weapon without damage");var b=u.level;if(!b)return void console.log("attempted to create a weapon with an invalid level");var y={damage:f,level:b};m[m.type]=new l(y);break;case e.armor:var E=u.armor;if(!E)return void console.log("attempted to make a new armor without an armor value");var S=u.level;if(!S)return void console.log("attempted to make a new armor without a level value");var O={armor:E,level:S};m[m.type]=new c(O)}return n.push(m),m.id}console.log("invalid item type passed to items.createItem()")},getItem:function(e){var t=n.find((function(t){return t.id===e}));if(t)return t;console.log("attempted to retrieve invalid item.")},getItemType:function(e){return null!==a[e]&&a[e]},getItemPrototypeId:function(e){return null!==r[e]&&r[e]},getItemTypeIndex:function(){return a},createTestPotion:function(n){var a=new o({type:e.potion,name:"Healing Potion",value:60});return a[e.potion]=new s({type:t.healing,level:n}),a},getItemTypes:function(){return e}}}(),S=function(){var e=[],t=function(){var t=[];return e.forEach((function(e){var n=E.getItem(e.itemId);t.push(Object(f.a)(Object(f.a)({},n),{},{markup:e.markup}))})),t};return{addItem:function(t){if(null===t||void 0===t)return!1;var n={itemId:t,markup:150};e.push(n)},getStoreInventory:function(){return e},updateStoreInventory:function(){!function(){var t={type:"SET_STORE_INVENTORY",inventory:e};Re.dispatch(t)}()},getComposedInventory:function(){return t()},getFilteredInventory:function(e){return e&&"all"!==e.toLowerCase()?(n=e,t().filter((function(e){return e.type===n}))):t();var n},getFilteredStoreItems:function(t){return n=t,e.filter((function(e){return S.getItemType(e.itemId)===n}));var n},markupFilteredStoreItems:function(t){var n,a,r=t.filter,i=t.markup;n=r,a=i,e.forEach((function(e){"all"!==n.toLowerCase()&&E.getItemType(e.itemId)!==n||(e.markup+=a,e.markup>4e3&&(e.markup=4e3),e.markup<0&&(e.markup=0))}))},markupStoreItem:function(t){!function(t,n){e.find((function(e){return e.itemId===t})).markup+=n}(t.id,t.markup)},markupPrototypes:function(t){!function(t,n){e.forEach((function(e){E.getItemPrototypeId(e.itemId)===t&&(e.markup+=n),e.markup>4e3&&(e.markup=4e3),e.markup<0&&(e.markup=0)}))}(t.prototypeId,t.markup)}}}(),O=S,g=(n(46),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={markup:50},a.timer=void 0,a.mobileMultiplier=2,a.delay=200,a.markupIntensity=10,a.valence=1,a.increaseMarkup=a.increaseMarkup.bind(Object(d.a)(a)),a.repeat=a.repeat.bind(Object(d.a)(a)),a.onMouseDown=a.onMouseDown.bind(Object(d.a)(a)),a.onMouseUp=a.onMouseUp.bind(Object(d.a)(a)),a.markupOut=a.markupOut.bind(Object(d.a)(a)),a.handleMobileFocus=a.handleMobileFocus.bind(Object(d.a)(a)),a.handleOneIncrement=a.handleOneIncrement.bind(Object(d.a)(a)),a.handlePrototypeIncrement=a.handlePrototypeIncrement.bind(Object(d.a)(a)),a.getInventoryItems=a.getInventoryItems.bind(Object(d.a)(a)),a.getIncrementOneButtons=a.getIncrementOneButtons.bind(Object(d.a)(a)),a.getIncrementAllButtons=a.getIncrementAllButtons.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=JSON.parse(JSON.stringify(O.getStoreInventory()));this.props.setInventory(e)}},{key:"increaseMarkup",value:function(){this.setState({markup:this.state.markup+this.markupIntensity})}},{key:"onMouseDown",value:function(e){var t=e.e,n=null,a=null;null!==e.id&&(n=e.id),null!==e.prototypeId&&(a=e.prototypeId);var r=t.target.classList;(r.contains("decreaseOne")||r.contains("minusOne")||r.contains("decreaseProto")||r.contains("minusProto"))&&(this.valence=-1),(r.contains("increaseOne")||r.contains("plusOne")||r.contains("increaseProto")||r.contains("plusProto"))&&(this.valence=1);var i={id:n,prototypeId:a};this.repeat(i)}},{key:"repeat",value:function(e){var t=this,n=e.id,a=e.prototypeId,r={id:n,prototypeId:a};this.increaseMarkup(),void 0!==n&&this.handleOneIncrement(n),void 0!==a&&this.handlePrototypeIncrement(a);var i=this.delay*this.mobileMultiplier;this.mobileMultiplier>1&&(this.mobileMultiplier=1),this.timer=setTimeout((function(){return t.repeat(r)}),i),this.markupIntensity+=5}},{key:"onMouseUp",value:function(){clearTimeout(this.timer),this.markupIntensity=10,this.valence=1,this.mobileMultiplier=2,this.markupOut()}},{key:"markupOut",value:function(){this.setState({markup:50})}},{key:"handleOneIncrement",value:function(e){var t=this.valence,n={id:e,markup:this.state.markup*t};O.markupStoreItem(n),this.props.toggleStoreUpdateStatus()}},{key:"handlePrototypeIncrement",value:function(e){var t=this.valence,n={prototypeId:e,markup:this.state.markup*t};O.markupPrototypes(n),this.props.toggleStoreUpdateStatus()}},{key:"getIncrementOneButtons",value:function(e){var t=this;return this.props.isPc?i.a.createElement("div",{className:"incrementButtons incrementOneSet"},i.a.createElement("div",{className:"decreaseOne incrementButton button",onMouseDown:function(n){return t.onMouseDown({id:e,e:n})},onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minusOne"},"-")),i.a.createElement("div",{className:"increaseOne incrementButton button",onMouseDown:function(n){return t.onMouseDown({id:e,e:n})},onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plusOne"},"+"))):i.a.createElement("div",{className:"incrementButtons incrementOneSet"},i.a.createElement("div",{className:"decreaseOne incrementButton button",onTouchStart:function(n){return t.onMouseDown({id:e,e:n})},onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minusOne"},"-")),i.a.createElement("div",{className:"increaseOne incrementButton button",onTouchStart:function(n){return t.onMouseDown({id:e,e:n})},onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plusOne"},"+")))}},{key:"getIncrementAllButtons",value:function(e){var t=this;return this.props.isPc?i.a.createElement("div",{className:"incrementButtons incrementAllSet"},i.a.createElement("div",{className:"decreaseProto incrementButtonWide button",onMouseDown:function(n){return t.onMouseDown({prototypeId:e,e:n})},onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minusProto"},"--")),i.a.createElement("div",{className:"increaseProto incrementButtonWide button",onMouseDown:function(n){return t.onMouseDown({prototypeId:e,e:n})},onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plusProto"},"++"))):i.a.createElement("div",{className:"incrementButtons incrementAllSet"},i.a.createElement("div",{className:"decreaseProto incrementButtonWide button",onTouchStart:function(n){return t.onMouseDown({prototypeId:e,e:n})},onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minusProto"},"--")),i.a.createElement("div",{className:"increaseProto incrementButtonWide button",onTouchStart:function(n){return t.onMouseDown({prototypeId:e,e:n})},onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plusProto"},"++")))}},{key:"handleMobileFocus",value:function(e){var t;this.props.mobileItemDetail&&(t=this.props.mobileItemDetail),this.props.mobileItemDetail&&this.props.mobileDetail&&t.id===e.id?(this.props.setStoreMobileDetail(!1),this.props.setStoreMobileDetailItem(null),window.inventory=void 0):(this.props.setStoreMobileDetail(!0),this.props.setStoreMobileDetailItem(e),window.inventory=this)}},{key:"getInventoryItems",value:function(){var e,t=this;return this.props.inventory&&this.props.inventory.length>0?(e=this.props.filterActive&&"all"!==this.props.storeFilter?O.getFilteredInventory(this.props.storeFilter):O.getComposedInventory(),i.a.createElement("div",null,e.map((function(e){var n=Math.floor(e.value*(1+e.markup/1e3)),a="InventoryItem itemBackground";return t.props.mobileDetail&&e.id===t.props.mobileItemDetail.id&&(a+=" activeMobileItem"),i.a.createElement("div",{className:a,key:e.id,onTouchStart:function(){return t.handleMobileFocus(e)}},i.a.createElement("span",{className:"InventoryItemName"},e.name),t.props.isPc?t.getIncrementOneButtons(e.id):"",t.props.isPc?t.getIncrementAllButtons(e.prototypeId):"",i.a.createElement("div",{className:"ItemValueGroup"},i.a.createElement("span",{className:"InventoryItemValue"},i.a.createElement("span",{className:"CoinSymbol"},"\u2689 "),n)))})))):i.a.createElement("div",null)}},{key:"render",value:function(){return i.a.createElement("div",{className:"StoreInventory light"},this.getInventoryItems())}}]),n}(i.a.Component)),k=Object(l.b)((function(e){return{inventory:e.storeState.inventory,inventoryCount:e.storeState.inventoryCount,filterActive:e.storeState.filterActive,storeFilter:e.storeState.filter,storeNeedsUpdate:e.storeState.needsUpdate,isMobile:e.app.isMobile,isPc:e.app.isPc,mobileDetail:e.storeState.mobileDetail,mobileItemDetail:e.storeState.mobileItemDetail}}),(function(e){return{setInventory:function(t){return e({type:"SET_STORE_INVENTORY",inventory:t})},toggleStoreUpdateStatus:function(){return e({type:"SET_STORE_UPDATE_STATUS"})},setStoreMobileDetail:function(t){return e({type:"SET_STORE_MOBILE_DETAIL",detail:t})},setStoreMobileDetailItem:function(t){return e({type:"SET_STORE_MOBILE_DETAIL_ITEM",itemDetail:t})}}}))(g),I=n(7),j=n.n(I),M=n(9),D=n(30),N=n.n(D),w=function(){var e="",t=1e3;return{chargeGold:function(e){if(t<e)return console.log("attempted to charge more gold than vendor owns"),!1;t-=e},getName:function(){return e},setName:function(t){e=t},getStartingGold:function(){return 1e3},getGold:function(){return t},setGold:function(e){t=e},updateGold:function(){!function(){var e={type:"SET_STORE_GOLD",amount:t};Re.dispatch(e)}()}}}(),T=function(){var e=1;return{getDay:function(){return e},setDay:function(t){"number"===typeof t?e=t:console.log("trying to set day to a non number value!")},resetDay:function(){e=1}}}(),P=n(13),C=function(){var e=[],t={},n=1,a=Object.values(b),r=a.length,i=0,o=function(){var e=Object(M.a)(j.a.mark((function e(){var t,r,o,s,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n){e.next=3;break}return e.abrupt("return");case 3:return"armor"!==(r=a[i])&&(r+="s"),1,o=t,s="/".concat(r,"-in-level-range?min-level=").concat(1,"&max-level=").concat(o),e.prev=8,e.next=11,fetch(s);case 11:l=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.log(e.t0);case 17:return l&&(l=l.json()),e.abrupt("return",l);case 19:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(){return e.apply(this,arguments)}}(),s=function e(){var n;i>=r||o().then((function(o){return n=o,null===t[a[i]]&&(t[a[i]]=[]),t[a[i]].push(n),++i===r&&function(e){var t={type:"SET_SUPPLY_SPAWNED",value:e};Re.dispatch(t)}(!0),e(),!0})).catch((function(e){return console.log(e)}))},l=function(){var n=Math.floor(Math.random()*a.length),r=a[n],i=t[r],o=i[Math.floor(Math.random()*i.length)];Array.isArray(o)&&(o=o[0]);var s={};switch(s.level=o.level,o.item.type){case b.potion:s.type=o.type;break;case b.weapon:s.damage=o.damage;break;case b.armor:s.armor=o.armor}var l={};l.itemPayload=s,l.type=o.item.type,l.name=o.item.name,l.value=o.item.value,l.prototypeId=o.item.id;var c=E.createItem(l);e.push(c)};return{getSupplies:function(){return e},fillSupplies:function(){for(var e=0;e<10;e++)l();!function(e){var t={type:"SET_SUPPLY_READY",value:e};Re.dispatch(t)}(!0)},fillSupplyPool:function(){i=0,a.forEach((function(e){null==t[e]&&(t[e]=[]),t[e].length=0})),s()},depleteSupply:function(t){var n=e.indexOf(t);if(n>=0)return e.splice(n,1)},setSupplyLevel:function(e){n=e}}}(),_={fetchRoute:function(){var e=Object(M.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/".concat(t));case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:return n&&(n=n.json()),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},A=function(){var e=[],t=0,n=function(e){var n=e.name,a=e.offerings;this.name=n,this.offerings=a,this.inventory=[],this.id=t,t++};n.prototype.rankFavorites=function(){for(var e=[],t=this.offerings.length,n=0;n<t;n++)e.push(this.offerings[n]);e.sort((function(e,t){return e.markup-t.markup})),this.rankedOfferings=e},n.prototype.sellItem=function(e){var t=e.id,n=e.price,a=this.inventory.indexOf(t);return!(!a&&0!==a)&&(this.inventory.splice(a,1),this.gold+=n,!0)};var a=function(e){var t={type:"SET_SUPPLIERS",payload:e};Re.dispatch(t)},r=function(){var e=Object(M.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.fetchRoute("suppliers"),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:case"end":return e.stop()}}),e)}));return{initializeSuppliers:function(){var t=Object(M.a)(j.a.mark((function t(r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i().next().value.then((function(t){if(t){for(var i=t;e.length<r&&i.length>0;){var o=Math.floor(Math.random()*i.length),s=i.splice(o,1),l={name:(s=s[0]).name,offerings:s.offerings},c=new n(l);c.gold=1e3,e.push(c)}return e.forEach((function(e){return e.rankFavorites()})),a(e),e}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getSuppliers:function(){return e},takeSupplierTurn:function(){!function(){var t=JSON.parse(JSON.stringify(C.getSupplies())),n=[],a=[];t.forEach((function(e){var t=E.getItem(e);n.push(t.type),a.push(t.value)}));var r=0,i=e.length;t.forEach((function(t,o){for(var s=[],l=0;l<i;l++){var c=r+l;c>=i&&(c-=i),s.push(c)}var u=!1;s.forEach((function(s){var l,c=e[s].rankedOfferings,p=Object(P.a)(c);try{for(p.s();!(l=p.n()).done;){if(l.value.type===n[o]&&!u&&e[s].gold>=a[o]){null===e[s].inventory&&(e[s].inventory=[]);var m=C.depleteSupply(t);Array.isArray(m)&&(m=m[0]),e[s].gold-=a[o],e[s].inventory.push(m),u=!0,(r=s+1)>i&&(r=0)}}}catch(d){p.e(d)}finally{p.f()}}))}))}(),a(e),function(e){var t={type:"SET_SUPPLY_READY",value:e};Re.dispatch(t)}(!1)},sellItem:function(t){var n=t.id,a=t.itemId,r=t.price,i=e.find((function(e){return e.id===n}));if(!i)return!1;var o={id:a,price:r};return!!i.sellItem(o)},updateSuppliers:function(){a(e)}}}(),F=function(){return function(){var e=Object(M.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/current_user");case 2:n=e.sent,t({type:"FETCH_USER",payload:n.data}),n.data&&n.data.import_nickname&&t({type:"SET_STORE_NAME",name:n.data.nickname});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){return function(){var e=Object(M.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getGold();case 2:n=e.sent,t({type:"SET_STORE_GOLD",amount:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=function(){return function(){var e=Object(M.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getDay();case 2:n=e.sent,t({type:"SET_DAY",day:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=function(){return function(){var e=Object(M.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getSuppliers();case 2:n=e.sent,t({type:"SET_SUPPLIERS",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={markup:50},a.timer=void 0,a.delay=200,a.mobileMultiplier=2,a.markupIntensity=10,a.valence=1,a.increaseMarkup=a.increaseMarkup.bind(Object(d.a)(a)),a.repeat=a.repeat.bind(Object(d.a)(a)),a.onMouseDown=a.onMouseDown.bind(Object(d.a)(a)),a.onMouseUp=a.onMouseUp.bind(Object(d.a)(a)),a.markupOut=a.markupOut.bind(Object(d.a)(a)),a.getMobileDetail=a.getMobileDetail.bind(Object(d.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(d.a)(a)),a.toggleFilter=a.toggleFilter.bind(Object(d.a)(a)),a.getFilter=a.getFilter.bind(Object(d.a)(a)),a.handleFilter=a.handleFilter.bind(Object(d.a)(a)),a.getIncrementButtons=a.getIncrementButtons.bind(Object(d.a)(a)),a.handleIncrease=a.handleIncrease.bind(Object(d.a)(a)),a.handleDecrease=a.handleDecrease.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchGold()}},{key:"handleFilter",value:function(e){var t=e.target.value;this.props.setStoreFilter(t)}},{key:"increaseMarkup",value:function(){this.setState({markup:this.state.markup+this.markupIntensity})}},{key:"onMouseDown",value:function(e){var t=e.target;(t.classList.contains("decreaseAll")||t.classList.contains("minus"))&&(this.valence=-1),t.classList.contains("increaseAll")&&(this.valence=1),this.repeat()}},{key:"repeat",value:function(){this.increaseMarkup(),-1===this.valence&&this.handleDecrease(),1===this.valence&&this.handleIncrease();var e=this.delay;this.props.pc||(e*=this.mobileMultiplier),this.mobileMultiplier>1&&(this.mobileMultiplier=1),this.timer=setTimeout(this.repeat,e),this.markupIntensity+=5}},{key:"onMouseUp",value:function(){clearTimeout(this.timer),this.markupIntensity=10,this.valence=1,this.mobileMultiplier=2,this.markupOut()}},{key:"markupOut",value:function(){this.setState({markup:50})}},{key:"handleIncrease",value:function(){var e={filter:this.props.storeFilter,markup:this.state.markup};O.markupFilteredStoreItems(e),O.updateStoreInventory(),this.props.toggleStoreUpdateStatus()}},{key:"handleDecrease",value:function(){var e={filter:this.props.storeFilter,markup:-1*this.state.markup};O.markupFilteredStoreItems(e),O.updateStoreInventory(),this.props.toggleStoreUpdateStatus()}},{key:"getIncrementButtons",value:function(){return this.props.filterActive?this.props.isPc?i.a.createElement("div",{className:"incrementButtons"},i.a.createElement("div",{className:"decreaseAll incrementButton button",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minus"},"-")),i.a.createElement("div",{className:"increaseAll incrementButton button",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plus"},"+"))):i.a.createElement("div",{className:"incrementButtons"},i.a.createElement("div",{className:"decreaseAll incrementButton button",onTouchStart:this.onMouseDown,onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon minus"},"-")),i.a.createElement("div",{className:"increaseAll incrementButton button",onTouchStart:this.onMouseDown,onTouchEnd:this.onMouseUp},i.a.createElement("span",{className:"incrementIcon plus"},"+"))):""}},{key:"getFilter",value:function(){if(!this.props.filterActive)return"";var e=Object.values(b);return i.a.createElement("select",{className:"StoreItemTypeFilter",defaultValue:this.props.storeFilter,onChange:this.handleFilter},i.a.createElement("option",{value:"all"},"all"),e.map((function(e){return i.a.createElement("option",{value:e},e)})))}},{key:"toggleFilter",value:function(){var e=!this.props.filterActive;e&&this.props.mobileDetail&&window.inventory.handleMobileFocus(this.props.mobileItemDetail);this.props.setStoreFilterActive(e)}},{key:"getMobileDetail",value:function(){if(this.props.isPc)return"";if(this.props.filterActive&&!this.props.mobileDetail)return i.a.createElement("div",{className:"MobileDetailContainer mobileDetailActive"},this.getIncrementButtons(),this.getFilter());if(this.props.mobileDetail){var e=window.inventory;return i.a.createElement("div",{className:"MobileDetailContainer mobileDetailActive"},i.a.createElement("div",{className:"itemDetailName"},this.props.mobileItemDetail.name),e.getIncrementOneButtons(this.props.mobileItemDetail.id),e.getIncrementAllButtons(this.props.mobileItemDetail.prototypeId))}return i.a.createElement("div",{className:"MobileDetailContainer"})}},{key:"render",value:function(){return i.a.createElement("div",{className:"Store"},i.a.createElement("div",{className:"StoreMenuBar darkgrey"},i.a.createElement("h2",{className:"StoreName"},this.props.storeName),i.a.createElement("div",{className:"FilterGroup"},this.props.isPc?this.getIncrementButtons():"",this.props.isPc?this.getFilter():""),i.a.createElement("span",{className:"Inspect",role:"img","aria-label":"inspect",onClick:this.toggleFilter},"\ud83d\udd0d "),i.a.createElement("div",{className:"GoldDisplay"},i.a.createElement("div",{className:"StoreGold"},i.a.createElement("span",{className:"CoinSymbol",role:"img","aria-label":"coin"},"\u2689 "),this.props.gold))),i.a.createElement(k,null),this.getMobileDetail())}}]),n}(i.a.Component),B=Object(l.b)((function(e){return{storeName:e.storeState.name,gold:e.storeState.gold,filterActive:e.storeState.filterActive,storeFilter:e.storeState.filter,storeNeedsUpdate:e.storeState.needsUpdate,isMobile:e.app.isMobile,isPc:e.app.isPc,mobileDetail:e.storeState.mobileDetail,mobileItemDetail:e.storeState.mobileItemDetail}}),(function(e){return{setStoreGold:function(t){return e({type:"SET_STORE_GOLD",amount:t})},fetchGold:function(){return e(L())},setStoreFilter:function(t){return e({type:"SET_STORE_FILTER",filter:t})},setStoreFilterActive:function(t){return e({type:"SET_STORE_FILTER_ACTIVE",value:t})},toggleStoreUpdateStatus:function(){return e({type:"SET_STORE_UPDATE_STATUS"})}}}))(x),G=(n(66),n(14)),V=(n(67),n(68),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"SupplierBuyButton button"},i.a.createElement("div",{className:"supplierBuyButtonIcon"},"buy"))}}]),n}(i.a.Component)),z=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).getSuppllierInventory=a.getSuppllierInventory.bind(Object(d.a)(a)),a.handlePurchase=a.handlePurchase.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"handlePurchase",value:function(e){var t=e.ids,n=e.price;if(!(n>this.props.storeGold)){var a=t[0],r={id:this.props.supplier.id,itemId:a,price:n};A.sellItem(r)&&(w.chargeGold(n),O.addItem(a),w.updateGold(),O.updateStoreInventory(),A.updateSuppliers())}}},{key:"getSuppllierInventory",value:function(){var e=this;if(!this.props.initialized)return"";var t=[];this.props.supplier.inventory.forEach((function(e){var n=E.getItem(e);t.push(n)}));var n={},a={},r={},o={};t.forEach((function(e){n[e.name]?(n[e.name]+=1,o[e.name].push(e.id)):(n[e.name]=1,a[e.name]=e.value,r[e.name]=e.type,o[e.name]=[e.id])}));for(var s=[],l=0,c=Object.entries(n);l<c.length;l++){var u=Object(G.a)(c[l],2),p=u[0],m={name:p,count:u[1],type:r[p],value:a[p],ids:o[p]};s.push(m)}return s.sort((function(e,t){var n=e.name.toUpperCase(),a=t.name.toUpperCase();return n<a?-1:n>a?1:0})),s.map((function(t){var n=e.props.supplier.offerings,a=n.findIndex((function(e){return e.type===t.type})),r=t.value;return-1!==a&&(r*=1+n[a].markup/1e3,r=Math.floor(r)),i.a.createElement("div",{className:"SupplierInventoryItem itemBackground",key:t.id},i.a.createElement("span",{className:"SupplierInventoryItemName"},t.name," (",t.count,")"),i.a.createElement("div",{className:"SupplierItemsValueGroup"},i.a.createElement("span",{className:"CoinSymbol"},"\u2689 "),i.a.createElement("span",{className:"InventoryItemValue"},r)),i.a.createElement("div",{className:"BuyButtonContainer",onClick:function(){return e.handlePurchase({ids:t.ids,price:r})}},i.a.createElement(V,null)))}))}},{key:"render",value:function(){var e="Supplier";return this.props.isMobile&&(e+=" mobileSupplier"),i.a.createElement("div",{className:e},i.a.createElement("div",{className:"SupplierName"},this.props.supplier.name,i.a.createElement("div",{className:"SupplierValueGroup"},i.a.createElement("span",{className:"CoinSymbol"},"\u2689 "),i.a.createElement("span",{className:"InventoryItemValue"},this.props.supplier.gold))),i.a.createElement("div",{className:"supplierInventory"},this.getSuppllierInventory()))}}]),n}(i.a.Component),q=Object(l.b)((function(e){return{supplyReady:e.supplies.ready,storeGold:e.storeState.gold,isMobile:e.app.isMobile}}))(z),W=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).getSuppliers=a.getSuppliers.bind(Object(d.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(d.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(d.a)(a)),a.updateSuppliers=a.updateSuppliers.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"updateSuppliers",value:function(){Array.isArray(this.props.suppliers)&&this.props.supplySpawned&&(this.props.supplyReady||C.fillSupplies()),Array.isArray(this.props.suppliers)&&this.props.supplyReady&&(this.props.suppliersInitialized||(A.takeSupplierTurn(),this.props.setSuppliersInitialized(!0)))}},{key:"componentDidMount",value:function(){this.updateSuppliers()}},{key:"componentDidUpdate",value:function(){this.updateSuppliers()}},{key:"getSuppliers",value:function(){var e=this,t="suppliersContainer",n="spacer";this.props.isPc||(t+=" nonPcContainer",t+=" mobileContainer",n+=" mobileSpacer");var a=this.props.suppliers;if(Array.isArray(a)){var r=a.map((function(t){return i.a.createElement(q,{supplier:t,initialized:e.props.suppliersInitialized})}));return i.a.createElement("div",{className:t,ref:function(t){e.container=t}},r,i.a.createElement("div",{className:n}))}return"no suppliers to render"}},{key:"render",value:function(){var e="Suppliers";return this.props.isPc||(e+=" mobileSuppliers"),i.a.createElement("div",{className:e},this.getSuppliers())}}]),n}(i.a.Component),Y=Object(l.b)((function(e){return{suppliers:e.suppliers.suppliers,supplyReady:e.supplies.ready,supplySpawned:e.supplies.spawned,isPc:e.app.isPc,isMobile:e.app.isMobile,suppliersInitialized:e.suppliers.initialized}}),(function(e){return{setSuppliersInitialized:function(t){return e({type:"SET_SUPPLIERS_INITIALIZED",value:t})}}}))(W),J=(n(69),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleNextDay=a.handleNextDay.bind(Object(d.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchDay()}},{key:"handleNextDay",value:function(){var e=this.props.day;T.setDay(e+1),this.props.mobileDropdown&&this.props.setMobileDropdown(!1),this.props.fetchDay()}},{key:"render",value:function(){return i.a.createElement("div",{className:"Days"},i.a.createElement("div",{className:"DayTitle"},"Day: ",this.props.day),i.a.createElement("div",{className:"nextDay button",onClick:this.handleNextDay},"Finish Day"))}}]),n}(i.a.Component)),H=Object(l.b)((function(e){return{day:e.days.day,mobileDropdown:e.mobileMenu.dropdown}}),(function(e){return{fetchDay:function(){return e(U())},setMobileDropdown:function(t){return e({type:"SET_MOBILE_DROPDOWN",value:t})}}}))(J),Z=(n(70),n(71),{adventurers:"adventurers"}),K=function(){var e="",t=0,n=[Z.adventurers],a={};return{init:function(){e=n[0],t=0,n.forEach((function(e,t){a[e]=t}))},getCurrentMenu:function(){return e},nextMenu:function(){++t>=n.length&&(t=0),e=n[t]},previousMenu:function(){--t<0&&(t=n.length-1),e=n[t]},getMenus:function(){return n},setmenu:function(r){var i=a[r];return null!==i&&(t=i,e=n[i],!0)},updateMenu:function(){!function(){var t={type:"SET_PC_DETAIL",detail:e};Re.dispatch(t)}()}}}(),X=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).componentDidMount=a.componentDidMount.bind(Object(d.a)(a)),a.handlePrevious=a.handlePrevious.bind(Object(d.a)(a)),a.handleNext=a.handleNext.bind(Object(d.a)(a)),a.handleDropdown=a.handleDropdown.bind(Object(d.a)(a)),a.handleMenuChange=a.handleMenuChange.bind(Object(d.a)(a)),a.getPCDropdown=a.getPCDropdown.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){K.init()}},{key:"handlePrevious",value:function(){K.previousMenu(),K.updateMenu(),this.props.pcDropdown&&this.props.setPcDropdown(!1)}},{key:"handleNext",value:function(){K.nextMenu(),K.updateMenu(),this.props.pcDropdown&&this.props.setPcDropdown(!1)}},{key:"handleDropdown",value:function(){this.props.setPcDropdown(!this.props.pcDropdown)}},{key:"handleMenuChange",value:function(e){K.setmenu(e),K.updateMenu(),this.props.setPcDropdown(!1)}},{key:"getPCDropdown",value:function(){var e=this,t=Object.values(Z);return!!this.props.pcDropdown&&i.a.createElement("div",{className:"PCDropdown"},t.map((function(t){return i.a.createElement("div",{className:"PCDropdownOption",onClick:function(){return e.handleMenuChange(t)}},t)})))}},{key:"render",value:function(){return i.a.createElement("div",{className:"PCDetailMenu"},i.a.createElement("span",{className:"previousMenu screenArrowPC",onClick:this.handlePrevious},"\u2190"),i.a.createElement("span",{className:"PCMenuTitle",onClick:this.handleDropdown},this.props.pcDetailMenu),i.a.createElement("span",{className:"nextMenu screenArrowPC",onClick:this.handleNext},"\u2192"),this.getPCDropdown())}}]),n}(i.a.Component),$=Object(l.b)((function(e){return{pcDetailMenu:e.pcMenu.detail,pcDropdown:e.pcMenu.dropdown}}),(function(e){return{setPcDetailMenu:function(t){return e({type:"SET_PC_DETAIL",detail:t})},setPcDropdown:function(t){return e({type:"SET_PC_DROPDOWN",value:t})}}}))(X),Q=(n(72),n(73),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){if(!this.props.adventurer)return"";var e=this.props.adventurer,t=e.adventurerClass;console.log(t);var n=t.name.charAt(0);return i.a.createElement("div",{className:"adventurerDisplay light"},i.a.createElement("div",{className:"adventurerClassIcon"},n),i.a.createElement("div",{className:"adventurerDetails"},i.a.createElement("p",{className:"adventurerName"},e.name),i.a.createElement("p",{className:"adventurerClass"},t.name),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"str"),i.a.createElement("p",{className:"adventurerStat"},e.strength)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"spd"),i.a.createElement("p",{className:"adventurerStat"},e.speed)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"cun"),i.a.createElement("p",{className:"adventurerStat"},e.cunning)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"int"),i.a.createElement("p",{className:"adventurerStat"},e.intelligence)),i.a.createElement("div",{className:"adventurerStatGroup"},i.a.createElement("p",{className:"adventurerStatLabel"},"con"),i.a.createElement("p",{className:"adventurerStat"},e.constitution))))}}]),n}(i.a.Component)),ee=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){if(!this.props.adventurers)return"";var e=this.props.adventurers;return i.a.createElement("div",{className:"adventurers"},e.map((function(e){return i.a.createElement(Q,{adventurer:e})})))}}]),n}(i.a.Component),te=Object(l.b)((function(e){return{adventurers:e.adventurers.adventurers}}))(ee),ne=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).formTable={},a.state={initialized:!1},a.componentDidMount=a.componentDidMount.bind(Object(d.a)(a)),a.loadFormTable=a.loadFormTable.bind(Object(d.a)(a)),a.getDetail=a.getDetail.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.loadFormTable(),this.setState({initialized:!0})}},{key:"loadFormTable",value:function(){for(var e={},t=0,n=Object.values(Z);t<n.length;t++){e[n[t]]=null}this.formTable=e,this.formTable.blank=i.a.createElement("div",{className:"BlankForm"},"detail type unknown"),this.formTable[Z.adventurers]=i.a.createElement(te,null)}},{key:"getDetail",value:function(){return console.log("getDetail"),console.log(this.props.pcDetailMenu),this.state.initialized?this.props.pcDetailMenu?void 0===this.formTable[this.props.pcDetailMenu]?this.formTable.blank:this.formTable[this.props.pcDetailMenu]:i.a.createElement("div",{className:"BlankForm"},"no details to display"):""}},{key:"render",value:function(){return i.a.createElement("div",{className:"Details"},i.a.createElement($,null),this.getDetail())}}]),n}(i.a.Component),ae=Object(l.b)((function(e){return{pcDetailMenu:e.pcMenu.detail}}))(ne),re=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"GameScreen flex-container"},i.a.createElement("div",{className:"CommerceColumn"},i.a.createElement(H,null),i.a.createElement(B,null),i.a.createElement(Y,null)),i.a.createElement(ae,null))}}]),n}(i.a.Component),ie=Object(l.b)((function(e){return{storeName:e.storeState.name}}))(re),oe=(n(74),n(75),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"Title"},"VENDOR")}}]),n}(i.a.Component)),se={maxSuppliers:3,startingAdventurers:5,dailyAdventurers:1,adventurerStartingGold:400},le=function(){var e=[],t=0,n=function(e){var n=e.name,a=e.strength,r=e.speed,i=e.cunning,o=e.intelligence,s=e.constitution,l=e.dungeonBehavior,c=e.townBehavior,u=e.adventurerClass;this.name=n,this.strength=a,this.speed=r,this.cunning=i,this.intelligence=o,this.constitution=s,this.dungeonBehavior=l,this.townBehavior=c,this.adventurerClass=u,this.gold=se.adventurerStartingGold,this.level=1,this.experience=0,this.hp=7+s,this.inventory=[],this.equipment={weapon:null,armor:null},this.id=t,t++},a=function(e){var t={type:"SET_ADVENTURERS",payload:e};Re.dispatch(t)},r=function(){var e=Object(M.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.fetchRoute("adventurers-full"),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:case"end":return e.stop()}}),e)}));return{initializeAdventurers:function(){var t=Object(M.a)(j.a.mark((function t(r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i().next().value.then((function(t){if(t){for(var i=t;e.length<r&&i.length>0;){var o=Math.floor(Math.random()*i.length),s=i.splice(o,1),l={name:(s=s[0]).name,strength:s.strength,speed:s.speed,cunning:s.cunning,intelligence:s.intelligence,constitution:s.constitution,dungeonBehavior:s.dungeon_behavior,townBehavior:s.town_behavior,adventurerClass:s.adventurer_class},c=new n(l);e.push(c)}return a(e),e}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateAdventurers:function(){a(e)}}}(),ce={init:function(e){T.setDay(1),e.name||console.log("Game must be started with a payload object that contains a store name!"),w.setName(e.name);var t=w.getStartingGold();w.setGold(t),C.setSupplyLevel(1),C.fillSupplyPool(),A.initializeSuppliers(se.maxSuppliers),le.initializeAdventurers(se.startingAdventurers)},getGameLevel:function(){return 1}},ue=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={edited:!1},a.handleStart=a.handleStart.bind(Object(d.a)(a)),a.handleNameInput=a.handleNameInput.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleStart",value:function(){var e=this.props.name;e&&""!==e&&(ce.init({name:e}),this.props.setStarted(!0))}},{key:"handleNameInput",value:function(e){13===e.charCode&&this.handleStart(),this.props.edited||this.setState({edited:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"StartScreen"},i.a.createElement(oe,null),i.a.createElement("div",{className:"NameInput"},i.a.createElement("div",{className:"nameInputGroup"},i.a.createElement("label",{htmlFor:"name",className:"NameLabel"},"Name: "),i.a.createElement("input",{id:"name",value:this.props.name,type:"text",onChange:function(t){return e.props.setStoreName(t.target.value)},onKeyPress:this.handleNameInput})),i.a.createElement("button",{onClick:this.handleStart,className:"StartButton"},"Start!")))}}]),n}(i.a.Component),pe=Object(l.b)((function(e){return{started:e.gameState.started,name:e.storeState.name,auth:e.auth}}),(function(e){return{setStoreName:function(t){return e({type:"SET_STORE_NAME",name:t})},setStarted:function(t){return e({type:"SET_GAME_STATE",value:t})}}}))(ue),me=(n(76),{makeRequest:function(){var e=Object(M.a)(j.a.mark((function e(t,n){var a,r,i,o,s,l,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},r=Object(P.a)(n);try{for(r.s();!(i=r.n()).done;)o=Object(G.a)(i.value,2),s=o[0],l=o[1],a[s]=l}catch(u){r.e(u)}finally{r.f()}return a=JSON.stringify(a),c=fetch("/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:a}),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),de=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleClose=a.handleClose.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a.updateUser=a.updateUser.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"handleClose",value:function(){this.props.profileActive&&this.props.setProfileActive(!1)}},{key:"updateUser",value:j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.makeRequest("user",t);case 2:case"end":return e.stop()}}),e)}))},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData(e.target);this.updateUser(n).next().value.then((function(){t.props.fetchUser(),t.props.setProfileActive(!1)}))}},{key:"render",value:function(){var e="",t=!1,n=null;return console.log(this.props.auth),this.props.auth&&(e=this.props.auth.nickname,t=this.props.auth.import_nickname,n=this.props.auth.id),i.a.createElement("div",{className:"ProfileViewer"},i.a.createElement("div",{className:"ProfileForm"},i.a.createElement("form",{action:"/profile",className:"input-fields-area",id:"ProfileForm",method:"POST",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"input-group"},i.a.createElement("label",{className:"item-label",htmlFor:"nickname"},"Nickname"),i.a.createElement("input",{type:"text",name:"nickname",id:"nickname",className:"input-text",placeholder:"nickname",maxLength:"40",defaultValue:e})),i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"checkbox",name:"import_nickname",id:"import_nickname",class:"input-checkbox",defaultChecked:t,value:!0}),i.a.createElement("label",{className:"item-label",htmlFor:"import_nickname"},"Import nickname as store name by default")),i.a.createElement("input",{type:"hidden",name:"id",value:n}),i.a.createElement("input",{type:"submit",value:"Update Profile",className:"button profile-submit"}))),i.a.createElement("div",{className:"CloseButton",onClick:this.handleClose},"X"))}}]),n}(i.a.Component),he=Object(l.b)((function(e){return{profileActive:e.profile.active,auth:e.auth}}),(function(e){return{setProfileActive:function(t){return e({type:"SET_PROFILE_ACTIVE",value:t})},fetchUser:function(){return e(F())}}}))(de),ve=(n(77),n(78),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"MobileStoreHeadbar"},i.a.createElement("h2",{className:"StoreName"},this.props.storeName),i.a.createElement("div",{className:"GoldDisplay"},i.a.createElement("div",{className:"StoreGold"},i.a.createElement("span",{className:"CoinSymbol",role:"img","aria-label":"coin"},"\u2689 "),this.props.gold)))}}]),n}(i.a.Component)),fe=Object(l.b)((function(e){return{storeName:e.storeState.name,gold:e.storeState.gold}}))(ve),be=(n(79),function(){var e="",t=0,n=["store","suppliers"],a={store:"store",suppliers:"suppliers"},r={};return{init:function(){e=n[0],t=0,n.forEach((function(e,t){r[e]=t}))},getCurrentScreen:function(){return e},nextScreen:function(){++t>=n.length&&(t=0),e=n[t]},previousScreen:function(){--t<0&&(t=n.length-1),e=n[t]},getScreens:function(){return n},getAllScreens:function(){return a},setScreen:function(a){var i=r[a];return null!==i&&(t=i,e=n[i],!0)},updateScreen:function(){!function(){var t={type:"SET_MOBILE_SCREEN",screen:e};Re.dispatch(t)}()}}}()),ye=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).componentDidMount=a.componentDidMount.bind(Object(d.a)(a)),a.handlePrevious=a.handlePrevious.bind(Object(d.a)(a)),a.handleNext=a.handleNext.bind(Object(d.a)(a)),a.handleDropdown=a.handleDropdown.bind(Object(d.a)(a)),a.handleScreenChange=a.handleScreenChange.bind(Object(d.a)(a)),a.getMobileDropdown=a.getMobileDropdown.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){be.init()}},{key:"handlePrevious",value:function(){be.previousScreen(),be.updateScreen(),this.props.mobileDropdown&&this.props.setMobileDropdown(!1)}},{key:"handleNext",value:function(){be.nextScreen(),be.updateScreen(),this.props.mobileDropdown&&this.props.setMobileDropdown(!1)}},{key:"handleDropdown",value:function(){this.props.setMobileDropdown(!this.props.mobileDropdown)}},{key:"handleScreenChange",value:function(e){be.setScreen(e),be.updateScreen(),this.props.setMobileDropdown(!1)}},{key:"getMobileDropdown",value:function(){var e=this,t=be.getScreens();return!!this.props.mobileDropdown&&i.a.createElement("div",{className:"MobileDropdown"},i.a.createElement(H,null),t.map((function(t){return i.a.createElement("div",{className:"mobileDropdownOption",onClick:function(){return e.handleScreenChange(t)}},t)})))}},{key:"render",value:function(){return i.a.createElement("div",{className:"MobileMenu"},i.a.createElement("span",{className:"previousScreen screenArrow",onClick:this.handlePrevious},"\u2190"),i.a.createElement("span",{className:"mobileTitle",onClick:this.handleDropdown},this.props.mobileScreen),i.a.createElement("span",{className:"nextScreen screenArrow",onClick:this.handleNext},"\u2192"),this.getMobileDropdown())}}]),n}(i.a.Component),Ee=Object(l.b)((function(e){return{mobileScreen:e.mobileMenu.screen,mobileDropdown:e.mobileMenu.dropdown}}),(function(e){return{setMobileDropdown:function(t){return e({type:"SET_MOBILE_DROPDOWN",value:t})}}}))(ye),Se=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={currentScreen:"store"},a}return Object(m.a)(n,[{key:"getCurrentScreen",value:function(){var e=be.getAllScreens();switch(this.props.mobileScreen){case e.store:return i.a.createElement(B,null);case e.suppliers:return i.a.createElement("div",null,i.a.createElement(fe,null),i.a.createElement(Y,null));default:return"Nothing to display"}}},{key:"render",value:function(){return i.a.createElement("div",{className:"MobileGameScreen"},i.a.createElement(Ee,null),this.getCurrentScreen())}}]),n}(i.a.Component),Oe=Object(l.b)((function(e){return{mobileScreen:e.mobileMenu.screen}}))(Se),ge=function(){var e=!0,t=!1,n=!0,a=0,r=0;console.log(a,r);var i=function(){var e={type:"SET_IS_FULLSCREEN",value:n};Re.dispatch(e)};return{init:function(){e=!(window.orientation>-1),function(){var e=document.querySelector(".App").getBoundingClientRect();a=e.height,(r=e.width)<768&&(t=!0)}(),function(){var t={type:"SET_IS_PC",value:e};Re.dispatch(t)}(),function(){var e={type:"SET_IS_MOBILE",value:t};Re.dispatch(e)}()},getIsPc:function(){return e},getIsMobile:function(){return t},goFullScreen:function(){!function(){var e=document.querySelector(".App");e.requestFullscreen&&(e.requestFullscreen(),n=!0),e.msRequestFullscreen&&(e.msRequestFullscreen(),n=!0),e.mozRequestFullscreen&&(e.mozRequestFullscreen(),n=!0),e.webkitRequestFullscreen&&(e.webkitRequestFullscreen(),n=!0)}(),i()},leaveFullScreen:function(){n=!1,document.exitFullscreen(),i()}}}(),ke=(n(80),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={mobileOpen:!1},a.handleProfileActive=a.handleProfileActive.bind(Object(d.a)(a)),a.getLoginContainer=a.getLoginContainer.bind(Object(d.a)(a)),a.renderProfileLink=a.renderProfileLink.bind(Object(d.a)(a)),a.renderLogin=a.renderLogin.bind(Object(d.a)(a)),a.renderEditorLink=a.renderEditorLink.bind(Object(d.a)(a)),a.handleFullscreen=a.handleFullscreen.bind(Object(d.a)(a)),a.getFullScreenControls=a.getFullScreenControls.bind(Object(d.a)(a)),a.handleMobileOpen=a.handleMobileOpen.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"handleProfileActive",value:function(){this.props.profileActive||this.props.setProfileActive(!0),this.handleMobileOpen()}},{key:"handleMobileOpen",value:function(){this.props.profileActive&&!this.state.mobileOpen||this.setState({mobileOpen:!this.state.mobileOpen})}},{key:"renderProfileLink",value:function(){switch(this.props.auth){case null:case!1:return"";default:return i.a.createElement("li",{key:"profile",class:"profileLink",onClick:this.handleProfileActive},"profile")}}},{key:"renderLogin",value:function(){switch(this.props.auth){case null:return;case!1:return i.a.createElement("li",{key:"login"},i.a.createElement("a",{href:"/auth/facebook",className:"facebookLogo"},i.a.createElement("span",null,"f")));default:return i.a.createElement("li",{key:"login"},i.a.createElement("a",{href:"/api/logout"},"logout"))}}},{key:"renderEditorLink",value:function(){switch(this.props.auth){case null:case!1:return!1;default:return!("owner"!==this.props.auth.type||!ge.getIsPc())&&i.a.createElement("li",{key:"editorLink"},i.a.createElement("a",{className:"EditorLink",href:"/editor"},"editor"))}}},{key:"getLoginContainer",value:function(){return this.props.isPc?i.a.createElement("ul",{className:"LoginContainer"},this.renderProfileLink(),this.renderEditorLink(),this.renderLogin()):i.a.createElement("div",{className:"hamburgerContainer",onClick:this.handleMobileOpen},i.a.createElement("div",{className:"hamburgerLine"}),i.a.createElement("div",{className:"hamburgerLine"}),i.a.createElement("div",{className:"hamburgerLine"}))}},{key:"getMobileMenu",value:function(){if(!this.props.isPc&&this.state.mobileOpen){var e={},t=2;return this.props.auth&&(t+=1),e.height="calc(".concat(2.4*t,"rem + ").concat(2*t*.8,"rem - 1px)"),this.props.isMobile&&(e.height="calc(".concat(1.8*t,"rem + ").concat(2*t*.8,"rem - 1px)")),i.a.createElement("div",{className:"mobileMenuContainer",onClick:this.handleMobileOpen},i.a.createElement("ul",{className:"LoginContainer mobileMenu",style:e},this.getFullScreenControls(),this.renderProfileLink(),this.renderLogin()))}}},{key:"handleFullscreen",value:function(){this.props.isFullscreen?ge.leaveFullScreen():ge.goFullScreen()}},{key:"getFullScreenControls",value:function(){return this.props.isFullscreen?i.a.createElement("li",{key:"exitFullscren",className:"ExitFullScreen screenLink",onClick:this.handleFullscreen},"\u256c"):i.a.createElement("li",{key:"goFullscreen",className:"Fullscreen screenLink",onClick:this.handleFullscreen},"[  ]")}},{key:"render",value:function(){return i.a.createElement("div",{className:"MenuBar"},i.a.createElement("span",{className:"MenuTitle"},i.a.createElement("a",{href:"/"},"VENDOR")),this.getLoginContainer(),this.getMobileMenu())}}]),n}(i.a.Component)),Ie=Object(l.b)((function(e){return{auth:e.auth,profileActive:e.profile.active,isMobile:e.app.isMobile,isPc:e.app.isPc,isFullscreen:e.app.isFullscreen}}),(function(e){return{setProfileActive:function(t){return e({type:"SET_PROFILE_ACTIVE",value:t})}}}))(ke),je=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).getMainView=a.getMainView.bind(Object(d.a)(a)),a.getProfileViewer=a.getProfileViewer.bind(Object(d.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(d.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchUser(),ge.init()}},{key:"getMainView",value:function(){return this.props.started?this.props.isPc?i.a.createElement(ie,null):i.a.createElement(Oe,null):i.a.createElement(pe,null)}},{key:"getProfileViewer",value:function(){if(this.props.profileActive)return i.a.createElement(he,null)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App",ref:function(t){e.container=t}},i.a.createElement(Ie,null),this.getMainView(),this.getProfileViewer())}}]),n}(i.a.Component),Me=Object(l.b)((function(e){return{started:e.gameState.started,profileActive:e.profile.active,isMobile:e.app.isMobile,isPc:e.app.isPc}}),a)(je),De={day:1},Ne={started:!1,storeUpdate:!1},we={name:"",gold:0,filterActive:!1,filter:"all",needsUpdate:!1,inventory:[],inventoryCount:0,mobileDetail:null,mobileItemDetail:null},Te={suppliers:null,count:0,initialized:!1},Pe={ready:!1,spawned:!1},Ce={active:!1},_e={isFullscreen:!1,isPc:!0,isMobile:!1},Ae={screen:"store",dropdown:!1},Fe={adventurers:null},Le={detail:Z.adventurers,dropdown:!1},Ue=Object(c.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER":return t.payload||!1;default:return e}},days:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DAY":return Object(f.a)(Object(f.a)({},e),{},{day:t.day});default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GAME_STATE":return Object(f.a)(Object(f.a)({},e),{},{started:t.value});case"SET_UPDATES":var n=t.payload,a=n.storeUpdate;return Object(f.a)(Object(f.a)({},e),{},{storeUpdate:a});case"SET_STORE_UPDATE":return Object(f.a)(Object(f.a)({},e),{},{storeUpdate:t.value});default:return e}},storeState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STORE_NAME":return Object(f.a)(Object(f.a)({},e),{},{name:t.name});case"SET_STORE_GOLD":return Object(f.a)(Object(f.a)({},e),{},{gold:t.amount});case"SET_STORE_INVENTORY":var n=t.inventory,a=e.inventoryCount;return Array.isArray(n)&&(a=n.length),Object(f.a)(Object(f.a)({},e),{},{inventory:n,inventoryCount:a});case"SET_STORE_FILTER_ACTIVE":return Object(f.a)(Object(f.a)({},e),{},{filterActive:t.value});case"SET_STORE_FILTER":return Object(f.a)(Object(f.a)({},e),{},{filter:t.filter});case"SET_STORE_UPDATE_STATUS":var r=!e.needsUpdate;return Object(f.a)(Object(f.a)({},e),{},{needsUpdate:r});case"SET_STORE_MOBILE_DETAIL":return Object(f.a)(Object(f.a)({},e),{},{mobileDetail:t.detail});case"SET_STORE_MOBILE_DETAIL_ITEM":return Object(f.a)(Object(f.a)({},e),{},{mobileItemDetail:t.itemDetail});default:return e}},suppliers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SUPPLIERS":var n=0;return Array.isArray(t.payload)&&(n=t.payload.length),Object(f.a)(Object(f.a)({},e),{},{suppliers:t.payload,count:n});case"SET_SUPPLIERS_INITIALIZED":return Object(f.a)(Object(f.a)({},e),{},{initialized:t.value});default:return e}},supplies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SUPPLY_READY":return Object(f.a)(Object(f.a)({},e),{},{ready:t.value});case"SET_SUPPLY_SPAWNED":return Object(f.a)(Object(f.a)({},e),{},{spawned:t.value});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PROFILE_ACTIVE":return Object(f.a)(Object(f.a)({},e),{},{active:t.value});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_FULLSCREEN":return Object(f.a)(Object(f.a)({},e),{},{isFullscreen:t.value});case"SET_IS_PC":return Object(f.a)(Object(f.a)({},e),{},{isPc:t.value});case"SET_IS_MOBILE":return Object(f.a)(Object(f.a)({},e),{},{isMobile:t.value});default:return e}},mobileMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MOBILE_SCREEN":return Object(f.a)(Object(f.a)({},e),{},{screen:t.screen});case"SET_MOBILE_DROPDOWN":return Object(f.a)(Object(f.a)({},e),{},{dropdown:t.value});default:return e}},adventurers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ADVENTURERS":return Object(f.a)(Object(f.a)({},e),{},{adventurers:t.payload});default:return e}},pcMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PC_DETAIL":return Object(f.a)(Object(f.a)({},e),{},{detail:t.detail});case"SET_PC_DROPDOWN":return Object(f.a)(Object(f.a)({},e),{},{dropdown:t.value});default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Re=Object(c.d)(Ue,{},Object(c.a)(u.a));s.a.render(i.a.createElement(l.a,{store:Re},i.a.createElement(i.a.StrictMode,null,i.a.createElement(Me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.90f84f0a.chunk.js.map