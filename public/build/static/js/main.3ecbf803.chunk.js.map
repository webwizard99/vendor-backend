{"version":3,"sources":["Utilities/itemTypes.js","Utilities/potionTypes.js","game_modules/items.js","game_modules/storeInventory.js","actions/types.js","Components/Coin/Coin.jsx","Components/StoreInventory/StoreInventory.jsx","game_modules/store.js","game_modules/days.js","game_modules/supplies.js","Utilities/fetcher.js","game_modules/suppliers.js","actions/index.js","Components/Store/Store.jsx","Components/SupplierBuyButton/SupplierBuyButton.jsx","Components/Supplier/Supplier.jsx","Components/Suppliers/Suppliers.jsx","game_modules/gameConstants.js","game_modules/monsters.js","game_modules/dungeon.js","Utilities/tagProcessor.js","game_modules/adventurers.js","game_modules/main.js","Components/Days/Days.jsx","Utilities/pcMenus.js","Utilities/pcDetailMenus.js","Components/DetailPCMenu/DetailPCMenu.jsx","Utilities/screenInfo.js","Utilities/breadcrumb.js","Utilities/mobileScreens.js","Components/Adventurer/Adventurer.jsx","Components/Adventurers/Adventurers.jsx","Components/AdventurerDetail/AdventurerDetail.jsx","Components/AdventurersPartial/AdventurersPartial.jsx","Components/DungeonLevel/DungeonLevel.jsx","Components/Dungeon/Dungeon.jsx","Components/Details/Details.jsx","Containers/GameScreen/GameScreen.jsx","Components/Title/Title.jsx","Containers/StartScreen/StartScreen.jsx","Utilities/userPutRequests.js","Containers/ProfileViewer/ProfileViewer.jsx","Components/MobileStoreHeadbar/MobileStoreHeadbar.jsx","Components/MobileMenu/MobileMenu.jsx","Containers/MobileGameScreen/MobileGameScreen.jsx","Components/MenuBar/MenuBar.jsx","Components/App/App.jsx","reducers/daysReducer.js","reducers/gameStateReducer.js","reducers/storeReducer.js","reducers/suppliersReducer.js","reducers/suppliesReducer.js","reducers/profileReducer.js","reducers/appStateReducer.js","reducers/mobileMenuReducer.js","reducers/adventurersReducer.js","reducers/pcDetailReducer.js","reducers/detailReducer.js","reducers/dungeonReducer.js","reducers/index.js","reducers/authReducer.js","serviceWorker.js","index.js"],"names":["itemTypes","potion","weapon","armor","potionTypes","items","ItemTypes","PotionTypes","allItems","itemTypeIndex","itemPrototypeIndex","lastIndex","Item","payload","type","name","value","prototypeId","rarity","this","id","Potion","level","Weapon","damage","Armor","createItem","itemPayload","newItem","newPotionType","console","log","newPotionLevel","potionPayload","newWeaponDamage","newWeaponLevel","weaponPayload","newArmorArmor","newArmorLevel","armorPayload","push","getItem","thisItem","find","item","destroyItem","filter","getItemType","getItemPrototypeId","getItemTypeIndex","createTestPotion","lvl","healing","getItemTypes","composePayloadFromProto","protoItem","storeInventory","inventory","composeInventory","composedInventory","forEach","gameItems","itemId","markup","addItem","undefined","newStoreItem","removeItem","getStoreInventory","updateStoreInventory","store","dispatch","dispatchStoreInventory","getComposedInventory","getFilteredInventory","newFilter","toLowerCase","getFilteredStoreItems","markupFilteredStoreItems","newMarkup","markupAmount","inventoryItem","markupStoreItem","markupById","markupPrototypes","markupByPrototype","Coin","className","React","Component","StoreInventory","props","state","timer","mobileMultiplier","delay","markupIntensity","valence","increaseMarkup","bind","repeat","onMouseDown","onMouseUp","markupOut","handleMobileFocus","handleOneIncrement","handlePrototypeIncrement","getInventoryItems","getIncrementOneButtons","getIncrementAllButtons","newInventory","JSON","parse","stringify","gameInventory","setInventory","setState","e","refBtnClasses","target","classList","contains","repeatPayload","totaldelay","setTimeout","clearTimeout","posNeg","toggleStoreUpdateStatus","itemsPayload","isPc","onTouchStart","onTouchEnd","mobileItem","mobileItemDetail","mobileDetail","setStoreMobileDetail","setStoreMobileDetailItem","window","filteredInventory","length","filterActive","storeFilter","map","composedPrice","Math","floor","itemClass","key","connect","storeState","inventoryCount","storeNeedsUpdate","needsUpdate","isMobile","app","detail","itemDetail","gameStore","gold","chargeGold","amount","creditGold","getName","setName","newName","getStartingGold","getGold","setGold","newGold","updateGold","dispatchStoreGold","days","day","getDay","setDay","newDay","resetDay","supplies","suppliesPool","supplyLevel","itemTypesArr","Object","values","itemTypeCount","itemSpawnCount","fetchItemArrForSupplyPool","a","typeToFetch","maxLvl","fetchURL","fetch","possibleItems","json","getItemForSupplyPool","newItems","then","itemsOfLevel","dispatchSpawned","catch","err","spawnSupply","typeIndex","random","typeToSpawn","newSupplyArr","Array","isArray","Items","getSupplies","fillSupplies","i","dispatchReady","fillSupplyPool","typeItem","depleteSupply","supplyIndex","indexOf","splice","setSupplyLevel","fetcher","fetchRoute","routeName","response","suppliers","currentId","Supplier","offerings","prototype","rankFavorites","bestOfferings","offeringsCount","sort","off1","off2","rankedOfferings","sellItem","price","itemIndex","takeIncome","dispatchSuppliers","newSuppliers","fetchSuppliers","initSuppliers","getSuppliers","initializeSuppliers","maxSuppliers","next","drainSuppliers","pushIndex","newSupplier","supplierPayload","thisSupplier","supplier","takeSupplierTurn","remainingSupplies","supplyTypes","supplyValues","remainingSupply","supplyItem","currentSupplier","supplierCount","remSupply","remNum","supplierTries","thisIndex","taken","supplierIndex","favorites","thisSupply","takeSupplies","dispatchSupplyReady","refSupplier","sellPayload","takeSupplierIncomeTurns","updateSuppliers","fetchUser","axios","get","res","data","import_nickname","nickname","fetchGold","fetchDay","Store","getMobileDetail","componentDidMount","toggleFilter","getFilter","handleFilter","getIncrementButtons","handleIncrease","handleDecrease","currentType","setStoreFilter","refBtn","totalDelay","pc","defaultValue","onChange","itemType","newValue","setStoreFilterActive","inventoryComponent","storeName","role","aria-label","onClick","setStoreGold","SupplierBuyButton","getSuppllierInventory","handlePurchase","ids","storeGold","sellId","gameSuppliers","gameStoreInventory","initialized","thisInventory","inventoryGroups","valueGroups","typeGroups","idGroups","composedItems","entries","count","item1","item2","nameA","toUpperCase","nameB","findIndex","offering","composedValue","supplierClass","supplyReady","ready","Suppliers","componentDidUpdate","supplySpawned","gameSupplies","suppliersInitialized","gameSupplier","setSuppliersInitialized","detailUpdate","supplierContainerClass","spacerClass","currentSuppliers","suppliersDisplay","renderSupplier","ref","node","container","suppliersClass","spawned","update","gameConstants","startingAdventurers","dailyAdventurers","adventurerStartingGold","monsters","monsterDecisions","heal","defend","special","attack","Monster","protoId","boss","hp","defense","stealth","initiative","experience","dropList","monsterBehavior","maxHp","specialCooldown","defending","getInitiativeRoll","initiativeFactor","takeTrapDamage","adventurerLevel","trapDamage","pow","checkNeedsHeal","checkUseHeal","checkUseSpecial","special_move","checkDefend","checkBlockFlee","flee","getBattleDecision","thisDecision","MonsterDecision","needHealing","useHeal","useSpecial","weighDecisionTournament","takeBattleDamage","calculatedDamage","monsterId","concernedMonster","monster","remainingOptions","weights","tournamentRounds","ceil","log2","round","optionsLength","pairings","pairCount","offset","pair","eliminated","result1","result2","randomChoice","elIndex","eliminate","option","createMonster","newMonster","getMonster","foundMonster","protoMonster","drop_list","monster_behavior","getMonsterDecisions","dungeon","levelCount","levels","adventurers","exploredLevel","Level","number","bossId","monstersMinLevel","monstersMaxLevel","tileAssignments","treasureDropList","treasures","droppedTreasures","lurkingMonsters","monstersLoot","treasureListFetched","monstersFetched","monsterDropListItemsFetched","intialized","initialize","Promise","resolve","reject","getMonstersForLevel","monstersToAdd","monsterDrops","addMonster","addMonsterDrops","drops","addDrop","addId","dropType","drop_type","treasureDrops","drop","resolveMonsterDrops","rejectMonsterDrops","monsterDrop","mDropN","getDrop","resolvedDrop","resolveTreasureDrops","rejectTreasureDrops","treasureDrop","tDropN","activateTile","adventurer","tileOutcomes","tileI","weight","probability","result","tile","outcome1","outcome2","resultTileI","resultTile","dungeon_tile","innTreasureBoost","informed","actions","adventurersModule","getActions","checkTreasureBoost","action","checkForTreasure","checkTrapBoost","checkForTraps","treasureProb","treasure","encounterProb","encounter","trapProb","trap","threshholdProb","treasureIndex","itemDropped","dropChance","goldMin","gold_min","goldRange","gold_max","randomAward","gold_chance","creditAccount","treasureItem","considerTreasure","encounterTrap","monsterIndex","monsterProto","monsterPayload","newMonsterId","setWeaknessChecked","logEncounterStart","newBattle","Battle","levelLoot","battleController","addBattle","startBattle","BattleController","currentBattles","currentBattleId","battle","clearBattleRound","roundNumber","battleId","clearRound","addBattleRound","newRound","addRound","getBattleLevelLoot","rounds","currentRoundNumber","turnResolve","resolution","Round","startRound","deletedRound","foundRound","fleed","adventurerInitiative","monsterInitiative","currentAction","setTrap","logTrap","monsterName","unsetTrap","adventurerTurn","monsterTurn","clearSelf","battleDecisions","getBattleDecisions","adventurerMove","logDefend","usePotion","logFlee","checkWeakness","logWeaknessChecked","damageFactor","adventurerClass","cunning","strength","weaponDamage","equipment","damageFloor","randomizeDamage","weaknessChecked","Number","parseInt","damagePayload","logHitMonster","gainExperience","treasureLevelReference","treasureMonsterRef","monsterRef","monsterDropItemId","itemid","logVictory","monsterMove","randomDamage","adventurerShield","tactics","adventurerArmor","dispatchLevels","dispatchExploredLevel","dispatchAdventurers","fetchLevels","initLevels","getLevels","minLevel","maxLevel","fetchMonstersInRange","fetchUrl","fetchedMonsters","fetchDrop","fetchedDrop","loadLevel","nextLevelN","completed","initializeLevels","newLevel","shift","levelPayload","boss_id","monsters_min_level","monsters_max_level","tile_assignments","thisLevel","level1","level2","updateLevels","getExploredLevel","receiveAdventurer","adventurerId","addAdventurer","releaseAdventurer","deleteAdventurer","executeTurn","dungeonEntry","dunAdventurer","checkLevelReadiness","highestLevel","adventurerI","loadNextLevel","tagProcessor","filterClasses","status","getFilterClasses","decisions","Adventurer","speed","intelligence","constitution","dungeonBehavior","townBehavior","inDungeon","hasFoundStairs","currentTotalDungeonTurns","turns","checkAccount","chargeAccount","unequipItem","slot","equipItem","getCurrentItemCount","protoCount","addCombatLog","message","combatLog","getCombatLog","checkHealthChoice","conserve_health","checkHasPotion","checkPotionUse","use_potion","checkFlee","levelDiff","decisionFactor","flee_encounter","check_monster_weakness","potionToUse","heldPotions","hpDifferential","potion1","potion2","hpToHeal","healJSX","checkTrapDecision","check_for_traps","checkTreasureDecision","search_for_treasure","checkSetTrapDecision","set_trap","prefer_weaker_monster","checkAdvanceDecision","percentLost","inventoryPercentEmpty","fillInventoryDesire","fill_inventory","advance_tile","checkReturnToTown","turnsFactor","turnsInfluence","return_to_town","dungeonLevel","trapFactor","traps","agility","computedDamage","trapJSX","vowelAdj","charAt","encounterJSX","battleJSX","defendJSX","fleeJSX","logReturnToTown","returnJSX","weaknessJSX","victoryJSX","BattleDecision","hasPotion","turnController","TurnController","currentTurns","addTurn","turn","clearTurn","deletedTurn","foundTurn","dispatchUpdate","clearAdventurerTurns","deletedTurns","startTurns","turnNumber","runTurn","startTurn","nextTurn","Turn","resultDecision","dungeonAdventurer","Decision","advance","returnToTown","weighDecisionLogical","actionMsg","actionJSX","clearPackage","resolveTurn","rejectTurn","checkTreasure","concernedAdventurer","offest","newAdventurers","fetchAdventurers","initAdventurers","getAdventurers","enter_dungeon","dungeonJSX","combatLogMessage","dungeonTurns","dungeonAdventurers","currentDay","dunAdN","totalTurns","newTurn","initializeAdventurers","maxAdventurers","drainAdventurers","newAdventurer","adventurerPayload","dungeon_behavior","town_behavior","adventurer_class","thisAdventurer","updateAdventurers","takeAdventurerTurn","townAdventurer","totalFactor","use_tavern","totalCost","innJSX","inventoryItems","composedItem","shoppingAdventurers","adventurerCount","adventurerTries","adventurerIndex","itemProto","currentHoldings","willBuy","currentGear","totalPrice","playerStore","baseItem","doShopping","main","init","startingGold","getGameLevel","performTurn","Days","handleNextDay","mobileDropdown","setMobileDropdown","mobileMenu","dropdown","pcMenus","adventurersPartial","pcDetailMenus","currentMenu","currentIndex","menus","menuMap","menu","menuN","getCurrentMenu","nextMenu","previousMenu","getMenus","setmenu","newMenu","menuIndex","updateMenu","dispatchPCMenu","DetailPCMenu","handlePrevious","handleNext","handleDropdown","handleMenuChange","getPCDropdown","pcDropdown","setPcDropdown","allMenus","menuName","pcDetailMenu","pcMenu","dungeonLevelExplored","setPcDetailMenu","screenInfo","isFullscreen","dispatchFullscreen","orientation","docDimensions","document","querySelector","getBoundingClientRect","width","setScreenInfo","dispatchIsPc","dispatchIsMobile","getIsPc","getIsMobile","goFullScreen","App","requestFullscreen","msRequestFullscreen","mozRequestFullscreen","webkitRequestFullscreen","setFullScreen","leaveFullScreen","exitFullscreen","breadcrumb","breadcrumbs","Breadcrumb","displayPayload","scrollPos","dispatchDisplay","screen","popBreadcrumb","pop","addBreadcrumb","display","newCrumb","mobileScreens","currentScreen","screens","allScreens","screenMap","screenN","getCurrentScreen","nextScreen","previousScreen","getScreens","getAllScreens","setScreen","newScreen","screenIndex","updateScreen","dispatchMobileScreen","handleZoom","partialAdventurers","breadcrumbName","setDetailId","scrollY","scrollTop","screenPos","setMobileScreen","setPCDetail","adventurerClassColor","adventurerClassIconColor","classColors","thief","bard","soldier","classIcon","dungeonIndicator","Adventurers","adventurerUpdate","AdventurerDetail","handleBack","scrollCombatLog","adventurerInventory","equippedIndicator","adventurerCombatLog","cLog","scrollHeight","detailId","getInventory","AdventurersPartial","setPartialAdventurers","DungeonLevel","handleAdventurerList","levelAdventurers","adventurerIds","Dungeon","Details","formTable","loadFormTable","getDetail","tempTable","menuTypes","setDetailUpdate","GameScreen","Title","StartScreen","edited","handleStart","handleNameInput","game","setStarted","charCode","htmlFor","val","setStoreName","onKeyPress","started","gameState","auth","userPutRequests","makeRequest","putRoute","putBody","subBody","putRes","method","headers","body","ProfileViewer","handleClose","handleSubmit","updateUser","profileActive","setProfileActive","preventDefault","FormData","newNickname","newImportNickname","newId","onSubmit","placeholder","maxLength","class","defaultChecked","profile","active","MobileStoreHeadbar","MobileMenu","handleScreenChange","getMobileDropdown","mobileMenuName","mobileScreen","MobileGameScreen","MenuBar","mobileOpen","handleProfileActive","getLoginContainer","renderProfileLink","renderLogin","renderEditorLink","handleFullscreen","getFullScreenControls","handleMobileOpen","href","mobileOffsetStyle","menuOffsets","height","style","getMobileMenu","getMainView","getProfileViewer","initialState","storeUpdate","intitialState","combineReducers","updates","newCount","newStatus","Boolean","location","hostname","match","createStore","reducers","applyMiddleware","reduxThunk","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","registration","unregister","error"],"mappings":"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","file":"static/js/main.3ecbf803.chunk.js","sourcesContent":["const itemTypes = {\n  potion: 'potion',\n  weapon: 'weapon',\n  armor: 'armor'\n}\n\nexport default itemTypes;","const potionTypes = [\n  'healing'\n];\n\nexport default potionTypes;","import ItemTypes from '../Utilities/itemTypes';\nimport PotionTypes from '../Utilities/potionTypes';\n\nconst items = (function(){\n  const itemTypes = ItemTypes;\n  const potionTypes = PotionTypes;\n\n  let allItems = [];\n  let itemTypeIndex = {};\n  let itemPrototypeIndex = {};\n  let lastIndex = 0;\n  \n  const Item = function(payload) {\n    const { type, name, value, prototypeId, rarity } = payload;\n    this.type = type;\n    this.name = name;\n    this.value = value;\n    this.prototypeId = prototypeId;\n    this.rarity = rarity;\n    this.id = lastIndex;\n    itemTypeIndex[lastIndex] = type;\n    itemPrototypeIndex[lastIndex] = prototypeId;\n    lastIndex++;\n  }\n\n  const Potion = function(payload) {\n    const { type, level } = payload;\n    this.type = type;\n    this.level = level;\n  }\n\n  const Weapon = function(payload) {\n    const { damage, level } = payload;\n    this.damage = damage;\n    this.level = level;\n  }\n\n  const Armor = function(payload) {\n    const { armor, level } = payload;\n    this.armor = armor;\n    this.level = level;\n  }\n  \n  return {\n    createItem: function(payload) {\n      let { type, name, value, itemPayload, prototypeId, rarity } = payload;\n      if (!itemTypes[type]) {\n        console.log('invalid item type passed to items.createItem()');\n        return;\n      }\n      \n      const newPayload = { type: type , name: name , value: value, prototypeId: prototypeId, rarity: rarity }\n      const newItem = new Item(newPayload);\n      \n      switch (newItem.type) {\n        case itemTypes.potion:\n          const newPotionType = itemPayload.type;  \n          if (!newPotionType) {\n            console.log('attempted to create invalid potion type');\n            return;\n          }\n          const newPotionLevel = itemPayload.level;\n          if (!newPotionLevel) {\n            console.log('attempted to create a potion with an invalid level');\n            return;\n          }\n          const potionPayload = { type: newPotionType, level: newPotionLevel };\n          newItem[newItem.type] = new Potion(potionPayload);\n          break;\n        case itemTypes.weapon:\n          const newWeaponDamage = itemPayload.damage;\n          if (!newWeaponDamage) {\n            console.log('attempted to create a weapon without damage');\n            return;\n          }\n          const newWeaponLevel = itemPayload.level;\n          if (!newWeaponLevel) {\n            console.log('attempted to create a weapon with an invalid level');\n            return;\n          }\n          const weaponPayload = { damage: newWeaponDamage, level: newWeaponLevel };\n          newItem[newItem.type] = new Weapon(weaponPayload);\n          break;\n        case itemTypes.armor:\n          const newArmorArmor = itemPayload.armor;\n          if (!newArmorArmor) {\n            console.log('attempted to make a new armor without an armor value');\n            return;\n          }\n          const newArmorLevel = itemPayload.level;\n          if (!newArmorLevel) {\n            console.log('attempted to make a new armor without a level value');\n            return;\n          }\n          const armorPayload = { armor: newArmorArmor, level: newArmorLevel };\n          newItem[newItem.type] = new Armor(armorPayload);\n          break;\n        default:\n          break;\n      }\n\n      allItems.push(newItem);\n      return newItem.id;\n    },\n\n    getItem(id) {\n      let thisItem = allItems.find(item => item.id === id);\n      if (thisItem) {\n        return thisItem;\n      } else {\n        console.log('attempted to retrieve invalid item.')\n      }\n    },\n\n    destroyItem(id) {\n      let thisItem = allItems.find(item => item.id === id);\n      if (thisItem) {\n        allItems = allItems.filter(item => item.id !== id);\n        thisItem = null;\n        return true;\n      } else {\n        return false;\n      }\n    },\n\n    getItemType(id) {\n      if (itemTypeIndex[id] !== null) {\n        return itemTypeIndex[id];\n      } else {\n        return false;\n      }\n    },\n\n    getItemPrototypeId(id) {\n      if (itemPrototypeIndex[id] !== null) {\n        return itemPrototypeIndex[id];\n      } else {\n        return false;\n      }\n    },\n\n    getItemTypeIndex() {\n      return itemTypeIndex;\n    },\n\n    createTestPotion: function(lvl) {\n      const newItem = new Item({ type: itemTypes.potion, name: 'Healing Potion', value: 60});\n      newItem[itemTypes.potion] = new Potion({ type: potionTypes.healing, level: lvl});\n      return newItem;\n    },\n\n    getItemTypes: function() {\n      return itemTypes;\n    },\n\n    composePayloadFromProto: function(protoItem) {\n      // compose payload for Item constructor\n      let itemPayload = {};\n      itemPayload.level = protoItem.level;\n      switch(protoItem.item.type) {\n        case ItemTypes.potion:\n          itemPayload.type = protoItem.type;\n          break;\n        case ItemTypes.weapon:\n          itemPayload.damage = protoItem.damage;\n          break;\n        case ItemTypes.armor:\n          itemPayload.armor = protoItem.armor;\n          break;\n        default:\n          break;\n      }\n      let payload = {};\n      payload.itemPayload = itemPayload;\n      payload.type = protoItem.item.type;\n      payload.name = protoItem.item.name;\n      payload.value = protoItem.item.value;\n      payload.prototypeId = protoItem.item.id;\n      payload.rarity = protoItem.item.rarity;\n      return payload;\n    }\n  }\n}());\n\nexport default items;","// redux imports\nimport { store } from '../index';\nimport { SET_STORE_INVENTORY } from '../actions/types';\n\n// game module imports\nimport gameItems from './items';\n\nconst storeInventory = (function(){\n  // {\n  //   itemId: Number,\n  //   markup: number\n  // }\n  let inventory = [];\n\n  const maxMarkup = 4000;\n\n  const dispatchStoreInventory = function() {\n    const payload = {\n      type: SET_STORE_INVENTORY,\n      inventory: inventory\n    }\n    store.dispatch(payload);\n  }\n\n  const composeInventory = function() {\n    let composedInventory = [];\n      inventory.forEach(item => {\n        let thisItem = gameItems.getItem(item.itemId);\n        composedInventory.push({ ...thisItem, markup: item.markup });\n      });\n      return composedInventory;\n  }\n\n  const filterInventory = function(filter) {\n    let filteredInventory = composeInventory().filter(item => item.type === filter);\n    return filteredInventory;\n  }\n\n  const filterStoreItems = function(filter) {\n    let filteredIds = inventory.filter(item => {\n      return storeInventory.getItemType(item.itemId) === filter\n    });\n    return filteredIds;\n  }\n\n  const markupFilteredItems = function(filter, newMarkup) {\n    inventory.forEach(inventoryItem => {\n      if (filter.toLowerCase() === 'all' || gameItems.getItemType(inventoryItem.itemId) === filter) {\n        inventoryItem.markup += newMarkup;\n        if (inventoryItem.markup > maxMarkup) {\n          inventoryItem.markup = maxMarkup;\n        }\n        if (inventoryItem.markup < 0) {\n          inventoryItem.markup = 0;\n        }\n      }\n    });\n  }\n\n  const markupById = function(id, newMarkup) {\n    const targetItem = inventory.find(item => item.itemId === id);\n    targetItem.markup += newMarkup;\n  }\n\n  const markupByPrototype = function(prototypeId, newMarkup) {\n    inventory.forEach(inventoryItem => {\n      if (gameItems.getItemPrototypeId(inventoryItem.itemId) === prototypeId) {\n        inventoryItem.markup += newMarkup;\n      }\n      if (inventoryItem.markup > maxMarkup) {\n        inventoryItem.markup = maxMarkup;\n      }\n      if (inventoryItem.markup < 0) {\n        inventoryItem.markup = 0;\n      }\n    })\n  }\n\n  return {\n    addItem: function(id) {\n      if (id === null || id === undefined) {\n        return false;\n      }\n      const newStoreItem = { itemId: id,\n        markup: 150\n      }\n      inventory.push(newStoreItem);\n    },\n\n    removeItem: function(id) {\n      const foundItem = inventory.find(item => item.itemId === id);\n      if (foundItem) {\n        inventory = inventory.filter(item => item.itemId !== id);\n      }\n    },\n\n    getStoreInventory: function() {\n      return inventory;\n    },\n\n    updateStoreInventory: function() {\n      dispatchStoreInventory();\n    },\n\n    getComposedInventory: function() {\n      return composeInventory();\n    },\n\n    getFilteredInventory: function(newFilter) {\n      if (!newFilter || newFilter.toLowerCase() === 'all') {\n        return composeInventory();\n      }\n      else {\n        return filterInventory(newFilter);\n      }\n    },\n    \n    getFilteredStoreItems: function(newFilter) {\n      return filterStoreItems(newFilter);\n    },\n\n    markupFilteredStoreItems: function(payload) {\n      let { filter:newFilter, markup:markupAmount } = payload;\n      markupFilteredItems(newFilter, markupAmount);\n    },\n    \n    markupStoreItem: function(payload) {\n      let { id, markup:markupAmount} = payload;\n      markupById(id, markupAmount);\n    },\n\n    markupPrototypes: function(payload) {\n      let { prototypeId, markup: markupAmount } = payload;\n      markupByPrototype(prototypeId, markupAmount);\n    }\n  }\n}());\n\nexport default storeInventory;","export const SET_DAY = \"SET_DAY\";\nexport const SET_GAME_STATE = \"SET_GAME_STATE\";\nexport const SET_STORE_NAME = \"SET_STORE_NAME\";\nexport const SET_STORE_GOLD = \"SET_STORE_GOLD\";\nexport const SET_UPDATES = \"SET_UPDATES\";\nexport const SET_STORE_UPDATE = \"SET_STORE_UPDATE\";\nexport const SET_STORE_INVENTORY = \"SET_STORE_INVENTORY\";\nexport const FETCH_USER = \"FETCH_USER\";\nexport const SET_SUPPLIERS = \"SET_SUPPLIERS\";\nexport const SET_SUPPLY_READY = \"SET_SUPPLY_READY\";\nexport const SET_SUPPLY_SPAWNED = \"SET_SUPPLY_SPAWNED\";\nexport const SET_STORE_FILTER = \"SET_STORE_FILTER\";\nexport const SET_STORE_FILTER_ACTIVE = \"SET_STORE_FILTER_ACTIVE\";\nexport const SET_STORE_UPDATE_STATUS = \"SET_STORE_UPDATE_STATUS\";\nexport const SET_PROFILE_ACTIVE =\"SET_PROFILE_ACTIVE\";\nexport const SET_IS_FULLSCREEN = \"SET_IS_FULLSCREEN\";\nexport const SET_IS_PC = \"SET_IS_PC\";\nexport const SET_IS_MOBILE = \"SET_IS_MOBILE\";\nexport const SET_MOBILE_SCREEN = \"SET_MOBILE_SCREEN\";\nexport const SET_SUPPLIERS_INITIALIZED = \"SET_SUPPLIERS_INITIALIZED\";\nexport const SET_MOBILE_DROPDOWN = \"SET_MOBILE_DROPDOWN\";\nexport const SET_STORE_MOBILE_DETAIL = \"SET_STORE_MOBILE_DETAIL\";\nexport const SET_STORE_MOBILE_DETAIL_ITEM = \"SET_STORE_MOBILE_DETAIL_ITEM\";\nexport const SET_ADVENTURERS = \"SET_ADVENTURERS\";\nexport const SET_PC_DETAIL = \"SET_PC_DETAIL\";\nexport const SET_PC_DROPDOWN = \"SET_PC_DROPDOWN\";\nexport const SET_DETAIL_ID = \"SET_DETAIL_ID\";\nexport const SET_DETAIL_UPDATE = \"SET_DETAIL_UPDATE\";\nexport const SET_DUNGEON_LEVELS = \"SET_DUNGEON_LEVELS\";\nexport const SET_DUNGEON_LEVEL_EXPLORED = \"SET_DUNGEON_LEVEL_EXPLORED\";\nexport const SET_DUNGEON_ADVENTURERS = \"SET_DUNGEON_ADVENTURERS\";\nexport const SET_PARTIAL_ADVENTURERS = \"SET_PARTIAL_ADVENTURERS\";","import React from 'react';\nimport './Coin.css';\n\nclass Coin extends React.Component {\n  render() {\n    return (\n      <div className=\"coin-outer\">\n        <div className=\"coin-inner\"></div>\n      </div>\n    )\n  }\n}\n\nexport default Coin;","import React from 'react';\nimport './StoreInventory.css';\n\n// component imports\nimport Coin from '../Coin/Coin';\n\nimport { connect } from 'react-redux';\nimport { SET_STORE_INVENTORY,\n  SET_STORE_UPDATE_STATUS,\n  SET_STORE_MOBILE_DETAIL,\n  SET_STORE_MOBILE_DETAIL_ITEM } from '../../actions/types';\n\nimport gameInventory from '../../game_modules/storeInventory';\n// import storeItems from '../../game_modules/items';\n\nclass StoreInventory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      markup: 50\n    }\n    this.timer = undefined;\n    this.mobileMultiplier = 2;\n    this.delay = 200;\n    this.markupIntensity = 10;\n    this.valence = 1;\n    this.increaseMarkup = this.increaseMarkup.bind(this);\n    this.repeat = this.repeat.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.markupOut = this.markupOut.bind(this);\n    \n    this.handleMobileFocus = this.handleMobileFocus.bind(this);\n    this.handleOneIncrement = this.handleOneIncrement.bind(this);\n    this.handlePrototypeIncrement = this.handlePrototypeIncrement.bind(this);\n    this.getInventoryItems = this.getInventoryItems.bind(this);\n    this.getIncrementOneButtons = this.getIncrementOneButtons.bind(this);\n    this.getIncrementAllButtons = this.getIncrementAllButtons.bind(this);\n  }\n\n  componentDidMount() {\n    const newInventory = JSON.parse(JSON.stringify(gameInventory.getStoreInventory()));\n    this.props.setInventory(newInventory);\n  }\n\n  increaseMarkup() {\n    this.setState({\n      markup: this.state.markup + this.markupIntensity\n    });\n  }\n\n  onMouseDown(payload) {\n    const { e } = payload;\n    let id = null, prototypeId = null;\n    if (payload.id !== null) {\n      id = payload.id;\n    }\n    if (payload.prototypeId !== null) {\n      prototypeId = payload.prototypeId;\n    }\n    const refBtnClasses = e.target.classList;\n    if (refBtnClasses.contains(\"decreaseOne\") ||\n      refBtnClasses.contains(\"minusOne\") ||\n      refBtnClasses.contains(\"decreaseProto\") ||\n      refBtnClasses.contains(\"minusProto\")) {\n        this.valence = -1;\n    }\n    if (refBtnClasses.contains(\"increaseOne\") ||\n      refBtnClasses.contains(\"plusOne\") ||\n      refBtnClasses.contains(\"increaseProto\") ||\n      refBtnClasses.contains(\"plusProto\")) {\n        this.valence = 1;\n    }\n    const repeatPayload = {\n      id: id,\n      prototypeId: prototypeId\n    }\n    this.repeat(repeatPayload);\n  }\n\n  repeat(payload) {\n    let { id, prototypeId } = payload;\n    const repeatPayload = {\n      id: id,\n      prototypeId: prototypeId\n    }\n    this.increaseMarkup();\n    if (id !== undefined) {\n      this.handleOneIncrement(id);\n    }\n    if (prototypeId !== undefined) {\n      this.handlePrototypeIncrement(prototypeId);\n    }\n    let totaldelay = this.delay * this.mobileMultiplier;\n    if (this.mobileMultiplier > 1) {\n      this.mobileMultiplier = 1;\n    }\n    this.timer = setTimeout(() => this.repeat(repeatPayload), totaldelay);\n    this.markupIntensity += 5;\n  }\n\n  onMouseUp() {\n    clearTimeout(this.timer);\n    this.markupIntensity = 10;\n    this.valence = 1;\n    this.mobileMultiplier = 2;\n    this.markupOut();\n  }\n\n  markupOut() {\n    this.setState({\n      markup: 50\n    });\n  }\n\n  handleOneIncrement(id) {\n    const posNeg = this.valence;\n    const itemPayload = {\n      id: id,\n      markup: (this.state.markup * posNeg)\n    }\n    gameInventory.markupStoreItem(itemPayload);\n    this.props.toggleStoreUpdateStatus();\n  }\n\n  handlePrototypeIncrement(prototypeId) {\n    const posNeg = this.valence;\n    const itemsPayload = {\n      prototypeId: prototypeId,\n      markup: (this.state.markup * posNeg)\n    }\n    gameInventory.markupPrototypes(itemsPayload);\n    this.props.toggleStoreUpdateStatus();\n  }\n\n  getIncrementOneButtons(id) {\n    if (this.props.isPc) {\n      return (\n        <div className=\"incrementButtons incrementOneSet\">\n          <div className=\"decreaseOne incrementButton button secondary\"\n            onMouseDown={(e) => this.onMouseDown({ id: id, e: e })}\n            onMouseUp={this.onMouseUp}>\n            <span className=\"incrementIcon minusOne\">-</span>\n          </div>\n          <div className=\"increaseOne incrementButton button secondary\"\n            onMouseDown={(e) => this.onMouseDown({ id: id, e: e })}\n            onMouseUp={this.onMouseUp}>\n            <span className=\"incrementIcon plusOne\">+</span>\n          </div>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"incrementButtons incrementOneSet\">\n          <div className=\"decreaseOne incrementButton button secondary\"\n            onTouchStart={(e) => this.onMouseDown({ id: id, e: e })}\n            onTouchEnd={this.onMouseUp}>\n            <span className=\"incrementIcon minusOne\">-</span>\n          </div>\n          <div className=\"increaseOne incrementButton button secondary\"\n            onTouchStart={(e) => this.onMouseDown({ id: id, e: e })}\n            onTouchEnd={this.onMouseUp}>\n            <span className=\"incrementIcon plusOne\">+</span>\n          </div>\n        </div>\n      )\n    }\n    \n  }\n\n  getIncrementAllButtons(prototypeId) {\n    if (this.props.isPc) {\n      return (\n        <div className=\"incrementButtons incrementAllSet\">\n          <div className=\"decreaseProto incrementButtonWide button secondary\"\n            onMouseDown={(e) => this.onMouseDown({ prototypeId: prototypeId, e: e })}\n            onMouseUp={this.onMouseUp}>\n            <span className=\"incrementIcon minusProto\">--</span>\n          </div>\n          <div className=\"increaseProto incrementButtonWide button secondary\"\n            onMouseDown={(e) => this.onMouseDown({ prototypeId: prototypeId, e: e })}\n            onMouseUp={this.onMouseUp}>\n            <span className=\"incrementIcon plusProto\">++</span>\n          </div>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"incrementButtons incrementAllSet\">\n          <div className=\"decreaseProto incrementButtonWide button secondary\"\n            onTouchStart={(e) => this.onMouseDown({ prototypeId: prototypeId, e: e })}\n            onTouchEnd={this.onMouseUp}>\n            <span className=\"incrementIcon minusProto\">--</span>\n          </div>\n          <div className=\"increaseProto incrementButtonWide button secondary\"\n            onTouchStart={(e) => this.onMouseDown({ prototypeId: prototypeId, e: e })}\n            onTouchEnd={this.onMouseUp}>\n            <span className=\"incrementIcon plusProto\">++</span>\n          </div>\n        </div>\n      )\n    }\n    \n  }\n\n  handleMobileFocus(item) {\n    let mobileItem;\n    if (this.props.mobileItemDetail) {\n      mobileItem = this.props.mobileItemDetail;\n    }\n    if (this.props.mobileItemDetail && this.props.mobileDetail && mobileItem.id === item.id) {\n      this.props.setStoreMobileDetail(false);\n      this.props.setStoreMobileDetailItem(null);\n      window.inventory = undefined;\n    } else {\n      this.props.setStoreMobileDetail(true);\n      this.props.setStoreMobileDetailItem(item);\n      window.inventory = this;\n    }\n  }\n\n  getInventoryItems() {\n    if (this.props.inventory && this.props.inventory.length > 0) {\n      let filteredInventory;\n      if (!this.props.filterActive || this.props.storeFilter === 'all') {\n        filteredInventory = gameInventory.getComposedInventory();\n      } else {\n        filteredInventory = gameInventory.getFilteredInventory(this.props.storeFilter);\n      }\n      return (\n        <div>{filteredInventory.map(item => {\n          const composedPrice = Math.floor(item.value * (1 + (item.markup / 1000)));\n          let itemClass = \"InventoryItem itemBackground\";\n          if (this.props.mobileDetail && item.id === this.props.mobileItemDetail.id) {\n            itemClass += \" activeMobileItem\";\n          }\n          return (\n            <div className={itemClass} \n              key={item.id}\n              onTouchStart={() => this.handleMobileFocus(item)}>\n              <span className=\"InventoryItemName\">{item.name}</span>\n              {this.props.isPc ? this.getIncrementOneButtons(item.id) : ''}\n              {this.props.isPc ? this.getIncrementAllButtons(item.prototypeId) : ''}\n              <div className=\"ItemValueGroup\">\n                <span className=\"InventoryItemValue\"><span className=\"CoinSymbol\"><Coin /> </span>{composedPrice}</span>\n              </div>\n              \n            </div>\n          )\n        })}</div>\n      )     \n    } else {\n      return (\n        <div></div>\n      )\n    }\n  }\n  \n  render() {\n    return (\n      <div className=\"StoreInventory primary\">\n        {this.getInventoryItems()}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    inventory: state.storeState.inventory,\n    inventoryCount: state.storeState.inventoryCount,\n    filterActive: state.storeState.filterActive,\n    storeFilter: state.storeState.filter,\n    storeNeedsUpdate: state.storeState.needsUpdate,\n    isMobile: state.app.isMobile,\n    isPc: state.app.isPc,\n    mobileDetail: state.storeState.mobileDetail,\n    mobileItemDetail: state.storeState.mobileItemDetail\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setInventory: (newInventory) => dispatch({ type: SET_STORE_INVENTORY, inventory: newInventory }),\n    toggleStoreUpdateStatus: () => dispatch({ type: SET_STORE_UPDATE_STATUS }),\n    setStoreMobileDetail: (detail) => dispatch({ type: SET_STORE_MOBILE_DETAIL, detail: detail }),\n    setStoreMobileDetailItem: (itemDetail) => dispatch({ type: SET_STORE_MOBILE_DETAIL_ITEM, itemDetail: itemDetail })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StoreInventory);","// redux imports\nimport { store } from '../index';\nimport { SET_STORE_GOLD } from '../actions/types';\n\nconst gameStore = (function(){\n  let name = '';\n\n  const startingGold = 1000;\n  let gold = startingGold;\n\n  const dispatchStoreGold = function() {\n    const payload = {\n      type: SET_STORE_GOLD,\n      amount: gold\n    }\n    store.dispatch(payload);\n  }\n  \n  return {\n    chargeGold: function(amount) {\n      if (gold < amount) {\n        console.log('attempted to charge more gold than vendor owns')\n        return false;\n      }\n      gold -= amount;\n    },\n    creditGold: function(amount) {\n      gold += amount;\n    },\n    getName: function() {\n      return name;\n    },\n    setName: function(newName) {\n      name = newName;\n    },\n    getStartingGold: function() {\n      return startingGold;\n    },\n    getGold: function() {\n      return gold;\n    },\n    setGold: function(newGold) {\n      gold = newGold;\n    },\n    updateGold: function() {\n      dispatchStoreGold();\n    }\n  }\n}());\n\nexport default gameStore;","const days = (function (){\n  const startDay = 1;\n  let day = startDay;\n\n  return {\n    getDay: function() {\n      return day;\n    },\n\n    setDay: function(newDay) {\n      if (typeof newDay !== \"number\") {\n        console.log(\"trying to set day to a non number value!\");\n        return;\n      }\n      day = newDay;\n    },\n\n    resetDay: function() {\n      day = startDay;\n    }\n  }\n}());\n\nexport default days;","import ItemTypes from '../Utilities/itemTypes';\nimport Items from './items';\n\n// redux imports\nimport { store } from '../index';\nimport { SET_SUPPLY_READY, SET_SUPPLY_SPAWNED } from '../actions/types';\n\nconst supplies = (function(){\n  let supplies = [];\n\n  let suppliesPool = {};\n  let supplyLevel = 1;\n\n  const itemTypesArr = Object.values(ItemTypes);\n  const itemTypeCount = itemTypesArr.length;\n  let itemSpawnCount = 0;\n\n  const dailySupplies = 10;\n\n  const dispatchReady = function(value) {\n    const payload = {\n      type: SET_SUPPLY_READY,\n      value: value\n    }\n    store.dispatch(payload);\n  }\n\n  const dispatchSpawned = function(value) {\n    const payload = {\n      type: SET_SUPPLY_SPAWNED,\n      value: value\n    }\n    store.dispatch(payload);\n  }\n\n  // fill supply pool\n  const fetchSupplyPool = function() {\n    // produce array of type strings and choose one at random\n    itemSpawnCount = 0;\n    itemTypesArr.forEach(typeItem => {\n      if (suppliesPool[typeItem] == null) {\n        suppliesPool[typeItem] = [];\n      }\n      suppliesPool[typeItem].length = 0;\n    });\n\n    getItemForSupplyPool();\n    return true;\n  }\n\n  // fetch an item from backend\n  const fetchItemArrForSupplyPool = async function() {\n    let lvl = supplyLevel;\n    if (!lvl) return;\n\n    let typeToFetch = itemTypesArr[itemSpawnCount];\n\n    if (typeToFetch !== 'armor') {\n      typeToFetch += 's';\n    }\n\n    const minLvl = 1;\n    const maxLvl = lvl;\n\n    const fetchURL = `/${typeToFetch}-in-level-range?min-level=${minLvl}&max-level=${maxLvl}`;\n    \n    let possibleItems;\n    try {\n      possibleItems = await fetch(fetchURL);\n    } catch (err) {\n      console.log(err);\n    }\n\n    if (possibleItems) {\n      possibleItems = possibleItems.json();\n    }\n\n    return possibleItems;\n  }\n\n  // take an item that was fetched from backend and create it\n  // with item constructors and put it into state\n  const getItemForSupplyPool = function() {\n    if (itemSpawnCount >= itemTypeCount) {\n      return;\n    }\n    let newItems;\n    fetchItemArrForSupplyPool()\n      .then(itemsOfLevel => {\n        newItems = itemsOfLevel.filter(item => item.item.rarity === 1000);\n      \n        // initialize field on pool if need be\n        if (suppliesPool[itemTypesArr[itemSpawnCount]] === null) {\n          suppliesPool[itemTypesArr[itemSpawnCount]] = [];\n        }\n        // push item id into supplies\n        suppliesPool[itemTypesArr[itemSpawnCount]].push(newItems);\n\n        itemSpawnCount++;\n        if (itemSpawnCount === itemTypeCount) {\n          dispatchSpawned(true);\n        }\n        getItemForSupplyPool();\n        return true;\n      }).catch(err => console.log(err));\n  }\n\n  const spawnSupply = function() {\n    // produce array of type strings and choose one at random\n    let typeIndex = Math.floor(Math.random() * itemTypesArr.length);\n    let typeToSpawn = itemTypesArr[typeIndex];\n    const newSupplyArr = suppliesPool[typeToSpawn];\n    let randomChoice = Math.floor(Math.random() * newSupplyArr.length);\n    let newItem = newSupplyArr[randomChoice];\n\n    if (Array.isArray(newItem)) {\n      newItem = newItem[0];\n    }\n\n    // compose payload for Item constructor\n    // let itemPayload = {};\n    // itemPayload.level = newItem.level;\n    // switch(newItem.item.type) {\n    //   case ItemTypes.potion:\n    //     itemPayload.type = newItem.type;\n    //     break;\n    //   case ItemTypes.weapon:\n    //     itemPayload.damage = newItem.damage;\n    //     break;\n    //   case ItemTypes.armor:\n    //     itemPayload.armor = newItem.armor;\n    //     break;\n    //   default:\n    //     break;\n    // }\n    // let payload = {};\n    // payload.itemPayload = itemPayload;\n    // payload.type = newItem.item.type;\n    // payload.name = newItem.item.name;\n    // payload.value = newItem.item.value;\n    // payload.prototypeId = newItem.item.id;\n    // payload.rarity = newItem.item.rarity;\n    let payload = Items.composePayloadFromProto(newItem);\n\n    // create item and add to total inventory in Items module\n    let itemId = Items.createItem(payload);\n    supplies.push(itemId);\n\n  }\n  \n  return {\n    getSupplies: function() {\n      return supplies;\n    },\n    fillSupplies: function() {\n      for (let i = 0; i < dailySupplies; i++) {\n        spawnSupply();\n      }\n      dispatchReady(true);\n    },\n    fillSupplyPool: function() {\n      fetchSupplyPool();\n    },\n    depleteSupply: function(id) {\n      let supplyIndex = supplies.indexOf(id);\n      if (supplyIndex >= 0) {\n        let chosenSupply = supplies.splice(supplyIndex, 1);\n        return chosenSupply;\n      }\n    },\n    setSupplyLevel: function(lvl) {\n      supplyLevel = lvl;\n    }\n  }\n}());\n\nexport default supplies;","const fetcher = (function(){\n  return {\n    fetchRoute: async function(routeName) {\n      let response;\n      try {\n        response = await fetch(`/${routeName}`);\n      } catch (err) {\n        console.log(err);\n      }\n      if (response) {\n        response = response.json();\n      }\n      return response;\n    }\n  }\n}());\n\nexport default fetcher;","// game imports\nimport supplies from './supplies';\nimport items from './items';\n\n// utility imports\nimport fetcher from '../Utilities/fetcher';\n\n// redux imports\nimport { store } from '../index';\nimport { SET_SUPPLIERS, SET_SUPPLY_READY } from '../actions/types';\n\nconst suppliers = (function(){\n\n  let suppliers = [];\n\n  let currentId = 0;\n\n  const startingGold = 1000;\n  const supplierIncome = 100;\n\n  const Supplier = function(payload) {\n    const { name, offerings } = payload;\n    this.name = name;\n    this.offerings = offerings;\n    this.inventory = [];\n    this.id = currentId;\n    currentId++;\n  }\n\n  Supplier.prototype.rankFavorites = function() {\n    let bestOfferings = [];\n    const offeringsCount = this.offerings.length;\n    for (let i = 0; i < offeringsCount; i++) {\n      bestOfferings.push(this.offerings[i]);\n    }\n    bestOfferings.sort((off1, off2) => {\n      return off1.markup - off2.markup;\n    });\n    this.rankedOfferings = bestOfferings;\n  }\n\n  Supplier.prototype.sellItem = function(payload) {\n    let { id, price } = payload;\n\n    const itemIndex = this.inventory.indexOf(id);\n    if (!itemIndex && itemIndex !== 0) {\n      return false;\n    }\n\n    this.inventory.splice(itemIndex, 1);\n    this.gold += price;\n\n    return true;\n  }\n\n  Supplier.prototype.takeIncome = function() {\n    this.gold += supplierIncome;\n  }\n\n  const dispatchSuppliers = function(newSuppliers) {\n    const payload = {\n      type: SET_SUPPLIERS,\n      payload: newSuppliers\n    }\n    store.dispatch(payload);\n  }\n\n  const dispatchSupplyReady = function(value) {\n    const payload = {\n      type: SET_SUPPLY_READY,\n      value: value\n    }\n    store.dispatch(payload);\n  }\n\n  const fetchSuppliers = async function() {\n    let initSuppliers = fetcher.fetchRoute('suppliers');\n      // try {\n      //   initSuppliers = await fetch('/suppliers');\n      // } catch (err) {\n      //   console.log(err);\n      // }\n      // if (initSuppliers) {\n      //   initSuppliers = initSuppliers.json();\n      // }\n      return initSuppliers;\n  }\n\n  const getSuppliers = function*() {\n    yield fetchSuppliers();\n  }\n\n  const takeSupplies = function() {\n    // copy supplies to local array\n    const remainingSupplies = JSON.parse(JSON.stringify(supplies.getSupplies()));\n    let supplyTypes = [];\n    let supplyValues = [];\n    remainingSupplies.forEach(remainingSupply => {\n      const supplyItem = items.getItem(remainingSupply);\n      supplyTypes.push(supplyItem.type);\n      supplyValues.push(supplyItem.value);\n    });\n    let currentSupplier = 0;\n    const supplierCount = suppliers.length;\n    // loop through each supply item\n    remainingSupplies.forEach((remSupply, remNum) => {\n      // create an order based on last supplier to take an\n      // item and proceeded sequentially to include all\n      // suppliers\n      let supplierTries = [];\n      for (let i = 0; i < supplierCount; i++) {\n        let thisIndex = currentSupplier + i;\n        if (thisIndex >= supplierCount) {\n          thisIndex -= supplierCount;\n        }\n        supplierTries.push(thisIndex);\n      }\n      let taken = false;\n      \n      // check with each supplier if type of current supply is\n      // in their offerings\n      supplierTries.forEach(supplierIndex => {\n        let favorites = suppliers[supplierIndex].rankedOfferings;\n        for (let fave of favorites) {\n          // if type of supplier's offering equals type of this supply\n          if (fave.type === supplyTypes[remNum]) {\n            if (!taken && suppliers[supplierIndex].gold >= supplyValues[remNum]) {\n              // if supplier inventory not initialized, set to empty array\n              if (suppliers[supplierIndex].inventory === null) {\n                suppliers[supplierIndex].inventory = [];\n              }\n\n              // remove item from supply\n              let thisSupply = supplies.depleteSupply(remSupply);\n              if (Array.isArray(thisSupply)) {\n                thisSupply = thisSupply[0];\n              }\n\n              suppliers[supplierIndex].gold -= supplyValues[remNum];\n\n              // put item in supplier's inventory\n              suppliers[supplierIndex].inventory.push(thisSupply);\n\n              // mark item taken;\n              taken = true;\n              currentSupplier = supplierIndex + 1;\n              if (currentSupplier > supplierCount) {\n                currentSupplier = 0;\n              }\n            }\n          }\n        }\n      });\n    });\n  }\n\n  return {\n    initializeSuppliers: async function(maxSuppliers) {\n      const gGetSuppliers = getSuppliers();\n      gGetSuppliers.next().value\n        .then(initSuppliers => {\n          if (initSuppliers) {\n            let drainSuppliers = initSuppliers;\n            while (suppliers.length < maxSuppliers && drainSuppliers.length > 0) {\n              const pushIndex = Math.floor(Math.random() * drainSuppliers.length);\n              let newSupplier = drainSuppliers.splice(pushIndex, 1);\n              newSupplier = newSupplier[0];\n              const supplierPayload = { name: newSupplier.name, offerings: newSupplier.offerings };\n              let thisSupplier = new Supplier(supplierPayload);\n              thisSupplier.gold = startingGold;\n              suppliers.push(thisSupplier);\n            }\n            suppliers.forEach(supplier => supplier.rankFavorites());\n            dispatchSuppliers(suppliers);\n            return suppliers;\n          }\n        });\n    },\n    getSuppliers: function() {\n      return suppliers;\n    },\n    takeSupplierTurn: function() {\n      takeSupplies();\n      dispatchSuppliers(suppliers);\n      dispatchSupplyReady(false);\n    },\n    sellItem: function (payload) {\n      const { id, itemId, price} = payload;\n      \n      const thisSupplier = suppliers.find(refSupplier => refSupplier.id === id);\n      if (!thisSupplier) {\n        return false;\n      }\n      const sellPayload = {\n        id: itemId,\n        price: price\n      }\n\n      const resSale = thisSupplier.sellItem(sellPayload);\n      if (!resSale) {\n        return false;\n      }\n      return true;\n    },\n    takeSupplierIncomeTurns: function() {\n      if (suppliers.length < 1) return;\n      suppliers.forEach(supplier => {\n        supplier.takeIncome();\n      })\n    },\n    updateSuppliers: function() {\n      dispatchSuppliers(suppliers);\n    }\n  }\n}());\n\nexport default suppliers;","import axios from 'axios';\nimport { FETCH_USER, \n  SET_STORE_GOLD, \n  SET_DAY, \n  SET_SUPPLIERS, \n  SET_STORE_NAME\n } from './types';\n\n// game imports\nimport gameStore from '../game_modules/store';\nimport days from '../game_modules/days';\nimport suppliers from '../game_modules/suppliers';\n\nexport const fetchUser = () => async dispatch => {\n  const res = await axios.get('/api/current_user');\n  dispatch({ type: FETCH_USER, payload: res.data });\n  if (res.data && res.data.import_nickname) {\n    dispatch({ type: SET_STORE_NAME, name: res.data.nickname});\n  }\n};\n\nexport const fetchGold = () => async dispatch => {\n  const gold = await gameStore.getGold();\n  dispatch({ type: SET_STORE_GOLD, amount: gold });\n}\n\nexport const fetchDay = () => async dispatch => {\n  const day = await days.getDay();\n  dispatch({ type: SET_DAY, day: day });\n}\n\nexport const fetchSuppliers = () => async dispatch => {\n  const newSuppliers = await suppliers.getSuppliers();\n  dispatch({ type: SET_SUPPLIERS, payload: newSuppliers });\n}\n","import React from 'react';\nimport './Store.css';\n\n// import game modules\n// import gameStore from '../../game_modules/store';\nimport gameInventory from '../../game_modules/storeInventory';\n\n// import components\nimport ItemTypes from '../../Utilities/itemTypes';\nimport StoreInventory from '../StoreInventory/StoreInventory';\nimport Coin from '../Coin/Coin';\n\n// redux imports\nimport { SET_STORE_GOLD,\n  SET_STORE_FILTER, \n  SET_STORE_FILTER_ACTIVE,\n  SET_STORE_UPDATE_STATUS } from '../../actions/types';\nimport { fetchGold } from '../../actions';\nimport { connect } from 'react-redux';\n\n\nclass Store extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      markup: 50\n    }\n    this.timer = undefined;\n    this.delay = 200;\n    this.mobileMultiplier = 2;\n    this.markupIntensity = 10;\n    this.valence = 1;\n    this.increaseMarkup = this.increaseMarkup.bind(this);\n    this.repeat = this.repeat.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.markupOut = this.markupOut.bind(this);\n\n    this.getMobileDetail = this.getMobileDetail.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.toggleFilter = this.toggleFilter.bind(this);\n    this.getFilter = this.getFilter.bind(this);\n    this.handleFilter = this.handleFilter.bind(this);\n    this.getIncrementButtons = this.getIncrementButtons.bind(this);\n    this.handleIncrease = this.handleIncrease.bind(this);\n    this.handleDecrease = this.handleDecrease.bind(this);\n  }\n\n  // ~*~~*~~*~*~~*~~*~*~~*~~*~*~~*~~*~*~~*~~*~*\n  // ~~*~~*~*~~* lifecycle methods ~~*~~*~*~~*~\n  // ~*~~*~~*~*~~*~~*~*~~*~~*~*~~*~~*~*~~*~~*~*\n  \n  componentDidMount() {\n    this.props.fetchGold();\n  }\n\n  handleFilter(e) {\n    let currentType = e.target.value;\n    this.props.setStoreFilter(currentType);\n  }\n\n  increaseMarkup() {\n    this.setState({ \n      markup: this.state.markup + this.markupIntensity\n    });\n  }\n\n  // Proccess mousedown event to start incremental markup\n  onMouseDown(e) {\n    const refBtn = e.target;\n    if (refBtn.classList.contains(\"decreaseAll\") ||\n      refBtn.classList.contains(\"minus\")) {\n      this.valence = -1;\n    }\n    if (refBtn.classList.contains(\"increaseAll\" ||\n      refBtn.classList.contains(\"plus\"))) {\n      this.valence = 1;\n    }\n    this.repeat();\n  }\n\n  repeat() {\n    this.increaseMarkup();\n    if (this.valence === -1) {\n      this.handleDecrease();\n    }\n    if (this.valence === 1) {\n      this.handleIncrease();\n    }\n    let totalDelay = this.delay;\n    if (!this.props.pc) {\n      totalDelay *= this.mobileMultiplier;\n    } \n    if (this.mobileMultiplier > 1) {\n      this.mobileMultiplier = 1;\n    }\n    this.timer = setTimeout(this.repeat, totalDelay);\n    this.markupIntensity += 5;\n  }\n\n  onMouseUp() {\n    clearTimeout(this.timer);\n    this.markupIntensity = 10;\n    this.valence = 1;\n    this.mobileMultiplier = 2;\n    this.markupOut();\n  }\n\n  markupOut() {\n    this.setState({\n      markup: 50\n    });\n  }\n\n  handleIncrease() {\n    const payload = {\n      filter: this.props.storeFilter,\n      markup: this.state.markup\n    }\n    gameInventory.markupFilteredStoreItems(payload);\n    gameInventory.updateStoreInventory();\n    this.props.toggleStoreUpdateStatus();\n  }\n\n  handleDecrease() {\n    const payload = {\n      filter: this.props.storeFilter,\n      markup: (this.state.markup * -1)\n    }\n    gameInventory.markupFilteredStoreItems(payload);\n    gameInventory.updateStoreInventory();\n    this.props.toggleStoreUpdateStatus();\n  }\n\n  getIncrementButtons() {\n    if (!this.props.filterActive) return '';\n    if (this.props.isPc) {\n      return (\n        <div className=\"incrementButtons\">\n          <div className=\"decreaseAll incrementButton button\"\n            onMouseDown={this.onMouseDown} onMouseUp={this.onMouseUp}>\n            <span className=\"incrementIcon minus\">-</span>\n          </div>\n          <div className=\"increaseAll incrementButton button\"\n            onMouseDown={this.onMouseDown} onMouseUp={this.onMouseUp}>\n            <span className=\"incrementIcon plus\">+</span>\n          </div>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"incrementButtons\">\n          <div className=\"decreaseAll incrementButton button\"\n            onTouchStart={this.onMouseDown} onTouchEnd={this.onMouseUp}>\n            <span className=\"incrementIcon minus\">-</span>\n          </div>\n          <div className=\"increaseAll incrementButton button\"\n            onTouchStart={this.onMouseDown} onTouchEnd={this.onMouseUp}>\n            <span className=\"incrementIcon plus\">+</span>\n          </div>\n        </div>\n      )\n    }\n    \n  }\n\n  getFilter() {\n    if (!this.props.filterActive) return '';\n    const itemTypesArr = Object.values(ItemTypes);\n    return (\n      <select className=\"StoreItemTypeFilter\" \n        defaultValue={this.props.storeFilter}\n        onChange={this.handleFilter}>\n        <option value=\"all\">all</option>\n        {itemTypesArr.map(itemType => {\n          return (\n            <option value={itemType}>{itemType}</option>\n          )\n        })}\n      </select>\n    )\n  }\n\n  toggleFilter() {\n    const newValue = !this.props.filterActive;\n    if (newValue && this.props.mobileDetail) {\n      const inventoryComponent = window.inventory;\n      inventoryComponent.handleMobileFocus(this.props.mobileItemDetail);\n    }\n    this.props.setStoreFilterActive(newValue);\n  }\n\n  getMobileDetail() {\n    if (this.props.isPc) {\n      return '';\n    }\n    if (this.props.filterActive && !this.props.mobileDetail) {\n      return (\n        <div className=\"MobileDetailContainer mobileDetailActive\">\n          {this.getIncrementButtons()}\n          {this.getFilter()}\n        </div>\n      )\n    }\n    if (this.props.mobileDetail) {\n      const inventoryComponent = window.inventory;\n      return (\n        <div className=\"MobileDetailContainer mobileDetailActive primary-surface\">\n          <div className=\"itemDetailName\">{this.props.mobileItemDetail.name}</div>\n          {inventoryComponent.getIncrementOneButtons(this.props.mobileItemDetail.id)}\n          {inventoryComponent.getIncrementAllButtons(this.props.mobileItemDetail.prototypeId)}\n        </div>\n      )\n    }\n    return (\n      <div className=\"MobileDetailContainer\"></div>\n    );\n  }\n  \n  render() {\n    return (\n      <div className=\"Store\">\n        <div className=\"StoreMenuBar darkgrey\">\n          <h2 className=\"StoreName\">{this.props.storeName}</h2>\n          <div className=\"FilterGroup\">\n            {this.props.isPc ? this.getIncrementButtons() : ''}\n            {this.props.isPc ? this.getFilter() : ''}\n          </div>\n          <span className=\"Inspect\" role=\"img\" aria-label=\"inspect\" onClick={this.toggleFilter}>&#128269; </span>\n          <div className=\"GoldDisplay\">\n            <div className=\"StoreGold\"><span className=\"CoinSymbol\" role=\"img\" aria-label=\"coin\"><Coin /> </span>{this.props.gold}</div>\n          </div>\n        </div>\n        <StoreInventory />\n        {this.getMobileDetail()}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    storeName: state.storeState.name,\n    gold: state.storeState.gold,\n    filterActive: state.storeState.filterActive,\n    storeFilter: state.storeState.filter,\n    storeNeedsUpdate: state.storeState.needsUpdate,\n    isMobile: state.app.isMobile,\n    isPc: state.app.isPc,\n    mobileDetail: state.storeState.mobileDetail,\n    mobileItemDetail: state.storeState.mobileItemDetail\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setStoreGold: (newGold) => dispatch({ type: SET_STORE_GOLD, amount: newGold }),\n    fetchGold: () => dispatch(fetchGold()),\n    setStoreFilter: (filter) => dispatch({ type: SET_STORE_FILTER, filter: filter }),\n    setStoreFilterActive: (value) => dispatch({ type: SET_STORE_FILTER_ACTIVE, value: value }),\n    toggleStoreUpdateStatus: () => dispatch({ type: SET_STORE_UPDATE_STATUS })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Store);","import React from 'react';\nimport './SupplierBuyButton.css';\n\nclass SupplierBuyButton extends React.Component {\n  render() {\n    return (\n      <div className=\"SupplierBuyButton button secondary\">\n        <div className=\"supplierBuyButtonIcon\">\n          buy\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default SupplierBuyButton;","import React from 'react';\nimport './Supplier.css';\n\nimport SupplierBuyButton from '../SupplierBuyButton/SupplierBuyButton';\nimport Coin from '../Coin/Coin';\n\n// game module imports\nimport gameItems from '../../game_modules/items';\nimport gameSuppliers from '../../game_modules/suppliers'\nimport gameStore from '../../game_modules/store';\nimport gameStoreInventory from '../../game_modules/storeInventory';\n\n// redux imports\nimport { connect } from 'react-redux';\n\nclass Supplier extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getSuppllierInventory = this.getSuppllierInventory.bind(this);\n    this.handlePurchase = this.handlePurchase.bind(this);\n  }\n\n  handlePurchase(payload) {\n    const { ids, price } = payload;\n\n    if (price > this.props.storeGold) {\n      return;\n    }\n\n    // sell first item of object\n    const sellId = ids[0];\n    const sellPayload = {\n      id: this.props.supplier.id,\n      itemId: sellId,\n      price: price\n    }\n    let sellRes = gameSuppliers.sellItem(sellPayload);\n    if (!sellRes) {\n      return;\n    }\n\n    // transact sale for vendor\n    gameStore.chargeGold(price);\n    gameStoreInventory.addItem(sellId);\n\n    // update state\n    gameStore.updateGold();\n    gameStoreInventory.updateStoreInventory();\n    gameSuppliers.updateSuppliers();\n\n  }\n\n  getSuppllierInventory() {\n    if (!this.props.initialized) {\n      return ''\n    }\n    // get details on items from ids\n    let thisInventory = [];\n    this.props.supplier.inventory.forEach(id => {\n      let inventoryItem = gameItems.getItem(id);\n      thisInventory.push(inventoryItem);\n    });\n\n    // organize all items by item name\n    let inventoryGroups = {};\n    let valueGroups = {}\n    let typeGroups = {}\n    let idGroups = {}\n    thisInventory.forEach(item => {\n      if (!inventoryGroups[item.name]) {\n        inventoryGroups[item.name] = 1;\n        valueGroups[item.name] = item.value;\n        typeGroups[item.name] = item.type;\n        idGroups[item.name] = [item.id]\n      } else {\n        inventoryGroups[item.name] += 1;\n        idGroups[item.name].push(item.id);\n      }\n    });\n\n    // create array of composed items\n    let composedItems = []\n    for (const [key, value] of Object.entries(inventoryGroups)) {\n      let item = { name: key, count: value, type: typeGroups[key], value: valueGroups[key], ids: idGroups[key] };\n      composedItems.push(item);\n    }\n\n    composedItems.sort((item1, item2) => {\n      const nameA = item1.name.toUpperCase();\n      const nameB = item2.name.toUpperCase();\n      if (nameA < nameB) {\n        return -1;\n      }\n\n      if (nameA > nameB) {\n        return 1;\n      }\n\n      return 0;\n    });\n\n    return composedItems.map(item => {\n      const offerings = this.props.supplier.offerings;\n      const typeIndex = offerings.findIndex(offering => offering.type === item.type);\n      \n      let composedValue = item.value;\n      if (typeIndex !== -1) {\n        composedValue = composedValue * (1 + (offerings[typeIndex].markup / 1000));\n        composedValue = Math.floor(composedValue);\n      }\n\n      return (\n        <div className=\"SupplierInventoryItem itemBackground\" key={item.id}>\n          <span className=\"SupplierInventoryItemName\">{item.name} ({item.count})</span>\n          <div className=\"SupplierItemsValueGroup\">  \n            <span className=\"CoinSymbol\"><Coin /> </span>\n            <span className=\"InventoryItemValue\">{composedValue}</span>\n          </div>\n          <div className=\"BuyButtonContainer\" onClick={() => this.handlePurchase({ ids: item.ids, price: composedValue })}>\n              <SupplierBuyButton />\n            </div>\n        </div>\n      )\n    })\n  }\n\n  render() {\n    let supplierClass = \"Supplier primary\";\n    if (this.props.isMobile) {\n      supplierClass += \" mobileSupplier\";\n    }\n    return (\n      <div className={supplierClass}>\n        <div className=\"SupplierName\">\n          {this.props.supplier.name}\n          <div className=\"SupplierValueGroup\">  \n            <span className=\"CoinSymbol\"><Coin /> </span>\n            <span className=\"InventoryItemValue\">{this.props.supplier.gold}</span>\n          </div>\n        </div>\n        <div className=\"supplierInventory primary-light\">\n          {this.getSuppllierInventory()}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    supplyReady: state.supplies.ready,\n    storeGold: state.storeState.gold,\n    isMobile: state.app.isMobile\n  }\n}\n\nexport default connect(mapStateToProps)(Supplier);","import React from 'react';\nimport './Suppliers.css';\nimport Supplier from '../Supplier/Supplier';\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_SUPPLIERS_INITIALIZED } from '../../actions/types';\n\n// game imports\nimport gameSupplier from '../../game_modules/suppliers';\nimport gameSupplies from '../../game_modules/supplies';\n// import suppliers from '../../game_modules/suppliers';\n\nclass Suppliers extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getSuppliers = this.getSuppliers.bind(this);\n    this.componentDidUpdate = this.componentDidUpdate.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.updateSuppliers = this.updateSuppliers.bind(this);\n  }\n\n  updateSuppliers() {\n    if (Array.isArray(this.props.suppliers) && this.props.supplySpawned) {\n      if (!this.props.supplyReady) {\n        gameSupplies.fillSupplies();\n      }\n    }\n    if (Array.isArray(this.props.suppliers) && this.props.supplyReady) {\n      if (!this.props.suppliersInitialized) {\n        gameSupplier.takeSupplierTurn();\n        this.props.setSuppliersInitialized(true);\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.updateSuppliers();\n  }\n\n  componentDidUpdate() {\n    this.updateSuppliers();\n  }\n\n  getSuppliers() {\n    if (this.props.detailUpdate) {\n      return '';\n    }\n    let supplierContainerClass = \"suppliersContainer\";\n    let spacerClass = \"spacer\";\n    if (!this.props.isPc) {\n      supplierContainerClass += \" nonPcContainer\";\n      supplierContainerClass += \" mobileContainer\";\n      spacerClass += \" mobileSpacer\";\n    }\n    let currentSuppliers = this.props.suppliers;\n    if (Array.isArray(currentSuppliers)) {\n      const suppliersDisplay = currentSuppliers.map(renderSupplier => {\n        return (<Supplier supplier={renderSupplier} initialized={this.props.suppliersInitialized}/>);\n      });\n\n      return (\n        <div className={supplierContainerClass}\n          ref={node => {\n            this.container = node;\n          }}>\n          {suppliersDisplay}\n          <div className={spacerClass}></div>\n        </div>\n      );\n    } else {\n      return 'no suppliers to render';\n    }\n    \n  }\n  \n  render() {\n    let suppliersClass = \"Suppliers primary-dark\";\n    if (!this.props.isPc) {\n      suppliersClass += \" mobileSuppliers\";\n    }\n    return (\n      <div className={suppliersClass}>\n        {this.getSuppliers()}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    suppliers: state.suppliers.suppliers,\n    supplyReady: state.supplies.ready,\n    supplySpawned: state.supplies.spawned,\n    isPc: state.app.isPc,\n    isMobile: state.app.isMobile,\n    suppliersInitialized: state.suppliers.initialized,\n    detailUpdate: state.detail.update\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setSuppliersInitialized: (value) => dispatch({ type: SET_SUPPLIERS_INITIALIZED, value: value })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Suppliers);","const gameConstants = {\n  maxSuppliers: 3,\n  startingAdventurers: 5,\n  dailyAdventurers: 1,\n  adventurerStartingGold: 400\n}\n\nexport default gameConstants;","const monsters = (function(){\n  let currentId = 0;\n\n  let monsters = [];\n  const specialCooldownTurns = 4;\n\n  const monsterDecisions = {\n    heal: 'heal',\n    defend: 'defend',\n    special: 'special',\n    attack: 'attack'\n  }\n\n  const Monster = function(payload) {\n    const {\n      protoId,\n      name,\n      boss,\n      level,\n      hp,\n      damage,\n      defense,\n      stealth,\n      initiative,\n      special,\n      heal,\n      experience,\n      dropList,\n      monsterBehavior\n    } = payload;\n    this.protoId = protoId;\n    this.name = name;\n    this.boss = boss;\n    this.level = level;\n    this.hp = hp;\n    this.maxHp = hp;\n    this.damage = damage;\n    this.defense = defense;\n    this.stealth = stealth;\n    this.initiative = initiative;\n    this.special = special;\n    this.heal = heal;\n    this.experience = experience;\n    this.dropList = dropList;\n    this.monsterBehavior = monsterBehavior;\n    this.id = currentId;\n    this.specialCooldown = specialCooldownTurns;\n    this.defending = false;\n    currentId++;\n  }\n\n  Monster.prototype.getInitiativeRoll = function() {\n    const initiativeFactor = ((this.initiative * .9) + (this.stealth * .3)) / 10;\n    return Math.random() * initiativeFactor;\n  }\n\n  Monster.prototype.takeTrapDamage = function(adventurerLevel) {\n    let trapDamage = Math.floor(3 * (Math.pow(1.25, (adventurerLevel - 1))));\n    if (trapDamage > this.hp) {\n      trapDamage = this.hp;\n    }\n    this.hp -= trapDamage;\n    return trapDamage;\n  }\n\n  Monster.prototype.checkNeedsHeal = function() {\n    const hpDifferential = this.maxHp - this.hp;\n    const percentLost = hpDifferential / this.maxHp;\n    const needHealing = percentLost > Math.random();\n    return needHealing;\n  }\n\n  Monster.prototype.checkUseHeal = function() {\n    let decisionFactor = (this.monsterBehavior.heal / 1000);\n    const useHeal = decisionFactor > Math.random();\n    return useHeal;\n  }\n\n  Monster.prototype.checkUseSpecial = function() {\n    let decisionFactor = (this.monsterBehavior.special_move / 1000);\n    const useSpecial = decisionFactor > Math.random();\n    return useSpecial;\n  }\n\n  Monster.prototype.checkDefend = function() {\n    if (this.defending) return false;\n    let decisionFactor = (this.monsterBehavior.defend / 1000);\n    const useDefend = decisionFactor > Math.random();\n    return useDefend;\n  }\n\n  Monster.prototype.checkBlockFlee = function() {\n    let decisionFactor = (this.monsterBehavior.flee / 1000);\n    const blockFlee = decisionFactor > Math.random();\n    return blockFlee;\n  }\n\n  Monster.prototype.getBattleDecision = function() {\n    let thisDecision = new MonsterDecision(this.id);\n    if (this.monsterBehavior.heal) {\n      thisDecision.needHealing = this.checkNeedsHeal();\n      thisDecision.useHeal = this.checkUseHeal();\n    }\n    if (this.monsterBehavior.special_move) {\n      thisDecision.useSpecial = this.checkUseSpecial();\n    }\n    thisDecision.defend = this.checkDefend();\n    const decided = thisDecision.weighDecisionTournament();\n    return decided;\n  }\n\n  Monster.prototype.takeBattleDamage = function(calculatedDamage) {\n    this.hp -= calculatedDamage;\n  }\n\n  const MonsterDecision = function(monsterId) {\n    this.monsterId = monsterId;\n    this.needHealing = false;\n    this.useHeal = false;\n    this.useSpecial = false;\n    this.defend = false;\n  }\n\n  MonsterDecision.prototype.weighDecisionTournament = function() {\n    const concernedMonster = monsters.find(monster => monster.id === this.monsterId);\n    let remainingOptions = [];\n    // populate hash table with weights for relevant behaviors\n    const weights = {\n      useHeal: concernedMonster.monsterBehavior.heal,\n      useSpecial: concernedMonster.monsterBehavior.special_move,\n      defend: concernedMonster.monsterBehavior.defend\n    }\n    // add decisions marked as valid to array for use in\n    // creating elimination tournament\n    if (this.needHealing && this.useHeal) {\n      remainingOptions.push(monsterDecisions.heal);\n    }\n    if (this.useSpecial) {\n      remainingOptions.push(monsterDecisions.special);\n    }\n    if (this.defend) {\n      remainingOptions.push(monsterDecisions.defend);\n    }\n    remainingOptions.push(monsterDecisions.attack);\n    if (remainingOptions.length === 1) {\n      return remainingOptions[0];\n    }\n    // determine number of tournament rounds for iteration\n    const tournamentRounds = Math.ceil(Math.log2(remainingOptions.length));\n    for (let round = 0; round < tournamentRounds; round++) {\n      // create pairings from outside ends inward\n      const optionsLength = remainingOptions.length;\n      let pairings = [];\n      const pairCount = Math.floor(optionsLength / 2);\n      for (let offset = 0; offset < pairCount; offset++) {\n        const pair = [remainingOptions[offset], remainingOptions[optionsLength - (offset + 1)]];\n        pairings.push(pair);\n      }\n      let eliminated = [];\n      // iterate over pairings and produce weighted outcomes to \n      // eliminate one decision from each pairing\n      pairings.forEach(pair => {\n        const result1 = Math.random() * weights[pair[0]];\n        const result2 = Math.random() * weights[pair[1]];\n        const randomChoice = Math.random();\n\n        if (result1 > result2 || (result1 === result2 && randomChoice < .5)) {\n          eliminated.push(pair[1]);\n        } else {\n          eliminated.push(pair[0]);\n        }\n      });\n      // remove eliminated options from array containing tournament\n      // entrants\n      for (let elIndex = 0; elIndex < eliminated.length; elIndex++) {\n        const eliminate = eliminated[elIndex];\n        remainingOptions = remainingOptions.filter(option => option !== eliminate);\n      }\n    }\n    return remainingOptions[0];\n  }\n\n  return {\n    createMonster: function (payload) {\n      const newMonster = new Monster(payload);\n      monsters.push(newMonster);\n      return newMonster.id;\n    },\n    getMonster: function(id) {\n      const foundMonster = monsters.find(monster => monster.id === id);\n      if (foundMonster !== undefined && foundMonster !== null) {\n        return foundMonster;\n      } else {\n        return false;\n      }\n    },\n    composePayloadFromProto: function(protoMonster) {\n      const monsterPayload = {\n        protoId: protoMonster.id,\n        name: protoMonster.name,\n        boss: protoMonster.boss,\n        level: protoMonster.level,\n        hp: protoMonster.hp,\n        damage: protoMonster.damage,\n        defense: protoMonster.defense,\n        stealth: protoMonster.stealth,\n        initiative: protoMonster.initiative,\n        special: protoMonster.special,\n        heal: protoMonster.heal,\n        experience: protoMonster.experience,\n        dropList: protoMonster.drop_list,\n        monsterBehavior: protoMonster.monster_behavior\n      }\n      return monsterPayload;\n    },\n    getMonsterDecisions: function() {\n      return monsterDecisions;\n    }\n  }\n}());\n\nexport default monsters;","// game imports\nimport items from './items';\nimport adventurersModule from './adventurers';\nimport monsters from './monsters';\n\n// utility imports\nimport fetcher from '../Utilities/fetcher';\n\n// redux imports\nimport { store } from '../index';\nimport { SET_DUNGEON_LEVELS, \n  SET_DUNGEON_LEVEL_EXPLORED,\n  SET_DUNGEON_ADVENTURERS } from '../actions/types';\n\nconst dungeon = (function(){\n  let levels = [];\n  // {\n  // adventurerId: n,\n  // level: n\n  //}\n  let adventurers = [];\n  let levelCount;\n\n  let exploredLevel = 0;\n\n  const Level = function(payload) {\n    const {\n      number, \n      boss, \n      bossId, \n      monstersMinLevel, \n      monstersMaxLevel,\n      tileAssignments,\n      treasureDropList\n    } = payload;\n    this.number = number;\n    this.boss = boss;\n    this.bossId = bossId;\n    this.monstersMinLevel = monstersMinLevel;\n    this.monstersMaxLevel = monstersMaxLevel;\n    this.tileAssignments = tileAssignments;\n    this.treasureDropList = treasureDropList;\n    this.treasures = [];\n    this.droppedTreasures = [];\n    this.monsters = [];\n    this.lurkingMonsters = [];\n    this.monstersLoot = [];\n    this.treasureListFetched = false;\n    this.monstersFetched = false;\n    this.monsterDropListItemsFetched = false;\n    this.intialized = false;\n  }\n\n  Level.prototype.initialize = async function() {\n    \n    //const monstersToAdd = getMonstersForLevel(this.monstersMinLevel, this.monstersMaxLevel);\n    return new Promise((resolve, reject) => {\n      const tGetMonstersForLevel = getMonstersForLevel(this.monstersMinLevel, this.monstersMaxLevel);\n      tGetMonstersForLevel.next().value.then((monstersToAdd) => {\n        if (!monstersToAdd) return false;\n        let monsterDrops = [];\n        // compose list of items to fetch\n        monstersToAdd.forEach(addMonster => {\n          this.monsters.push(addMonster);\n          const addMonsterDrops = addMonster.drop_list.drops;\n          if (addMonsterDrops) {\n            addMonsterDrops.forEach(addDrop => {\n              const addId = addDrop.itemId;\n              if (!monsterDrops.find(item => item.itemId === addId)) {\n                monsterDrops.push({ itemId: addId, dropType: addDrop.drop_type});\n              }\n            })\n          }\n        });\n  \n        // compose list of items to fetch\n        let treasureDrops = [];\n        this.treasureDropList.drops.forEach(drop => {\n          const addId = drop.itemId;\n          if (!treasureDrops.find(item => item.itemId === addId)) {\n            treasureDrops.push({ itemId: addId, dropType: drop.drop_type });\n          }\n        });\n        new Promise((resolveMonsterDrops, rejectMonsterDrops) => {\n          // fetch monster drop list items\n          monsterDrops.forEach((monsterDrop, mDropN) => {\n            const mGetDrop = getDrop(monsterDrop);\n            mGetDrop.next().value.then((resolvedDrop) => {\n              if (Array.isArray(resolvedDrop)) {\n                resolvedDrop = resolvedDrop[0];\n              }\n              this.monstersLoot.push(resolvedDrop);\n              if (mDropN === monsterDrops.length -1) {\n                resolveMonsterDrops();\n              }\n            })\n          });\n        })\n        .then(() => {\n            new Promise((resolveTreasureDrops, rejectTreasureDrops) => {\n              // fetch items for treasure drop lists\n              treasureDrops.forEach((treasureDrop, tDropN) => {\n                const tGetDrop = getDrop(treasureDrop);\n                tGetDrop.next().value.then((resolvedDrop) => {\n                  if (Array.isArray(resolvedDrop)) {\n                    resolvedDrop = resolvedDrop[0];\n                  }\n                  this.treasures.push(resolvedDrop);\n                  if (tDropN === treasureDrops.length -1) {\n                    resolveTreasureDrops();\n                  }\n                });            \n              })\n            })\n            .then(() => {\n              this.initialized = true;\n              console.log('level initialized.');\n              resolve(true);\n            });\n          });\n      });\n    })\n    \n  }\n\n  Level.prototype.activateTile = async function(adventurer) {\n    return new Promise((resolve, reject) => {\n      let tileOutcomes = [];\n      for (let tileI = 0; tileI < this.tileAssignments.length; tileI++) {\n        const weight = this.tileAssignments[tileI].probability;\n        const result = Math.random() * weight;\n        tileOutcomes.push({ tile: tileI, result: result });\n      }\n      tileOutcomes.sort((outcome1, outcome2) => {\n        if (outcome1.result > outcome2.result) {\n          return -1;\n        } else if (outcome1.result < outcome2.result) {\n          return 1;\n        } else return 0;\n      });\n      const resultTileI = tileOutcomes[0].tile;\n      const resultTile = this.tileAssignments[resultTileI].dungeon_tile;\n      let innTreasureBoost = 0;\n      if (adventurer.informed) {\n        innTreasureBoost = 20;\n      }\n      const actions = adventurersModule.getActions();;\n      let checkTreasureBoost = 0;\n      if (adventurer.action === actions.checkForTreasure) {\n        checkTreasureBoost = 10;\n      }\n      let checkTrapBoost = 0;\n      if (adventurer.action === actions.checkForTraps) {\n        checkTrapBoost = 50;\n      }\n      const treasureProb = Math.random() * (resultTile.treasure + innTreasureBoost + checkTreasureBoost);\n      const encounterProb = Math.random() * resultTile.encounter;\n      const trapProb = Math.random() * (resultTile.trap - checkTrapBoost);\n      const threshholdProb = Math.random() * 125;\n      // console.log(`probs... treasure: ${treasureProb}, trap: ${trapProb}, encounter: ${encounterProb}, threshold: ${threshholdProb}`);\n      if (threshholdProb > treasureProb && threshholdProb > encounterProb && threshholdProb > trapProb) {\n        resolve();\n        return;\n      }\n      if (treasureProb > encounterProb && treasureProb > trapProb) {\n        console.log('treasure event');\n        const treasureIndex = Math.floor(Math.random() * this.treasures.length);\n        const treasures = this.treasures;\n        const treasure = treasures[treasureIndex];\n        const treasureDropRef = this.treasureDropList.drops.find(drop => drop.itemId === treasure.id);\n        const itemDropped = (treasureDropRef.dropChance / 1000) > Math.random();\n        const goldMin = this.treasureDropList.gold_min;\n        const goldRange = this.treasureDropList.gold_max - goldMin;\n        const randomAward = Math.floor(Math.random() * goldRange) + goldMin;\n        const awardGold = (this.treasureDropList.gold_chance / 1000) > Math.random();\n\n        if (awardGold) {\n          adventurer.creditAccount(randomAward);\n        }\n        if (itemDropped) {\n          // compose payload for Item constructor\n          const payload = items.composePayloadFromProto(treasure);\n          let itemId = items.createItem(payload);\n          const treasureItem = items.getItem(itemId);\n          adventurer.considerTreasure(treasureItem);\n        }\n        resolve();\n        return;\n      } else if (trapProb > treasureProb && trapProb > encounterProb) {\n        adventurer.encounterTrap(this.number);\n        resolve();\n        return;\n      } else if (encounterProb > trapProb && encounterProb > treasureProb) {\n        console.log('perform encounter');\n        const monsterIndex = Math.floor(Math.random() * this.monsters.length);\n        const monsterProto = this.monsters[monsterIndex];\n        const monsterPayload = monsters.composePayloadFromProto(monsterProto);\n        const newMonsterId = monsters.createMonster(monsterPayload);\n        const newMonster = monsters.getMonster(newMonsterId);\n        adventurer.setWeaknessChecked(false);\n        adventurer.logEncounterStart(newMonster.name);\n        const newBattle = new Battle({ adventurer: adventurer, monster: newMonster, level: this.number, levelLoot: this.monstersLoot });\n        battleController.addBattle(newBattle);\n        newBattle.startBattle(resolve);\n        console.log('battle created.');\n      }\n    });\n    \n  }\n\n  const BattleController = function() {\n    this.currentBattles = [];\n    this.currentBattleId = 0;\n  }\n\n  BattleController.prototype.addBattle = function(battle) {\n    battle.id = this.currentBattleId;\n    this.currentBattles.push(battle);\n    this.currentBattleId++;\n    return battle.id;\n  }\n\n  BattleController.prototype.clearBattleRound = function(payload) {\n    const {\n      roundNumber,\n      battleId\n    } =  payload;\n    const foundBattle = this.currentBattles.find(battle => battle.id === battleId);\n    foundBattle.clearRound(roundNumber);\n  }\n\n  BattleController.prototype.addBattleRound = function(payload) {\n    const {\n      battleId,\n      newRound\n    } = payload;\n    const foundBattle = this.currentBattles.find(battle => battle.id === battleId);\n    foundBattle.addRound(newRound);\n  }\n\n  BattleController.prototype.getBattleLevelLoot = function(battleId) {\n    const foundBattle = this.currentBattles.find(battle => battle.id === battleId);\n    return foundBattle.levelLoot;\n  }\n\n  const Battle = function(payload) {\n    const {\n      adventurer,\n      monster,\n      level,\n      levelLoot\n    } = payload;\n    this.adventurer = adventurer;\n    this.monster = monster;\n    this.rounds = [];\n    this.currentRoundNumber = 0;\n    this.level = level;\n    this.levelLoot = levelLoot;\n  }\n\n  Battle.prototype.startBattle = function(turnResolve) {\n    this.resolution = turnResolve;\n    const newRound = new Round({ adventurer: this.adventurer,\n      monster: this.monster,\n      battleId: this.id });\n    this.addRound(newRound);\n    newRound.startRound();\n  }\n\n  Battle.prototype.addRound = function(round) {\n    round.roundNumber = this.currentRoundNumber;\n    this.currentRoundNumber++;\n    this.rounds.push(round);\n  }\n\n  Battle.prototype.clearRound = function(roundNumber) {\n    let deletedRound = this.rounds.find(foundRound => foundRound.roundNumber === roundNumber);\n    if (deletedRound.fleed) {\n      const thisLevel = levels.find(level => level.number === this.level);\n      thisLevel.lurkingMonsters.push(this.monster);\n    }\n    this.rounds = this.rounds.filter(clearRound => clearRound.roundNumber !== roundNumber);\n    if (deletedRound) {\n      deletedRound = null;\n    }\n    if (this.rounds.length === 0) {\n      this.resolution();\n    }\n  }\n\n  const Round = function(payload) {\n    const {\n      adventurer,\n      monster,\n      battleId\n    } = payload;\n    this.battleId = battleId;\n    this.adventurer = adventurer;\n    this.monster = monster;\n    this.fleed = false;\n  }\n\n  Round.prototype.startRound = function() {\n    const actions = adventurersModule.getActions();\n    // console.log(`Round number: ${this.roundNumber}`);\n    const adventurerInitiative = this.adventurer.getInitiativeRoll();\n    const monsterInitiative = this.monster.getInitiativeRoll();\n    if (this.adventurer.action.currentAction === actions.setTrap) {\n      const trapDamage = this.monster.takeTrapDamage(this.adventurer.level);\n      this.adventurer.logTrap({ trapDamage, monsterName: this.monster.name });\n      this.adventurer.unsetTrap();\n    }\n    if (adventurerInitiative > monsterInitiative) {\n      this.adventurerTurn();\n      if (this.monster.hp > 0 && !this.fleed) {\n        this.monsterTurn();\n      }\n    } else {\n      this.monsterTurn();\n      if (this.adventurer.hp > 0) {\n        this.adventurerTurn();\n      }\n    }\n    if (this.adventurer.hp > 0 && this.monster.hp > 0 && !this.fleed) {\n      this.addRound();\n    } \n    this.clearSelf();\n  }\n\n  Round.prototype.adventurerTurn = function() {\n    console.log('adventurer turn');\n    const battleDecisions = adventurersModule.getBattleDecisions();\n    const adventurerMove = this.adventurer.getBattleDecision(this.monster);\n    if (adventurerMove === battleDecisions.defend) {\n      this.adventurer.defending = true;\n      this.adventurer.logDefend();\n    } else {\n      this.adventurer.defending = false;\n    }\n    if (adventurerMove === battleDecisions.usePotion) {\n      this.adventurer.usePotion();\n    }\n    if (adventurerMove === battleDecisions.flee) {\n      const doBlock = this.monster.checkBlockFlee();\n      if (doBlock) {\n        const levelDiff = this.monster.level - this.adventurer.level;\n        let fleeFactor = .05 + (levelDiff / 10);\n        const doesFlee = fleeFactor > Math.random();\n        if (doesFlee) {\n          this.fleed = true;\n          this.adventurer.logFlee();\n        } \n      } else {\n        this.fleed = true;\n        this.adventurer.logFlee();\n      }\n    }\n    if (adventurerMove === battleDecisions.checkWeakness) {\n      this.adventurer.setWeaknessChecked(true);\n      this.adventurer.logWeaknessChecked({ monsterName: this.monster.name });\n    }\n    if (adventurerMove === battleDecisions.attack) {\n      let damageFactor = 0;\n      if (this.adventurer.adventurerClass.name === 'thief') {\n        damageFactor = Math.floor(this.adventurer.cunning * .75) + this.adventurer.strength;\n      } else if (this.adventurer.adventurerClass.name === 'bard') {\n        damageFactor = Math.floor(this.adventurer.cunning * .5) + this.adventurer.strength;\n      } else if (this.adventurer.adventurerClass.name === 'soldier') {\n        damageFactor = Math.floor(this.adventurer.cunning * .2) + this.adventurer.strength;\n      } else {\n        damageFactor = this.adventurer.strength;\n      }\n      let weaponDamage = 0;\n      if (this.adventurer.equipment.weapon) {\n        weaponDamage = this.adventurer.equipment.weapon.damage;\n      }\n      const damageFloor = Math.floor(damageFactor / 2);\n      const randomizeDamage = damageFactor - damageFloor;\n      const randomDamage = Math.floor(Math.random() * randomizeDamage);\n      const monsterShield = Math.floor(Math.random() * (this.monster.defense * .5) + (this.monster.defense * .5));\n      let calculatedDamage = damageFloor + randomDamage + weaponDamage - monsterShield;\n      if (this.monster.defending) {\n        calculatedDamage = Math.floor(calculatedDamage / 2);\n      }\n      if (this.adventurer.weaknessChecked) {\n        const ampDamage = calculatedDamage * (Math.floor(1.3 * Math.pow(1.14, this.adventurer.cunning)));\n        calculatedDamage = ampDamage;\n      }\n      calculatedDamage = Number.parseInt(calculatedDamage);\n      if (calculatedDamage < 1) {\n        if (Math.random() > .5) {\n          calculatedDamage = 1;\n        } else {\n          calculatedDamage = 0;\n        }\n      }\n      if (calculatedDamage > this.monster.hp) {\n        calculatedDamage = this.monster.hp;\n      }\n      this.monster.takeBattleDamage(calculatedDamage);\n      const damagePayload = {\n        monsterName: this.monster.name,\n        damage: calculatedDamage\n      }\n      this.adventurer.logHitMonster(damagePayload);\n      if (this.monster.hp <= 0) {\n        this.adventurer.gainExperience(this.monster.experience);\n        console.log('monster treasure event');\n        console.log(this.monster.dropList.drops);\n        const treasureIndex = Math.floor(Math.random() * this.monster.dropList.drops.length);\n        let treasureLevelReference = battleController.getBattleLevelLoot(this.battleId);\n        let treasureMonsterRef = this.monster.dropList.drops;\n        let treasures = treasureMonsterRef.map(monsterRef => {\n          const monsterDropItemId = monsterRef.itemid;\n          const treasureRef = treasureLevelReference.find(item => item.itemId === monsterDropItemId);\n          return treasureRef;\n        })\n        const treasure = treasures[treasureIndex];\n        console.log(treasure);\n        const treasureDropRef = treasureMonsterRef[treasureIndex];\n        const itemDropped = (treasureDropRef.dropChance / 1000) > Math.random();\n        const goldMin = this.monster.dropList.gold_min;\n        const goldRange = this.monster.dropList.gold_max - goldMin;\n        const randomAward = Math.floor(Math.random() * goldRange) + goldMin;\n        console.log(randomAward);\n        const awardGold = (this.monster.dropList.gold_chance / 1000) > Math.random();\n\n        if (awardGold) {\n          this.adventurer.creditAccount(randomAward);\n        }\n        if (itemDropped) {\n          // compose payload for Item constructor\n          const payload = items.composePayloadFromProto(treasure);\n          let itemId = items.createItem(payload);\n          const treasureItem = items.getItem(itemId);\n          this.adventurer.considerTreasure(treasureItem);\n        }\n\n        this.adventurer.logVictory({ monsterName: this.monster.name });\n      }\n    }\n  }\n\n  Round.prototype.monsterTurn = function() {\n    const monsterDecisions = monsters.getMonsterDecisions();\n    const monsterMove = this.monster.getBattleDecision();\n    if (monsterMove === monsterDecisions.defend) {\n      this.monster.defending = true;\n    } else {\n      this.monster.defending = false;\n    }\n    if (monsterMove === monsterDecisions.attack) {\n      const damageFloor = Math.floor(this.monster.damage / 2);\n      const randomizeDamage = this.monster.damage - damageFloor;\n      const randomDamage = Math.floor(Math.random() * randomizeDamage);\n      const adventurerShield = Math.floor((this.adventurer.adventurerClass.armor + Math.floor(this.adventurer.adventurerClass.tactics / 2)) / 2);\n      let adventurerArmor = 0;\n      if (this.adventurer.equipment.armor) {\n        adventurerArmor = this.adventurer.equipment.armor.armor;\n      }\n      // console.log(`damage: ${damageFloor + randomDamage}, shield: ${adventurerShield}`);\n      let calculatedDamage = damageFloor + randomDamage - adventurerShield - adventurerArmor;\n      if (this.adventurer.defending) {\n        calculatedDamage = Math.floor(calculatedDamage / 2);\n      }\n      if (calculatedDamage < 1) {\n        if (Math.random() > .5) {\n          calculatedDamage = 1;\n        } else {\n          calculatedDamage = 0;\n        }\n      }\n      const damagePayload = {\n        monsterName: this.monster.name,\n        damage: calculatedDamage\n      }\n      this.adventurer.takeBattleDamage(damagePayload);\n    }\n  }\n\n  Round.prototype.addRound = function() {\n    const newRound = new Round({ adventurer: this.adventurer, monster: this.monster, battleId: this.battleId });\n    battleController.addBattleRound({ newRound, battleId: this.battleId });\n    newRound.startRound();\n  }\n\n  Round.prototype.clearSelf = function() {\n    battleController.clearBattleRound({ roundNumber: this.roundNumber, battleId: this.battleId });\n  }\n\n  let battleController;\n\n  const initializeBattleController = function() {\n    battleController = new BattleController();\n  }\n\n  const dispatchLevels = function() {\n    const payload = {\n      type: SET_DUNGEON_LEVELS,\n      payload: levels\n    };\n    store.dispatch(payload);\n  }\n\n  const dispatchExploredLevel = function() {\n    const payload = {\n      type: SET_DUNGEON_LEVEL_EXPLORED,\n      level: exploredLevel\n    }\n    store.dispatch(payload);\n  }\n\n  const dispatchAdventurers = function() {\n    const payload = {\n      type: SET_DUNGEON_ADVENTURERS,\n      adventurers: adventurers\n    }\n    store.dispatch(payload);\n  }\n\n  const orderLevels = function() {\n    levels.sort((level1, level2) => {\n      if (level1.number > level2.number) {\n        return 1;\n      } else if (level1.number < level2.number) {\n        return -1;\n      } else {\n        return 0;\n      }\n    });\n  }\n\n  const fetchLevels = async function() {\n    let initLevels = fetcher.fetchRoute('levels-full');\n    return initLevels;\n  }\n\n  const getLevels = function*() {\n    yield fetchLevels();\n  }\n\n  const addAdventurer = function(adventurerId) {\n    adventurers.push({ adventurerId: adventurerId, level: 1});\n    if (exploredLevel < 1) {\n      exploredLevel = 1;\n      dispatchExploredLevel();\n    }\n  }\n\n  const deleteAdventurer = function(adventurerId) {\n    adventurers = adventurers.filter(adventurer => adventurer.adventurerId !== adventurerId);\n  }\n\n  const getMonstersForLevel = function*(minLevel, maxLevel) {\n    yield fetchMonstersInRange(minLevel, maxLevel);\n  }\n\n  const fetchMonstersInRange = async function(minLevel, maxLevel) {\n    const fetchUrl = `/monsters-in-level-range?min-level=${minLevel}&max-level=${maxLevel}`;\n    let fetchedMonsters;\n    try {\n      fetchedMonsters = await fetch(fetchUrl);\n    } catch (err) {\n      console.log(err);\n    }\n\n    if (fetchedMonsters) {\n      fetchedMonsters = fetchedMonsters.json();\n    }\n\n    return fetchedMonsters;\n  }\n\n  const getDrop = function*(drop) {\n    yield fetchDrop(drop);\n  }\n\n  const fetchDrop = async function(drop) {\n    const fetchUrl = `/${drop.dropType}-id?id=${drop.itemId}`;\n    let fetchedDrop;\n    try {\n      fetchedDrop = await fetch(fetchUrl);\n    } catch (err) {\n      console.log(err);\n    }\n\n    if (fetchedDrop) {\n      fetchedDrop = fetchedDrop.json();\n    }\n  \n    return fetchedDrop;\n  }\n\n  const loadLevel = async function() {\n    return new Promise((resolve, reject) => {\n      const nextLevelN = exploredLevel + 1;\n      let nextLevel = levels.find(level => level.number === nextLevelN);\n      nextLevel.initialize()\n        .then((completed) => {\n          resolve(completed);\n        })\n      })\n  }\n\n  return {\n    initializeLevels: async function() {\n      initializeBattleController();\n      const genGetLevels = getLevels();\n      genGetLevels.next().value\n        .then(initLevels => {\n          if (!initLevels) return false;\n          while (initLevels.length > 0) {\n            let newLevel = initLevels.shift();\n            if (Array.isArray(newLevel)) {\n              newLevel = newLevel[0];\n            }\n            const levelPayload = {\n              number: newLevel.number,\n              boss: newLevel.boss,\n              bossId: newLevel.boss_id,\n              monstersMinLevel: newLevel.monsters_min_level,\n              monstersMaxLevel: newLevel.monsters_max_level,\n              tileAssignments: newLevel.tile_assignments,\n              treasureDropList: newLevel.drop_list\n            }\n            let thisLevel = new Level(levelPayload);\n            levels.push(thisLevel);\n          }\n        }).then(() => {\n          levelCount = levels.length;\n          orderLevels();\n          dispatchLevels();\n          dispatchExploredLevel();\n        });\n    },\n    updateLevels: function() {\n      dispatchLevels();\n    },\n    getExploredLevel: function() {\n      return exploredLevel;\n    },\n    receiveAdventurer: function(adventurerId) {\n      addAdventurer(adventurerId);\n      dispatchAdventurers();\n    },\n    releaseAdventurer: function(adventurerId) {\n      deleteAdventurer(adventurerId);\n      dispatchAdventurers();\n    },\n    executeTurn: async function(adventurer) {\n      return new Promise((resolve, reject) => {\n        const dungeonEntry = adventurers.find(dunAdventurer => dunAdventurer.adventurerId === adventurer.id);\n        const currentLevel = levels.find(level => level.number === dungeonEntry.level);\n        currentLevel.activateTile(adventurer)\n          .then(() => {\n            resolve();\n          });\n      })\n    },\n    checkLevelReadiness: function() {\n      if (exploredLevel === 0) return false;\n      if (!adventurers) return false;\n      let highestLevel = 1;\n      for (let adventurerI = 0; adventurerI < adventurers.length; adventurerI++) {\n        if (adventurers[adventurerI].level > highestLevel) {\n          highestLevel = adventurers[adventurerI].level;\n        }\n      }\n      if (exploredLevel <= highestLevel) {\n        if (exploredLevel < levelCount) {\n          return false;\n        } else {\n          return true;\n        }\n      }\n      return true;\n    },\n    loadNextLevel: function*() {\n      yield loadLevel();\n    }\n  }\n}());\n\nexport default dungeon;","const tagProcessor = (function(){\n\n  const filterClasses = {\n    name: 'adventurerNameTag',\n    monsterName: 'monsterNameTag',\n    status: 'status',\n    value: 'value'\n  }\n\n  return {\n    getFilterClasses: function() {\n      return filterClasses;\n    }\n  }\n}());\n\nexport default tagProcessor;","import React from 'react';\n\n// constant imports\nimport gameConstants from './gameConstants';\n\n// game imports\nimport storeInventory from './storeInventory';\nimport playerStore from './store';\nimport items from './items';\nimport dungeon from './dungeon';\nimport days from './days';\n\n// utility imports\nimport fetcher from '../Utilities/fetcher';\nimport itemTypes from '../Utilities/itemTypes';\nimport tagProcessor from '../Utilities/tagProcessor';\n\n// redux imports\nimport { store } from '../index';\nimport { SET_ADVENTURERS, SET_DETAIL_UPDATE } from '../actions/types';\n\nconst adventurers = (function(){\n  let adventurers = [];\n  let currentId = 0;\n\n  const maxInventory = 15;\n  const defaultActionDays = 2;\n\n  const actions = {\n    checkForTreasure: 'checkForTreasure',\n    checkForTraps: 'checkForTraps',\n    setTrap: 'setTrap'\n  }\n\n  const decisions = {\n    usePotion: 'usePotion',\n    advance: 'advance',\n    checkForTraps: 'checkForTraps',\n    checkForTreasure: 'checkForTreasure',\n    setTrap: 'setTrap',\n    returnToTown: 'returnToTown',\n    advanceNextLevel: 'advanceNextLevel'\n  }\n\n  const battleDecisions = {\n    usePotion: 'usePotion',\n    defend: 'defend',\n    flee: 'flee',\n    checkWeakness: 'checkWeakness',\n    attack: 'attack'\n  }\n\n  const Adventurer = function(payload) {\n    const { name, \n      strength, \n      speed, \n      cunning, \n      intelligence,\n      constitution,\n      dungeonBehavior,\n      townBehavior,\n      adventurerClass } = payload;\n      this.name = name;\n      this.strength = strength;\n      this.speed = speed;\n      this.cunning = cunning;\n      this.intelligence = intelligence;\n      this.constitution = constitution;\n      this.dungeonBehavior = dungeonBehavior;\n      this.townBehavior = townBehavior;\n      this.adventurerClass = adventurerClass;\n      this.gold = gameConstants.adventurerStartingGold;\n      this.level = 1;\n      this.experience = 0;\n      this.hp = 7 + constitution;\n      this.maxHp = this.hp;\n      this.inventory = [];\n      this.equipment = { weapon: null, armor: null };\n      this.inDungeon = false;\n      this.informed = false;\n      this.hasFoundStairs = false;\n      this.currentTotalDungeonTurns = 0;\n      this.action = {\n        currentAction: null,\n        turns: 0\n      }\n      this.id = currentId;\n      this.defending = false;\n      this.weaknessChecked = false;\n      currentId++;\n  }\n\n  Adventurer.prototype.checkAccount = function(value) {\n    return this.gold >= value;\n  }\n\n  Adventurer.prototype.chargeAccount = function(value) {\n    this.gold -= value;\n  }\n\n  Adventurer.prototype.creditAccount = function(value) {\n    this.gold += value;\n  }\n\n  Adventurer.prototype.unequipItem = function(slot) {\n    this.equipment[slot] = null;\n  }\n\n  Adventurer.prototype.equipItem = function(item) {\n    this.equipment[item.type] = item;\n    console.log(this.equipment);\n  }\n\n  Adventurer.prototype.getCurrentItemCount = function(protoId) {\n    if (this.inventory.length <= 0) return 0;\n    let protoCount = 0;\n    for (let item of this.inventory) {\n      if (item.prototypeId === protoId) {\n        protoCount++;\n      }\n    }\n    return protoCount;\n  }\n\n  Adventurer.prototype.addCombatLog = function(message) {\n    if (! this.combatLog) {\n      this.combatLog = [];\n    }\n    this.combatLog.push(message);\n  }\n\n  Adventurer.prototype.getCombatLog = function() {\n    if (! this.combatLog) {\n      this.combatLog = [];\n    }\n    return this.combatLog;\n  }\n\n  Adventurer.prototype.checkHealthChoice = function() {\n    if (this.hp === this.maxHp) return false;\n    const hpDifferential = this.maxHp - this.hp;\n    const percentLost = hpDifferential / this.maxHp;\n    let decisionFactor = percentLost + (this.dungeonBehavior.conserve_health / 1000);\n    const needHealing = decisionFactor > Math.random();\n    return needHealing;\n  }\n\n  Adventurer.prototype.checkHasPotion = function() {\n    if (this.inventory.length < 1) return false;\n    return this.inventory.find(item => item.type === itemTypes.potion);\n  }\n\n  Adventurer.prototype.checkPotionUse = function() {\n    let decisionFactor = (this.dungeonBehavior.use_potion / 1000);\n    const usePotion = decisionFactor > Math.random();\n    return usePotion;\n  }\n\n  Adventurer.prototype.checkDefend = function() {\n    let decisionFactor = (this.dungeonBehavior.defend / 1000) - (this.dungeonBehavior.attack / 2000);\n    const defend = decisionFactor > Math.random();\n    return defend;\n  }\n\n  Adventurer.prototype.checkFlee = function(monster) {\n    let levelDiff = monster.level - this.level;\n    if (levelDiff < 0) {\n      levelDiff = 1;\n    } else {\n      levelDiff = levelDiff + 1;\n    }\n    const hpDifferential = this.maxHp - this.hp;\n    const percentLost = hpDifferential / this.maxHp;\n    const mosterHpDiff = monster.maxHp - monster.hp;\n    const monsterPercentLost = mosterHpDiff / monster.maxHp;\n    let decisionFactor = (((percentLost - (monsterPercentLost * .8)) * (Math.pow(1.2, levelDiff))) * 0.8) + (this.dungeonBehavior.flee_encounter / 4000);\n    console.log(`flee decisionFactor: ${decisionFactor}`);\n    const flee = decisionFactor > Math.random();\n    return flee;\n  }\n\n  Adventurer.prototype.checkWeakness = function() {\n    if (this.weaknessChecked) return false;\n    let decisionFactor = (this.dungeonBehavior.check_monster_weakness / 1000);\n    const checkWeak = decisionFactor > Math.random();\n    return checkWeak;\n  }\n\n  Adventurer.prototype.usePotion = function() {\n    const filterClasses = tagProcessor.getFilterClasses();\n    let heldPotions = this.inventory.filter(item => item.type === itemTypes.potion);\n    const hpDifferential = this.maxHp - this.hp;\n    const percentLost = hpDifferential / this.maxHp;\n    let potionToUse;\n    if (percentLost > .5) {\n      heldPotions.sort((potion1, potion2) => {\n        if (potion1[itemTypes.potion].level < potion2[itemTypes.potion].level) {\n          return 1;\n        } else if (potion1[itemTypes.potion].level > potion2[itemTypes.potion].level) {\n          return -1;\n        } else return 0;\n      });\n      potionToUse = heldPotions[0];\n    } else {\n      heldPotions.sort((potion1, potion2) => {\n        if (potion1[itemTypes.potion].level < potion2[itemTypes.potion].level) {\n          return -1;\n        } else if (potion1[itemTypes.potion].level > potion2[itemTypes.potion].level) {\n          return 1;\n        } else return 0;\n      });\n      potionToUse = heldPotions[0];\n    }\n    let hpToHeal = Math.floor(potionToUse[itemTypes.potion].level * (4 * Math.pow(1.08, potionToUse[itemTypes.potion].level)));\n    if (hpToHeal > hpDifferential) {\n      hpToHeal = hpDifferential;\n    }\n    this.hp = this.hp + hpToHeal;\n    const healJSX = (\n      <div className=\"combatLogEntry\">\n        <span className={filterClasses.name}>{this.name} </span>  used {potionToUse.name}. <span className={filterClasses.name}>{this.name} </span> healed <span className={filterClasses.value}>{hpToHeal}</span> hp.\n      </div>);\n    this.addCombatLog(healJSX);\n    this.inventory = this.inventory.filter(item => item.id !== potionToUse.id);\n    items.destroyItem(potionToUse.id);\n    potionToUse = null;\n  }\n\n  Adventurer.prototype.checkTrapDecision = function() {\n    const hpDifferential = this.maxHp - this.hp;\n    const percentLost = hpDifferential / this.maxHp;\n    let decisionFactor = (percentLost * 3) + (this.dungeonBehavior.check_for_traps / 1000);\n    const checkTraps = decisionFactor > Math.random();\n    return checkTraps;\n  }\n\n  Adventurer.prototype.checkTreasureDecision = function() {\n    const decisionFactor = (this.dungeonBehavior.search_for_treasure / 1000);\n    const checkTreasure = decisionFactor > Math.random();\n    return checkTreasure;\n  }\n\n  Adventurer.prototype.checkSetTrapDecision = function() {\n    const setTrap = this.dungeonBehavior.set_trap;\n    const decisionFactor = (setTrap / 1000) + (this.dungeonBehavior.prefer_weaker_monster / 4000);\n    const doSetTrap = decisionFactor > Math.random();\n    return doSetTrap;\n  }\n\n  Adventurer.prototype.checkAdvanceDecision = function() {\n    const hpDifferential = this.maxHp - this.hp;\n    const percentLost = hpDifferential / this.maxHp;\n    const inventoryCount = this.inventory.length;\n    const inventoryPercentEmpty = maxInventory - (inventoryCount / maxInventory);\n    const fillInventoryDesire = ((this.dungeonBehavior.fill_inventory) * inventoryPercentEmpty) / 1000;\n    const decisionFactor = (this.dungeonBehavior.advance_tile / 1000) - (percentLost * 2) - (this.currentTotalDungeonTurns / 600) + (fillInventoryDesire * 3);\n    const advanceDecision = decisionFactor > Math.random();\n    return advanceDecision;\n  }\n\n  Adventurer.prototype.checkReturnToTown = function() {\n    const hpDifferential = this.maxHp - this.hp;\n    const percentLost = hpDifferential / this.maxHp;\n    let turnsInfluence = 1;\n    let turnsFactor;\n    if (this.currentTotalDungeonTurns < 15) {\n      turnsInfluence = -1;\n      turnsFactor = (15 - (turnsInfluence * this.currentTotalDungeonTurns)) / 15; \n    } else {\n      turnsFactor = (turnsInfluence * this.currentTotalDungeonTurns) / 400;\n    }\n    const inventoryCount = this.inventory.length;\n    const inventoryPercentEmpty = (maxInventory - inventoryCount) / maxInventory;\n    const fillInventoryDesire = ((this.dungeonBehavior.fill_inventory / 1000) * inventoryPercentEmpty);\n    const decisionFactor = (this.dungeonBehavior.return_to_town / 1000) - (fillInventoryDesire * 5) + (percentLost * 2) + turnsFactor;\n    console.log(`${this.name} returnToTown decisionFactor: ${decisionFactor}, fillInventory: ${fillInventoryDesire}, turnsFactor: ${turnsFactor}`);\n    const returnDecision = decisionFactor > Math.random();\n    return returnDecision; \n  }\n\n  Adventurer.prototype.considerTreasure = function(item) {\n    console.log(item);\n    if (this.inventory.length < maxInventory) {\n      this.inventory.push(item);\n      return true;\n    }\n    // insert logic for weighing item values if inventory is full\n  }\n\n  Adventurer.prototype.encounterTrap = function(dungeonLevel) {\n    const filterClasses = tagProcessor.getFilterClasses();\n    const trapDamage = 3 * (Math.pow(1.25, (dungeonLevel - 1)));\n    const trapFactor = (this.adventurerClass.traps + this.adventurerClass.agility + this.cunning) / ((this.level * 10) * (Math.pow(1.25, (dungeonLevel - 1))));\n    let computedDamage = Math.floor(trapDamage * (1 / trapFactor));\n    const avoidTrapChance = Math.random() * trapFactor;\n    if (avoidTrapChance > Math.random() * 10) {\n      const trapJSX = (\n        <div className=\"combatLogEntry\">\n          <span className={filterClasses.name}>{this.name} </span> avoided a trap.\n        </div>);\n      this.addCombatLog(trapJSX);\n      return false;\n    }\n    console.log(`trapDamage: ${computedDamage}`);\n    if (computedDamage > this.hp) {\n      computedDamage = this.hp;\n    }\n    this.hp -= computedDamage;\n    const trapJSX = (\n      <div className=\"combatLogEntry\">\n        <span className={filterClasses.name}>{this.name}</span> took <span className={filterClasses.value}>{computedDamage}</span> damage from a trap!\n      </div>);\n    this.addCombatLog(trapJSX);\n  }\n\n  Adventurer.prototype.logEncounterStart = function(monsterName) {\n    const filterClasses = tagProcessor.getFilterClasses();\n    let vowelAdj = '';\n    switch(monsterName.charAt(0).toLowerCase()) {\n      case 'a': case 'e': case 'i': case 'o': case 'u':\n        vowelAdj = 'n';\n        break;\n      default:\n        vowelAdj = '';\n    }\n    const encounterJSX = (\n      <div className=\"combatLogEntry\">\n        <span className={filterClasses.name}>{this.name}</span> encountered a{vowelAdj} <span className={filterClasses.monsterName}>{monsterName}</span>!\n      </div>);\n    this.addCombatLog(encounterJSX);\n  }\n\n  Adventurer.prototype.logTrap = function(payload) {\n    const {\n      trapDamage,\n      monsterName\n    } = payload;\n    const filterClasses = tagProcessor.getFilterClasses();\n    const trapJSX = (\n      <div className=\"combatLogEntry\">\n        <span className={filterClasses.name}>{this.name}</span>'s' trap hit <span className={filterClasses.monsterName}>{monsterName}</span> for <span className={filterClasses.value}>{trapDamage}</span> damage.\n      </div>);\n    this.addCombatLog(trapJSX);\n  }\n\n  Adventurer.prototype.unsetTrap = function() {\n    this.action = {\n      currentAction: null,\n      turns: 0\n    };\n  }\n\n  Adventurer.prototype.setWeaknessChecked = function(value) {\n    this.weaknessChecked = value;\n  }\n\n  Adventurer.prototype.getInitiativeRoll = function() {\n    const initiativeFactor = ((this.adventurerClass.tactics * .7) / 10) + ((this.adventurerClass.agility * .3) / 10);\n    return Math.random() * initiativeFactor;\n  }\n\n  Adventurer.prototype.takeBattleDamage = function(payload) {\n    const filterClasses = tagProcessor.getFilterClasses();\n    const {\n      monsterName,\n      damage\n    } = payload;\n    let computedDamage = Number.parseInt(damage);\n    if (computedDamage > this.hp) {\n      computedDamage = this.hp\n    }\n    if (computedDamage) {\n      this.hp -= computedDamage;\n    }\n    \n\n    let battleJSX;\n    if (computedDamage > 0) {\n      battleJSX = (\n        <div className=\"combatLogEntry\">\n          <span className={filterClasses.monsterName}>{monsterName}</span> hit <span className={filterClasses.name}>{this.name}</span> for <span className={filterClasses.value}>{computedDamage}</span> damage. \n        </div>);\n    } else {\n      battleJSX = (\n        <div className=\"combatLogEntry\">\n          <span className={filterClasses.monsterName}>{monsterName}</span> attempted to hit <span className={filterClasses.name}>{this.name}</span>, but did no damage. \n        </div>)\n    }\n    \n    this.addCombatLog(battleJSX);\n  }\n\n  Adventurer.prototype.logDefend = function() {\n    const filterClasses = tagProcessor.getFilterClasses();\n    let defendJSX;\n    defendJSX = (\n      <div className=\"combatLogEntry\">\n        <span className={filterClasses.name}>{this.name}</span> assumed a defensive posture. \n      </div>);\n    this.addCombatLog(defendJSX);\n  }\n\n  Adventurer.prototype.logFlee = function() {\n    const filterClasses = tagProcessor.getFilterClasses();\n    let fleeJSX;\n    fleeJSX = (\n      <div className=\"combatLogEntry\">\n        <span className={filterClasses.name}>{this.name}</span> fled from battle! \n      </div>);\n    this.addCombatLog(fleeJSX);\n  }\n\n  Adventurer.prototype.logReturnToTown = function() {\n    const filterClasses = tagProcessor.getFilterClasses();\n    let returnJSX;\n    returnJSX = (\n      <div className=\"combatLogEntry\">\n        <span className={filterClasses.name}>{this.name}</span> returned to town. \n      </div>);\n    this.addCombatLog(returnJSX);\n  }\n\n  Adventurer.prototype.logWeaknessChecked = function(payload) {\n    const filterClasses = tagProcessor.getFilterClasses();\n    const {\n      monsterName\n    } = payload;\n\n    let weaknessJSX;\n    weaknessJSX = (\n      <div className=\"combatLogEntry\">\n        <span className={filterClasses.name}>{this.name}</span> checked <span className={filterClasses.monsterName}>{monsterName}</span> for weaknesses. \n      </div>);\n  \n    \n    this.addCombatLog(weaknessJSX);\n  }\n  \n  Adventurer.prototype.logHitMonster = function(payload) {\n    const filterClasses = tagProcessor.getFilterClasses();\n    const {\n      monsterName,\n      damage\n    } = payload;\n\n    let battleJSX;\n    if (damage > 0) {\n      battleJSX = (\n        <div className=\"combatLogEntry\">\n          <span className={filterClasses.name}>{this.name}</span> hit <span className={filterClasses.monsterName}>{monsterName}</span> for <span className={filterClasses.value}>{damage}</span> damage. \n        </div>);\n    } else {\n      battleJSX = (\n        <div className=\"combatLogEntry\">\n          <span className={filterClasses.name}>{this.name}</span> attempted to hit <span className={filterClasses.monsterName}>{monsterName}</span>, but did no damage.\n        </div>)\n    }\n    \n    this.addCombatLog(battleJSX);\n  }\n\n  Adventurer.prototype.logVictory = function(payload) {\n    const filterClasses = tagProcessor.getFilterClasses();\n    const {\n      monsterName\n    } = payload;\n\n    let victoryJSX;\n    victoryJSX = (\n      <div className=\"combatLogEntry\">\n        <span className={filterClasses.name}>{this.name}</span> defeated <span className={filterClasses.monsterName}>{monsterName}</span>! \n      </div>);\n  \n    \n    this.addCombatLog(victoryJSX);\n  }\n\n  Adventurer.prototype.gainExperience = function(amount) {\n    this.experience += amount;\n  }\n\n\n  Adventurer.prototype.getBattleDecision = function(monster) {\n    let thisDecision = new BattleDecision(this.id);\n    thisDecision.needHealing = this.checkHealthChoice();\n    thisDecision.hasPotion = this.checkHasPotion();\n    thisDecision.usePotion = this.checkPotionUse();\n    thisDecision.defend = this.checkDefend();\n    thisDecision.flee = this.checkFlee(monster);\n    thisDecision.checkWeakness = this.checkWeakness();\n    let resultDecision = '';\n    if (thisDecision.flee) {\n      resultDecision = battleDecisions.flee;\n    } else {\n      resultDecision = thisDecision.weighDecisionTournament();\n    }\n    \n    return resultDecision;\n  }\n\n  // Adventurer.prototype.checkFlee = function() {\n\n  // }\n\n  const TurnController = function() {\n    this.currentTurns = [];\n    this.currentId = 0;\n  }\n\n  TurnController.prototype.addTurn = function(turn) {\n    turn.id = this.currentId;\n    this.currentTurns.push(turn);\n    this.currentId++;\n  }\n\n  TurnController.prototype.clearTurn = function(id) {\n    let deletedTurn = this.currentTurns.find(foundTurn => foundTurn.id === id);\n    this.currentTurns = this.currentTurns.filter(clearTurn => clearTurn.id!== id);\n    if (deletedTurn) {\n      deletedTurn = null;\n    }\n    if (this.currentTurns.length === 0) {\n      this.currentId = 0;\n      dispatchUpdate();\n    }\n  }\n\n  TurnController.prototype.clearAdventurerTurns = function(payload) {\n    const {\n      adventurerId,\n      day\n    } = payload;\n    let deletedTurns = this.currentTurns.filter(foundTurn => foundTurn.adventurerId === adventurerId  && foundTurn.day === day);\n    this.currentTurns = this.currentTurns.filter(clearTurn => clearTurn.adventurerId !== adventurerId && clearTurn.day !== day);\n    deletedTurns.forEach(turn => {\n      turn = null\n    });\n  }\n\n  TurnController.prototype.startTurns = function() {\n    if (this.currentTurns.length === 0) return false;\n    const firstTurns = this.currentTurns.filter(turn => turn.turnNumber === 1);\n    firstTurns.forEach(turn => {\n      turn.runTurn();\n    });\n  }\n\n  TurnController.prototype.startTurn = function(payload) {\n    const {\n      adventurerId,\n      day,\n      turn\n    } = payload;\n    const nextTurn = this.currentTurns.find(foundTurn => foundTurn.adventurerId === adventurerId && foundTurn.day === day && foundTurn.turnNumber === turn);\n    if (nextTurn) {\n      nextTurn.runTurn();\n    } \n  }\n\n\n  let turnController;\n\n  const initializeTurnController = function() {\n    turnController = new TurnController();\n  }\n\n  const Turn = function(payload) {\n    const {\n      adventurer,\n      day,\n      turnNumber,\n      nextTurn\n    } = payload;\n    this.adventurer = adventurer;\n    this.adventurerId = adventurer.id;\n    this.day = day;\n    this.turnNumber = turnNumber;\n    this.nextTurn = nextTurn;\n  }\n\n  Turn.prototype.runTurn = async function() {\n    // console.log(`Adventurer: ${this.adventurer.name}, currentTurn: ${this.turnNumber}, nextTurn: ${this.nextTurn}`);\n    const filterClasses = tagProcessor.getFilterClasses();\n    new Promise((resolve, reject) => {\n      const dungeonAdventurer = this.adventurer;\n      let thisDecision = new Decision(dungeonAdventurer.id);\n      if (dungeonAdventurer.hp < dungeonAdventurer.maxHp) {\n        thisDecision.needHealing = dungeonAdventurer.checkHealthChoice();\n        thisDecision.hasPotion = dungeonAdventurer.checkHasPotion();\n        if (thisDecision.needHealing) {\n          if (thisDecision.hasPotion) {\n            thisDecision.usePotion = dungeonAdventurer.checkPotionUse();\n          }\n        }\n      }\n      if (!dungeonAdventurer.action.currentAction) {\n        thisDecision.checkForTraps = dungeonAdventurer.checkTrapDecision();\n        thisDecision.checkForTreasure = dungeonAdventurer.checkTreasureDecision();\n        thisDecision.setTrap = dungeonAdventurer.checkSetTrapDecision();\n      }\n      thisDecision.advance = dungeonAdventurer.checkAdvanceDecision();\n      thisDecision.returnToTown = dungeonAdventurer.checkReturnToTown();\n\n      // get decision from decision object\n      let resultDecision;\n      resultDecision = thisDecision.weighDecisionLogical();\n      if (!resultDecision) {\n        resultDecision = thisDecision.weighDecisionTournament();\n      }\n      if (resultDecision === decisions.usePotion) {\n        dungeonAdventurer.usePotion();\n      }\n      if (resultDecision === decisions.checkForTraps || \n        resultDecision === decisions.checkForTreasure || \n        resultDecision === decisions.setTrap) {\n          dungeonAdventurer.action.currentAction = resultDecision;\n          const turns = dungeonAdventurer.speed * defaultActionDays;\n          dungeonAdventurer.action.turns = turns;\n          let actionMsg = '';\n          if (resultDecision === decisions.checkForTraps) {\n            actionMsg = 'is checking for traps';\n          } else if (resultDecision === decisions.checkForTreasure) {\n            actionMsg = 'is checking for treasure';\n          } else if (resultDecision === decisions.setTrap) {\n            actionMsg = 'sets a trap';\n          }\n          const actionJSX = (\n            <div className=\"combatLogEntry\">\n              <span className={filterClasses.name}>{dungeonAdventurer.name} </span> {actionMsg}.\n            </div>);\n          dungeonAdventurer.addCombatLog(actionJSX);\n      }\n      if (resultDecision === decisions.returnToTown){\n        // something to look at\n        dungeon.releaseAdventurer(dungeonAdventurer.id);\n        dungeonAdventurer.inDungeon = false;\n        const clearPackage = { adventurerId: this.adventurerId, day: this.day };\n        turnController.clearAdventurerTurns(clearPackage);\n        dungeonAdventurer.hp = dungeonAdventurer.maxHp;\n        dungeonAdventurer.logReturnToTown();\n        resolve();\n      }\n      new Promise((resolveTurn, rejectTurn) => {\n        if (resultDecision === decisions.advance) {\n          dungeon.executeTurn(dungeonAdventurer)\n            .then(() => {\n              resolveTurn();\n            });\n        } else {\n          resolveTurn();\n        }\n        \n      }).then(() => {\n        this.adventurer.currentTotalDungeonTurns++;\n        resolve();\n      })\n    }).then(() => {\n      if (this.nextTurn) {\n        const payload = { turn: this.nextTurn, adventurerId: this.adventurerId, day: this.day };\n        turnController.startTurn(payload);\n      }\n      turnController.clearTurn(this.id);\n    })\n  }\n\n  const Decision = function(adventurerId) {\n    this.adventurerId = adventurerId;\n    this.needHealing = false;\n    this.hasPotion = false;\n    this.usePotion = false;\n    this.checkForTraps = false;\n    this.checkForTreasure = false;\n    this.setTrap = false;\n    this.advance = false;\n    this.returnToTown = false;\n  }\n\n  Decision.prototype.weighDecisionLogical = function() {\n    if (this.needHealing && this.hasPotion && this.usePotion && !this.advance) {\n      return decisions.usePotion;\n    }\n    if (this.returnToTown && !this.usePotion && !this.hasPotion && !this.advance) {\n      return decisions.returnToTown;\n    }\n    if (!this.usePotion && this.advance && !this.checkForTraps && !this.checkTreasure) {\n      return decisions.advance;\n    }\n    return false;\n  }\n\n  Decision.prototype.weighDecisionTournament = function() {\n    const concernedAdventurer = adventurers.find(adventurer => adventurer.id === this.adventurerId);\n    let remainingOptions = [];\n    // populate hash table with weights for relevant behaviors\n    const weights = {\n      usePotion: concernedAdventurer.dungeonBehavior.use_potion,\n      checkForTraps: concernedAdventurer.dungeonBehavior.check_for_traps,\n      checkForTreasure: concernedAdventurer.dungeonBehavior.search_for_treasure,\n      setTrap: concernedAdventurer.dungeonBehavior.set_trap,\n      advance: concernedAdventurer.dungeonBehavior.advance_tile,\n      returnToTown: concernedAdventurer.dungeonBehavior.return_to_town\n    }\n    // add decisions marked as valid to array for use in\n    // creating elimination tournament\n    if (this.usePotion && this.hasPotion) {\n      remainingOptions.push(decisions.usePotion);\n    }\n    if (this.checkForTraps) {\n      remainingOptions.push(decisions.checkForTraps);\n    }\n    if (this.checkForTreasure) {\n      remainingOptions.push(decisions.checkForTreasure);\n    }\n    if (this.setTrap) {\n      remainingOptions.push(decisions.setTrap);\n    }\n    if (this.advance) {\n      remainingOptions.push(decisions.advance);\n    }\n    if (this.returnToTown) {\n      remainingOptions.push(decisions.returnToTown);\n    }\n    if (remainingOptions.length === 1) {\n      return remainingOptions[0];\n    }\n    // determine number of tournament rounds for iteration\n    const tournamentRounds = Math.ceil(Math.log2(remainingOptions.length));\n    for (let round = 0; round < tournamentRounds; round++) {\n      // create pairings from outside ends inward\n      const optionsLength = remainingOptions.length;\n      let pairings = [];\n      const pairCount = Math.floor(optionsLength / 2);\n      for (let offest = 0; offest < pairCount; offest++) {\n        const pair = [remainingOptions[offest], remainingOptions[optionsLength - (offest + 1)]];\n        pairings.push(pair);\n      }\n      let eliminated = [];\n      // iterate over pairings and produce weighted outcomes to\n      // eliminate one decision from each pairing\n      pairings.forEach(pair => {\n        const result1 = Math.random() * weights[pair[0]];\n        const result2 = Math.random() * weights[pair[1]];\n        const randomChoice = Math.random();\n        \n        if (result1 > result2 || (result1 === result2 && randomChoice < .5)) {\n          eliminated.push(pair[1])\n        } else {\n          eliminated.push(pair[0]);\n        }\n      });\n      // remove eliminated options from array containing tournament\n      // entrants\n      for (let elIndex = 0; elIndex < eliminated.length; elIndex++) {\n        const eliminate = eliminated[elIndex];\n        remainingOptions = remainingOptions.filter(option => option !== eliminate);\n      }\n    }\n    return remainingOptions[0];\n  }\n\n  const BattleDecision = function(adventurerId) {\n    this.adventurerId = adventurerId;\n    this.needHealing = false;\n    this.hasPotion = false;\n    this.usePotion = false;\n    this.defend = false;\n    this.flee = false;\n    this.checkWeakness = false;\n  }\n\n  BattleDecision.prototype.weighDecisionTournament = function() {\n    const concernedAdventurer = adventurers.find(adventurer => adventurer.id === this.adventurerId);\n    let remainingOptions = [];\n    // populate hash table with weights for relevant behaviors\n    const weights = {\n      usePotion: concernedAdventurer.dungeonBehavior.use_potion,\n      defend: concernedAdventurer.dungeonBehavior.defend,\n      flee: concernedAdventurer.dungeonBehavior.flee_encounter,\n      checkWeakness: concernedAdventurer.dungeonBehavior.check_monster_weakness,\n      attack: concernedAdventurer.dungeonBehavior.attack\n    }\n    // add decisions marked as valid to array for use in\n    // creating elimination tournament\n    if (this.usePotion && this.hasPotion) {\n      remainingOptions.push(battleDecisions.usePotion);\n    }\n    if (this.defend) {\n      remainingOptions.push(battleDecisions.defend);\n    }\n    if (this.flee) {\n      remainingOptions.push(battleDecisions.flee);\n    }\n    if (this.checkWeakness) {\n      remainingOptions.push(battleDecisions.checkWeakness);\n    }\n    remainingOptions.push(battleDecisions.attack);\n    if (remainingOptions.length === 1) {\n      return remainingOptions[0];\n    }\n    // determine number of tournament rounds for iteration\n    const tournamentRounds = Math.ceil(Math.log2(remainingOptions.length));\n    for (let round = 0; round < tournamentRounds; round++) {\n      // create pairings from outside ends inward\n      const optionsLength = remainingOptions.length;\n      let pairings = [];\n      const pairCount = Math.floor(optionsLength / 2);\n      for (let offest = 0; offest < pairCount; offest++) {\n        const pair = [remainingOptions[offest], remainingOptions[optionsLength - (offest + 1)]];\n        pairings.push(pair);\n      }\n      let eliminated = [];\n      // iterate over pairings and produce weighted outcomes to\n      // eliminate one decision from each pairing\n      pairings.forEach(pair => {\n        const result1 = Math.random() * weights[pair[0]];\n        const result2 = Math.random() * weights[pair[1]];\n        const randomChoice = Math.random();\n        \n        if (result1 > result2 || (result1 === result2 && randomChoice < .5)) {\n          eliminated.push(pair[1])\n        } else {\n          eliminated.push(pair[0]);\n        }\n      });\n      // remove eliminated options from array containing tournament\n      // entrants\n      for (let elIndex = 0; elIndex < eliminated.length; elIndex++) {\n        const eliminate = eliminated[elIndex];\n        remainingOptions = remainingOptions.filter(option => option !== eliminate);\n      }\n    }\n    return remainingOptions[0];\n  }\n\n  const dispatchAdventurers = function(newAdventurers) {\n    const payload = {\n      type: SET_ADVENTURERS,\n      payload: newAdventurers\n    }\n    store.dispatch(payload);\n  }\n\n  const dispatchUpdate = function() {\n    const payload = {\n      type: SET_DETAIL_UPDATE,\n      value: true\n    }\n    store.dispatch(payload);\n  }\n\n  const fetchAdventurers = async function() {\n    let initAdventurers = fetcher.fetchRoute('adventurers-full');\n    return initAdventurers;\n  }\n\n  const getAdventurers = function*() {\n    yield fetchAdventurers();\n  }\n\n  const doInn = function() {\n    const availableAdventurers = adventurers.filter(adventurer => adventurer.inDungeon === false);\n    availableAdventurers.forEach(townAdventurer => {\n      let totalFactor = townAdventurer.townBehavior.use_tavern / 1000;\n      if (townAdventurer.informed) {\n        totalFactor = 0;\n      }\n      const willDrink = totalFactor >= Math.random();\n\n      if (willDrink) {\n        const totalCost = 10 * townAdventurer.level;\n        if (townAdventurer.checkAccount(totalCost)) {\n          const filterClasses = tagProcessor.getFilterClasses();\n          const innJSX = (\n            <div className=\"combatLogEntry\">\n              <span className={filterClasses.name}>{townAdventurer.name} </span>  stayed at the inn. <span className={filterClasses.name}>{townAdventurer.name} </span> is now <span className={filterClasses.status}>informed</span>.\n            </div>);\n          townAdventurer.chargeAccount(totalCost);\n          townAdventurer.informed = true;\n          const combatLogMessage = innJSX;\n          townAdventurer.addCombatLog(combatLogMessage);\n        }\n      }\n    })\n  }\n\n  const doShopping = function() {\n    const inventory = storeInventory.getStoreInventory();\n    let inventoryItems = [];\n    inventory.forEach(item => {\n      let composedItem = item;\n      composedItem.item = items.getItem(item.itemId);\n      inventoryItems.push(composedItem);\n    });\n    const shoppingAdventurers = adventurers.filter(adventurer => adventurer.inDungeon === false);\n    let adventurerTurn = 0;\n    const adventurerCount = shoppingAdventurers.length;\n    // loop through each inventory item\n    inventoryItems.forEach(item => {\n      // create an order based on last adventurer to take an\n      // item and proceed suequentially to include all\n      // adventurers\n      let adventurerTries = [];\n      for (let i = 0; i < adventurerCount; i++) {\n        let thisIndex = adventurerTurn + i;\n        if (thisIndex >= adventurerCount) {\n          thisIndex -= adventurerCount;\n        }\n        adventurerTries.push(thisIndex);\n      }\n      let taken = false;\n\n      // check with each adventurer if they want the item\n      adventurerTries.forEach(adventurerIndex => {\n        // determine if decision factor is buy or upgrade\n        let decisionFactor = '';\n        const thisAdventurer = shoppingAdventurers[adventurerIndex];\n\n        if (thisAdventurer.equipment[item.item.type] && item.item.type !== itemTypes.potion) {\n          decisionFactor += 'upgrade';\n        } else {\n          decisionFactor += 'buy';\n        }\n        decisionFactor += '_' + item.item.type;\n        const desireWeight = thisAdventurer.townBehavior[decisionFactor];\n        let totalFactor = (desireWeight / 1000) - (item.markup / 1600);\n        if (totalFactor < 0) {\n          totalFactor = 0;\n        }\n        // lessen desire to buy item if adventurer currently has some of it\n        const itemProto = item.item.prototypeId;\n        const currentHoldings = thisAdventurer.getCurrentItemCount(itemProto);\n        if (item.item.type === itemTypes.potion) {\n          totalFactor -= (currentHoldings * .10);\n        } else {\n          totalFactor -= (currentHoldings * .30);\n        }\n        // determine if adventurer will buy item\n        let willBuy = totalFactor >= Math.random();\n        if (thisAdventurer.equipment[item.item.type]) {\n          const currentGear = thisAdventurer.equipment[item.item.type];\n          if (item.item.type === itemTypes.weapon) {\n            const currentDamage = currentGear[itemTypes.weapon].damage;\n            const itemDamage = currentGear[itemTypes.weapon].damage;\n            if (currentDamage >= itemDamage) {\n              willBuy = false;\n            }\n          } else if (item.item.type === itemTypes.armor) {\n            const currentArmor = currentGear[itemTypes.armor].armor;\n            const itemArmor = item.item[itemTypes.armor].armor;\n            if (currentArmor >= itemArmor) {\n              willBuy = false;\n            }\n          }\n        }\n        // cancel buy if adventurer inventory is full\n        if (thisAdventurer.inventory.length >= maxInventory) {\n          willBuy = false;\n        }\n        \n        if (willBuy && !taken) {\n          const totalPrice = Math.floor(item.item.value * (1 + (item.markup / 1000)));\n          if (thisAdventurer.checkAccount(totalPrice)) {\n            thisAdventurer.chargeAccount(totalPrice);\n            playerStore.creditGold(totalPrice);\n            playerStore.updateGold();\n            const baseItem = items.getItem(item.itemId);\n            storeInventory.removeItem(item.itemId);\n            storeInventory.updateStoreInventory();\n            thisAdventurer.inventory.push(baseItem);\n            if (baseItem.type !== itemTypes.potion) {\n              if (thisAdventurer.equipment[baseItem.type]) {\n                thisAdventurer.unequipItem(baseItem.type);\n              }\n              thisAdventurer.equipItem(baseItem);\n            }\n            taken = true;\n            adventurerTurn = adventurerIndex + 1;\n            if (adventurerTurn > adventurerCount) {\n              adventurerTurn = 0;\n            }\n          }\n        }\n      })\n    })\n  }\n\n  const dungeonEntry = function() {\n    const dungeonGoingAdventurers = adventurers.filter(adventurer => adventurer.inDungeon === false);\n    dungeonGoingAdventurers.forEach(dungeonAdventurer => {\n      let totalFactor = (dungeonAdventurer.townBehavior.enter_dungeon / 1000)\n      let willEnter = totalFactor >= Math.random();\n\n      if (willEnter) {\n        const filterClasses = tagProcessor.getFilterClasses();\n        const dungeonJSX = (\n          <div className=\"combatLogEntry\">\n            <span className={filterClasses.name}>{dungeonAdventurer.name} </span> entered the dungeon.\n          </div>\n        );\n        dungeonAdventurer.inDungeon = true;\n        dungeonAdventurer.currentTotalDungeonTurns = 0;\n        const combatLogMessage = dungeonJSX;\n        dungeonAdventurer.addCombatLog(combatLogMessage);\n        dungeon.receiveAdventurer(dungeonAdventurer.id);\n      }\n    });\n  }\n\n  const dungeonTurns = function() {\n    const dungeonAdventurers = adventurers.filter(adventurer => adventurer.inDungeon === true);\n    new Promise((resolve, reject) => {\n      const currentDay = days.getDay();\n      console.log(currentDay);\n      dungeonAdventurers.forEach((dungeonAdventurer, dunAdN) => {\n        let totalTurns = dungeonAdventurer.speed;\n        for (let turnNumber = 1; turnNumber <= totalTurns; turnNumber++) {\n          let nextTurn = 0;\n          if (turnNumber < totalTurns) {\n            nextTurn = turnNumber + 1;\n          } else {\n            nextTurn = null;\n          }\n          const turnPayload = {\n            adventurer: dungeonAdventurer,\n            day: currentDay,\n            turnNumber: turnNumber,\n            nextTurn: nextTurn\n          }\n          const newTurn = new Turn(turnPayload);\n          turnController.addTurn(newTurn);\n        }\n        if (dunAdN === dungeonAdventurers.length -1) {\n          resolve();\n        }\n      });\n    }).then(() => {\n      turnController.startTurns();\n    });\n  }\n\n  return {\n    initializeAdventurers: async function(maxAdventurers) {\n      const genGetAdventurers = getAdventurers();\n      genGetAdventurers.next().value\n        .then(initAdventurers => {\n          if (initAdventurers) {\n            let drainAdventurers = initAdventurers;\n            while (adventurers.length < maxAdventurers && drainAdventurers.length > 0) {\n              const pushIndex = Math.floor(Math.random() * drainAdventurers.length);\n              let newAdventurer = drainAdventurers.splice(pushIndex, 1);\n              newAdventurer = newAdventurer[0];\n              const adventurerPayload = {\n                name: newAdventurer.name,\n                strength: newAdventurer.strength, \n                speed: newAdventurer.speed, \n                cunning: newAdventurer.cunning, \n                intelligence: newAdventurer.intelligence,\n                constitution: newAdventurer.constitution,\n                dungeonBehavior: newAdventurer.dungeon_behavior,\n                townBehavior: newAdventurer.town_behavior,\n                adventurerClass: newAdventurer.adventurer_class\n              };\n              let thisAdventurer = new Adventurer(adventurerPayload);\n              adventurers.push(thisAdventurer);\n            }\n            initializeTurnController();\n            dispatchAdventurers(adventurers);\n            return adventurers;\n          }\n        })\n    },\n    updateAdventurers: function() {\n      dispatchAdventurers(adventurers);\n    },\n    takeAdventurerTurn: function() {\n      doInn();\n      doShopping();\n      const loadNextLevel = !dungeon.checkLevelReadiness();\n      if (loadNextLevel) {\n        const loadLevel = dungeon.loadNextLevel();\n        loadLevel.next().value.then(() => {\n          dungeonEntry();\n          dungeonTurns()\n          dispatchAdventurers(adventurers);\n        })\n      } else {\n        dungeonEntry();\n        dungeonTurns()\n        dispatchAdventurers(adventurers);\n      }\n    },\n    getActions: function() {\n      return actions;\n    },\n    getBattleDecisions: function() {\n      return battleDecisions;\n    }\n  }\n}());\n\nexport default adventurers;","// constants\nimport gameConstants from './gameConstants';\n\n// game module imports\nimport days from './days';\nimport suppliers from './suppliers';\nimport supplies from './supplies';\nimport adventurers from './adventurers';\nimport gameStore from './store';\nimport dungeon from './dungeon';\n\n// redux imports\nimport { store } from '../index';\nimport { SET_DETAIL_UPDATE } from '../actions/types';\n\n\nconst main = (function() {\n  \n  let currentMaxLevel = 1;\n  // let townFame = 0;\n\n  const dispatchUpdate = function() {\n    const payload = {\n      type: SET_DETAIL_UPDATE,\n      value: true\n    }\n    store.dispatch(payload);\n  }\n\n  return {\n    init: function(payload) {\n      // set day to 1\n      days.setDay(1);\n      \n      // set store name\n      if (!payload.name) {\n        console.log('Game must be started with a payload object that contains a store name!');\n      }\n      gameStore.setName(payload.name);\n\n      const startingGold = gameStore.getStartingGold();\n      gameStore.setGold(startingGold);\n\n      supplies.setSupplyLevel(currentMaxLevel);\n      supplies.fillSupplyPool();\n      suppliers.initializeSuppliers(gameConstants.maxSuppliers);\n\n      adventurers.initializeAdventurers(gameConstants.startingAdventurers);\n      dungeon.initializeLevels();\n    },\n\n    getGameLevel: function() {\n      return currentMaxLevel;\n    },\n\n    performTurn: function() {\n      adventurers.takeAdventurerTurn();\n      // need logic for triggering supply pool fetch if\n      // max level has changed\n      supplies.fillSupplies();\n      suppliers.takeSupplierIncomeTurns();\n      suppliers.takeSupplierTurn();\n      dispatchUpdate();\n    }\n\n  }\n} ());\n\nexport default main;","import React from 'react';\nimport './Days.css';\n\n// import days controller from game code\nimport days from '../../game_modules/days';\nimport main from '../../game_modules/main';\n\n// import redux modules\nimport { fetchDay } from '../../actions';\nimport { SET_MOBILE_DROPDOWN } from '../../actions/types';\nimport { connect } from 'react-redux'\n\nclass Days extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    \n    this.handleNextDay = this.handleNextDay.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.fetchDay();\n  }\n\n  handleNextDay() {\n    main.performTurn();\n    const currentDay = this.props.day;\n    // set day in game\n    days.setDay(currentDay + 1);\n    if (this.props.mobileDropdown) {\n      this.props.setMobileDropdown(false);\n    }\n    // set day in redux state;\n    this.props.fetchDay();\n  }\n\n  render() {\n    return (\n      <div className=\"Days primary-dark\">\n        <div className=\"DayTitle\">Day: {this.props.day}</div>\n        <div className=\"nextDay button secondary\" onClick={this.handleNextDay}\n        >Finish Day</div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    day: state.days.day,\n    mobileDropdown: state.mobileMenu.dropdown\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchDay: () => dispatch(fetchDay()),\n    setMobileDropdown: (value) => dispatch({ type: SET_MOBILE_DROPDOWN, value: value })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Days);","const pcMenus = {\n  adventurers: 'adventurers',\n  adventurer: 'adventurer',\n  dungeon: 'dungeon',\n  adventurersPartial: 'adventurersPartial'\n}\n\nexport default pcMenus;","// redux imports\nimport { store } from '../index';\nimport { SET_PC_DETAIL } from '../actions/types';\n\nimport pcMenus from './pcMenus';\n\nconst pcDetailMenus = (function(){\n  let currentMenu = '';\n  let currentIndex = 0;\n\n  const menus = [pcMenus.adventurers, pcMenus.dungeon];\n\n  let menuMap = {};\n\n  const mapMenus = function() {\n    menus.forEach((menu, menuN) => {\n      menuMap[menu] = menuN;\n    })\n  }\n\n  const dispatchPCMenu = function() {\n    const payload = {\n      type: SET_PC_DETAIL,\n      detail: currentMenu\n    }\n    store.dispatch(payload);\n  }\n\n  return {\n    init: function() {\n      currentMenu = menus[0];\n      currentIndex = 0;\n      mapMenus();\n    },\n\n    getCurrentMenu: function() {\n      return currentMenu;\n    },\n\n    nextMenu: function() {\n      currentIndex++;\n      if (currentIndex >= menus.length) {\n        currentIndex = 0;\n      }\n      currentMenu = menus[currentIndex];\n    },\n\n    previousMenu: function() {\n      currentIndex--;\n      if (currentIndex < 0) {\n        currentIndex = menus.length - 1;\n      }\n      currentMenu = menus[currentIndex];\n    },\n\n    getMenus: function() {\n      return menus;\n    },\n\n    setmenu: function(newMenu) {\n      const menuIndex = menuMap[newMenu];\n      if (menuIndex === null) {\n        return false\n      }\n      currentIndex = menuIndex;\n      currentMenu = menus[menuIndex];\n      return true;\n    },\n\n    updateMenu: function() {\n      dispatchPCMenu();\n    }\n  }\n}());\n\nexport default pcDetailMenus;","import React from 'react';\nimport './DetailPCMenu.css';\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_PC_DETAIL, SET_PC_DROPDOWN } from '../../actions/types';\n\n// utility imports\nimport pcDetailMenus from '../../Utilities/pcDetailMenus';\nimport pcMenus from '../../Utilities/pcMenus';\n\nclass DetailPCMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.handlePrevious = this.handlePrevious.bind(this);\n    this.handleNext = this.handleNext.bind(this);\n    this.handleDropdown = this.handleDropdown.bind(this);\n    this.handleMenuChange = this.handleMenuChange.bind(this);\n    this.getPCDropdown = this.getPCDropdown.bind(this);\n  }\n\n  componentDidMount() {\n    pcDetailMenus.init();\n  }\n\n  handlePrevious() {\n    pcDetailMenus.previousMenu();\n    pcDetailMenus.updateMenu();\n    if (this.props.pcDropdown) {\n      this.props.setPcDropdown(false);\n    }\n  }\n\n  handleNext() {\n    pcDetailMenus.nextMenu();\n    pcDetailMenus.updateMenu();\n    if (this.props.pcDropdown) {\n      this.props.setPcDropdown(false);\n    }\n  }\n\n  handleDropdown() {\n    this.props.setPcDropdown(!this.props.pcDropdown);\n  }\n\n  handleMenuChange(newMenu) {\n    pcDetailMenus.setmenu(newMenu);\n    pcDetailMenus.updateMenu();\n    this.props.setPcDropdown(false);\n  }\n\n  getPCDropdown() {\n    const allMenus = pcDetailMenus.getMenus();\n    if (!this.props.pcDropdown) {\n      return false;\n    }\n    return (\n      <div className=\"PCDropdown primary-dark\">\n        {allMenus.map(menu => {\n          return (\n            <div className=\"PCDropdownOption primary-medium\"\n              onClick={() => this.handleMenuChange(menu)}>\n                {menu}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n\n  render() {\n    let menuName = this.props.pcDetailMenu;\n    if (menuName === pcMenus.adventurersPartial) {\n      menuName = pcMenus.adventurers;\n    }\n    return (\n      <div className=\"PCDetailMenu primary-saturated\">\n        <span className=\"previousMenu screenArrowPC\"\n          onClick={this.handlePrevious}\n        >&#8592;</span>\n        <span className=\"PCMenuTitle\"\n          onClick={this.handleDropdown}>{menuName}</span>\n        <span className=\"nextMenu screenArrowPC\"\n          onClick={this.handleNext}\n        >&#8594;</span>\n        {this.getPCDropdown()}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    pcDetailMenu: state.pcMenu.detail,\n    pcDropdown: state.pcMenu.dropdown,\n    dungeonLevelExplored: state.dungeon.exploredLevel\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setPcDetailMenu: (detail) => dispatch({ type: SET_PC_DETAIL, detail: detail }),\n    setPcDropdown: (value) => dispatch({ type: SET_PC_DROPDOWN, value: value })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DetailPCMenu);","import { store } from '../index';\nimport { SET_IS_FULLSCREEN, SET_IS_PC, SET_IS_MOBILE } from '../actions/types';\n\nconst screenInfo = (function(){\n  let isPc = true;\n  let isMobile = false;\n  let isFullscreen = true;\n\n  let width = 0;\n\n  const dispatchFullscreen = function() {\n    const payload = {\n      type: SET_IS_FULLSCREEN,\n      value: isFullscreen\n    }\n    store.dispatch(payload);\n  }\n\n  const dispatchIsPc = function() {\n    const payload = {\n      type: SET_IS_PC,\n      value: isPc\n    }\n    store.dispatch(payload);\n  }\n\n  const dispatchIsMobile = function() {\n    const payload = {\n      type: SET_IS_MOBILE,\n      value: isMobile\n    }\n    store.dispatch(payload);\n  }\n\n  const detectPc = function() {\n    const notPc = window.orientation > -1;\n    return !notPc;\n    \n  }\n\n  const setFullScreen = function() {\n    \n    let App = document.querySelector('.App');\n    if (App.requestFullscreen) {\n      App.requestFullscreen();\n      isFullscreen = true;\n    }\n    if (App.msRequestFullscreen) {\n      App.msRequestFullscreen();\n      isFullscreen = true;\n    }\n    if (App.mozRequestFullscreen) {\n      App.mozRequestFullscreen();\n      isFullscreen = true;\n    }\n    if (App.webkitRequestFullscreen) {\n      App.webkitRequestFullscreen();\n      isFullscreen = true;\n    }\n    // document.fullscreen = true;\n    // document.fullscreenElement = App;\n  }\n\n  const exitFullScreen = function() {\n    isFullscreen = false;\n    document.exitFullscreen();\n  }\n\n  const setScreenInfo = function() {\n    const app = document.querySelector('.App');\n    const docDimensions = app.getBoundingClientRect();\n    width = docDimensions.width;\n\n    if (width < 768) {\n      isMobile = true\n    } \n  }\n\n  return {\n    init: function() {\n      isPc = detectPc();\n      setScreenInfo();\n      dispatchIsPc();\n      dispatchIsMobile();\n    },\n    getIsPc: function() {\n      return isPc;\n    },\n    getIsMobile: function() {\n      return isMobile;\n    },\n    goFullScreen: function() {\n      setFullScreen();\n      dispatchFullscreen();\n    },\n    leaveFullScreen: function() {\n      exitFullScreen();\n      dispatchFullscreen();\n    }\n  }\n}());\n\nexport default screenInfo;","import { store } from '../index';\nimport { SET_MOBILE_SCREEN, SET_PC_DETAIL } from '../actions/types';\n\nimport screenInfo from './screenInfo';\n\nconst breadcrumb = (function(){\n  let breadcrumbs = [];\n\n  const Breadcrumb = function(payload) {\n    const { \n      displayPayload,\n      isMobile,\n      scrollPos\n    } = payload;\n    this.displayPayload = displayPayload;\n    this.isMobile = isMobile;\n    this.scrollPos = scrollPos;\n  }\n\n  Breadcrumb.prototype.dispatchDisplay = function() {\n    if (this.isMobile) {\n      store.dispatch({ type: SET_MOBILE_SCREEN, screen: this.displayPayload });\n    } else {\n      store.dispatch({ type: SET_PC_DETAIL, detail: this.displayPayload });\n    }\n  }\n\n  return {\n    popBreadcrumb: function() {\n      if (breadcrumbs.length < 1) return false;\n      const nextCrumb = breadcrumbs.pop();\n      nextCrumb.dispatchDisplay();\n    },\n    addBreadcrumb: function(payload) {\n      let { display, scrollPos } = payload;\n      const isMobile = screenInfo.getIsMobile();\n      const newCrumb = new Breadcrumb({ displayPayload: display, scrollPos: scrollPos, isMobile: isMobile });\n      breadcrumbs.push(newCrumb);\n    }\n  }\n}());\n\nexport default breadcrumb;","// redux imports\nimport { store } from '../index';\nimport { SET_MOBILE_SCREEN } from '../actions/types';\n\nconst mobileScreens = (function(){\n  let currentScreen = '';\n  let currentIndex = 0;\n  const screens = ['store', 'suppliers', 'adventurers', 'dungeon'];\n  // const dependentScreens = ['adventurer'];\n\n  const allScreens = {\n    store: 'store',\n    suppliers: 'suppliers',\n    adventurers: 'adventurers',\n    adventurer: 'adventurer',\n    dungeon: 'dungeon',\n    adventurersPartial: 'adventurersPartial'\n  }\n\n  let screenMap = {};\n\n  const mapScreens = function() {\n    screens.forEach((screen, screenN) => {\n      screenMap[screen] = screenN;\n    });\n  }\n\n  const dispatchMobileScreen = function() {\n    const payload = {\n      type: SET_MOBILE_SCREEN,\n      screen: currentScreen\n    }\n    store.dispatch(payload);\n  }\n\n  return {\n    init: function() {\n      currentScreen = screens[0];\n      currentIndex = 0;\n      mapScreens();\n    },\n\n    getCurrentScreen: function() {\n      return currentScreen;\n    },\n\n    nextScreen: function() {\n      currentIndex++;\n      if (currentIndex >= screens.length) {\n        currentIndex = 0;\n      }\n      currentScreen = screens[currentIndex];\n    },\n\n    previousScreen: function() {\n      currentIndex--;\n      if (currentIndex < 0) {\n        currentIndex = screens.length -1;\n      }\n      currentScreen = screens[currentIndex];\n    },\n\n    getScreens: function() {\n      return screens;\n    },\n\n    getAllScreens: function() {\n      return allScreens;\n    },\n\n    setScreen: function(newScreen) {\n      const screenIndex = screenMap[newScreen];\n      if (screenIndex === null) {\n        return false;\n      } else {\n        currentIndex = screenIndex;\n        currentScreen = screens[screenIndex];\n        return true;\n      }\n    },\n\n    updateScreen: function() {\n      dispatchMobileScreen();\n    }\n  }\n}());\n\nexport default mobileScreens;","import React from 'react';\nimport './Adventurer.css';\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_DETAIL_ID, SET_MOBILE_SCREEN, SET_PC_DETAIL } from '../../actions/types';\n\n// utility imports\nimport breadcrumb from '../../Utilities/breadcrumb';\nimport screenInfo from '../../Utilities/screenInfo';\nimport mobileScreens from '../../Utilities/mobileScreens';\nimport pcMenus from '../../Utilities/pcMenus';\n\nclass Adventurer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleZoom = this.handleZoom.bind(this);\n  }\n\n  handleZoom() {\n    if (!this.props.adventurer) return;\n    const partialAdventurers = this.props.partialAdventurers;\n    let breadcrumbName = 'adventurers';\n    if (partialAdventurers) {\n      const matched = partialAdventurers.find(adventurerId => adventurerId === this.props.adventurer.id);\n      if (matched !== undefined) {\n        breadcrumbName = 'adventurersPartial';\n      }\n    }\n    this.props.setDetailId(this.props.adventurer.id);\n    const advDOM = document.querySelector('.adventurers');\n    const scrollY = advDOM.scrollTop;\n    console.log(scrollY);\n    breadcrumb.addBreadcrumb({ display: breadcrumbName, screenPos: scrollY });\n    if (screenInfo.getIsMobile()) {\n      const allScreens = mobileScreens.getAllScreens();\n      this.props.setMobileScreen(allScreens.adventurer);\n    } else {\n      this.props.setPCDetail(pcMenus.adventurer);\n    }\n  }\n\n  render() {\n    if (!this.props.adventurer) return '';\n    const adventurer = this.props.adventurer;\n    const adventurerClass = adventurer.adventurerClass;\n    const classColors = {\n      thief: 'thief',\n      bard: 'bard',\n      soldier: 'soldier'\n    }\n    let adventurerClassColor, adventurerClassIconColor;\n    adventurerClassIconColor = \"adventurerClassIcon\"\n    adventurerClassColor = \"adventurerClass\";\n    adventurerClassColor += ` ${classColors[adventurerClass.name]}`\n    adventurerClassIconColor += ` ${classColors[adventurerClass.name]}`\n    const classIcon = adventurerClass.name.charAt(0);\n    const dungeonIndicator = (\n      <div className=\"dungeonIcon\">\n        <p>D</p>\n        <p>U</p>\n        <p>N</p>\n      </div>\n    )\n    return (\n      <div className=\"adventurerDisplay primary\"\n        onClick={this.handleZoom}\n      >\n        <div className={adventurerClassIconColor}>{classIcon}</div>\n        <div className=\"adventurerDetails\">\n          <p className=\"adventurerName\">{adventurer.name}</p>\n          <p className={adventurerClassColor}>{adventurerClass.name}</p>\n          <div className=\"adventurerStatGroupWide\">\n            <p className=\"adventurerStatLabel\">exp</p>\n            <p className=\"adventurerStat\">{adventurer.experience}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">lvl</p>\n            <p className=\"adventurerStat\">{adventurer.level}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">gold</p>\n            <p className=\"adventurerStat\">{adventurer.gold}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">hp</p>\n            <p className=\"adventurerStat\">{adventurer.hp}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">str</p>\n            <p className=\"adventurerStat\">{adventurer.strength}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">spd</p>\n            <p className=\"adventurerStat\">{adventurer.speed}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">cun</p>\n            <p className=\"adventurerStat\">{adventurer.cunning}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">int</p>\n            <p className=\"adventurerStat\">{adventurer.intelligence}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">con</p>\n            <p className=\"adventurerStat\">{adventurer.constitution}</p>\n          </div>\n        </div>\n        <div className=\"adventurerDungeonIndicator\">\n          {adventurer.inDungeon ? dungeonIndicator : <span className=\"dungeonIcon\"></span>}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    partialAdventurers: state.adventurers.partialAdventurers\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setDetailId: (id) => dispatch({ type: SET_DETAIL_ID, id: id }),\n    setMobileScreen: (screen) => dispatch({ type: SET_MOBILE_SCREEN, screen: screen }),\n    setPCDetail: (detail) => dispatch({ type: SET_PC_DETAIL, detail: detail })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Adventurer);","import React from 'react';\nimport './Adventurers.css';\n\n// component imports\nimport Adventurer from '../Adventurer/Adventurer';\n\n// redux imports\nimport { connect } from 'react-redux';\n\nclass Adventurers extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAdventurers = this.getAdventurers.bind(this);\n  }\n\n  getAdventurers() {\n    const adventurers = this.props.adventurers;\n    return adventurers.map(adventurer => {\n      return <Adventurer adventurer={adventurer} />\n    });\n  }\n  \n  render() {\n    if (!this.props.adventurers) return '';\n    return (\n      <div className=\"adventurers\">\n        {this.getAdventurers()}\n        <div className=\"spacer-vertical\"></div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    adventurers: state.adventurers.adventurers,\n    adventurerUpdate: state.adventurers.update\n  }\n}\n\nexport default connect(mapStateToProps)(Adventurers);","import React from 'react';\nimport './AdventurerDetail.css';\n\n// redux imports\nimport { connect } from 'react-redux';\n\n// utility imports\nimport breadcrumb from '../../Utilities/breadcrumb';\n\nclass AdventurerDetail extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleBack = this.handleBack.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n  }\n\n  componentDidMount() {\n    this.scrollCombatLog();\n  }\n\n  getInventory(adventurer) {\n    const adventurerInventory = adventurer.inventory;\n    if (!adventurerInventory) return 'no inventory';\n    return adventurerInventory.map(item => {\n      let equippedIndicator = '';\n      if (adventurer.equipment[item.type]) {\n        if (adventurer.equipment[item.type].id === item.id) {\n          equippedIndicator += ' (equipped)';\n        }\n      }\n      return (\n        <div className=\"adventurerInventoryItem\">{item.name}{equippedIndicator}</div>\n      )\n    })\n  }\n\n  getCombatLog(adventurer) {\n    if (!adventurer) return 'no combat log';\n    const adventurerCombatLog = adventurer.getCombatLog();\n    if (adventurerCombatLog.length <= 0) {\n      return 'No combat log entries.'\n    }\n  \n    return adventurerCombatLog;\n    \n  }\n\n  scrollCombatLog() {\n    const cLog = document.querySelector('.adventurer-combat-log');\n    if (!cLog) return;\n    cLog.scrollTop = cLog.scrollHeight;\n  }\n\n  handleBack() {\n    const handled = breadcrumb.popBreadcrumb();\n    if (!handled) {\n      console.log('breadcrumb failed!');\n    }\n  }\n  \n  render() {\n    if ((!this.props.detailId && this.props.detailId !== 0) || !this.props.adventurers) return '';\n    const allAdventurers = this.props.adventurers;\n    const thisAdventurer = allAdventurers.find(adventurer => adventurer.id === this.props.detailId);\n    const adventurerClass = thisAdventurer.adventurerClass;\n    const classColors = {\n      thief: 'thief',\n      bard: 'bard',\n      soldier: 'soldier'\n    }\n    let adventurerClassColor, adventurerClassIconColor;\n    adventurerClassIconColor = \"adventurerClassIcon\"\n    adventurerClassColor = \"adventurerClass\";\n    adventurerClassColor += ` ${classColors[adventurerClass.name]}`\n    adventurerClassIconColor += ` ${classColors[adventurerClass.name]}`\n    const classIcon = adventurerClass.name.charAt(0);\n    \n    return (\n      <div className=\"AdventurerDetail primary\">\n        <div className=\"title-bar\">\n          <div className=\"back-button\"\n            onClick={this.handleBack}>&#8592;</div>\n          <div className=\"adventurer-title\">{thisAdventurer.name}</div>\n        </div>\n        <div className=\"primary-stats-bar\">\n          <div className={adventurerClassIconColor}>{classIcon}</div>\n          <div className=\"primary-cascade\">\n            <div className=\"adventurerStatGroupWide\">\n              <p className=\"adventurerStatLabel\">exp</p>\n              <p className=\"adventurerStat\">{thisAdventurer.experience}</p>\n            </div>\n            <div className=\"adventurerStatGroupWide\">\n              <p className=\"adventurerStatLabel\">lvl</p>\n              <p className=\"adventurerStat\">{thisAdventurer.level}</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"adventurerDetailsView\">\n          <div className=\"adventurerStatGroup\">\n            <p className={adventurerClassColor}>{adventurerClass.name}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">gold</p>\n            <p className=\"adventurerStat\">{thisAdventurer.gold}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">hp</p>\n            <p className=\"adventurerStat\">{thisAdventurer.hp}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">str</p>\n            <p className=\"adventurerStat\">{thisAdventurer.strength}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">spd</p>\n            <p className=\"adventurerStat\">{thisAdventurer.speed}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">cun</p>\n            <p className=\"adventurerStat\">{thisAdventurer.cunning}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">int</p>\n            <p className=\"adventurerStat\">{thisAdventurer.intelligence}</p>\n          </div>\n          <div className=\"adventurerStatGroup\">\n            <p className=\"adventurerStatLabel\">con</p>\n            <p className=\"adventurerStat\">{thisAdventurer.constitution}</p>\n          </div>\n        </div>\n        <p className=\"adventurerInventoryHeadline\">Inventory</p>\n        <div className=\"adventurerInventoryDetails\">\n          {this.getInventory(thisAdventurer)}\n        </div>\n        <p className=\"adventurerInventoryHeadline\">Combat Log</p>\n        <div className=\"adventurer-combat-log\">\n          {this.getCombatLog(thisAdventurer)}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    adventurers: state.adventurers.adventurers,\n    detailId: state.detail.id\n  }\n}\n\nexport default connect(mapStateToProps)(AdventurerDetail);","import React from 'react';\nimport './AdventurersPartial.css';\n\n// component imports\nimport Adventurer from '../Adventurer/Adventurer';\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_PARTIAL_ADVENTURERS } from '../../actions/types';\n\n// utility imports\nimport breadcrumb from '../../Utilities/breadcrumb';\n\nclass AdventurersPartial extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAdventurers = this.getAdventurers.bind(this);\n    this.handleBack = this.handleBack.bind(this);\n  }\n\n  getAdventurers(adventurers) {\n    return adventurers.map(adventurer => {\n      return <Adventurer adventurer={adventurer} />\n    });\n  }\n\n  handleBack() {\n    this.props.setPartialAdventurers(null);\n    const handled = breadcrumb.popBreadcrumb();\n    if (!handled) {\n      console.log('breadcrumb failed!');\n    }\n  }\n\n  render() {\n    if (!this.props.adventurers || !this.props.partialAdventurers) return '';\n    let partialAdventurers = this.props.partialAdventurers;\n    let adventurers = this.props.adventurers;\n    partialAdventurers = partialAdventurers.map(adventurerId => {\n      return adventurers.find(adventurer => adventurer.id === adventurerId);\n    })\n    \n    return (\n      <div className=\"adventurers\">\n        <div className=\"back-button partial-back primary\"\n            onClick={this.handleBack}>&#8592;</div>\n        {this.getAdventurers(partialAdventurers)}\n        <div className=\"spacer-vertical\"></div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    partialAdventurers: state.adventurers.partialAdventurers,\n    adventurers: state.adventurers.adventurers\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setPartialAdventurers: (payload) => dispatch({ type: SET_PARTIAL_ADVENTURERS, payload: payload })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AdventurersPartial);","import React from 'react';\nimport './DungeonLevel.css';\n\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_PARTIAL_ADVENTURERS, SET_MOBILE_SCREEN, SET_PC_DETAIL } from '../../actions/types';\n\n// utility imports\nimport breadcrumb from '../../Utilities/breadcrumb';\nimport screenInfo from '../../Utilities/screenInfo';\nimport mobileScreens from '../../Utilities/mobileScreens';\nimport pcMenus from '../../Utilities/pcMenus';\n\nclass DungeonLevel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleAdventurerList = this.handleAdventurerList.bind(this);\n  }\n\n  handleAdventurerList(levelAdventurers) {\n    const adventurerIds = levelAdventurers.map(adventurer => adventurer.adventurerId);\n    this.props.setPartialAdventurers(adventurerIds);\n    const dunDOM = document.querySelector('.Dungeon');\n    const scrollY = dunDOM.scrollTop;\n    breadcrumb.addBreadcrumb({ display: 'dungeon', screenPos: scrollY});\n    if (screenInfo.getIsMobile()) {\n      const allScreens = mobileScreens.getAllScreens();\n      this.props.setMobileScreen(allScreens.adventurersPartial);\n    } else {\n      this.props.setPCDetail(pcMenus.adventurersPartial);\n    }\n  }\n\n  render() {\n    if (!this.props.level) return '';\n    const level = this.props.level;\n    let levelAdventurers = [];\n    const dungeonAdventurers = this.props.dungeonAdventurers;\n    if (dungeonAdventurers) {\n      levelAdventurers = dungeonAdventurers.filter(adventurer => adventurer.level === level.number);\n    }\n    return (\n      <div className=\"levelDisplay primary\">\n        <div className=\"levelNumber\">LEVEL {level.number}</div>\n        <div className=\"adventurersNumberContainer\">\n          <div className=\"adventurersNumber\"\n            onClick={() => this.handleAdventurerList(levelAdventurers)}>\n            {levelAdventurers.length > 0 ? (levelAdventurers.length) : ''}\n          </div>\n          <div className=\"adventurersNumberLabel\">adventurers</div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    dungeonAdventurers: state.dungeon.adventurers\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setPartialAdventurers: (payload) => dispatch({ type: SET_PARTIAL_ADVENTURERS, payload: payload }),\n    setMobileScreen: (screen) => dispatch({ type: SET_MOBILE_SCREEN, screen: screen }),\n    setPCDetail: (detail) => dispatch({ type: SET_PC_DETAIL, detail: detail })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DungeonLevel);","import React from 'react';\nimport './Dungeon.css';\n\nimport DungeonLevel from '../DungeonLevel/DungeonLevel';\n\n// redux imports\nimport { connect } from 'react-redux';\n\nclass Dungeon extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getLevels = this.getLevels.bind(this);\n  }\n  \n  getLevels() {\n    const levels = this.props.levels;\n    const levelsToDisplay = levels.filter(level => level.number <= this.props.exploredLevel);\n    return levelsToDisplay.map(level => {\n      return <DungeonLevel level={level} />\n    });\n  }\n  \n  render() {\n    return (\n      <div className=\"Dungeon primary-dark\">\n        {this.getLevels()}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    levels: state.dungeon.levels,\n    exploredLevel: state.dungeon.exploredLevel\n  }\n}\n\nexport default connect(mapStateToProps)(Dungeon);","import React from 'react';\nimport './Details.css';\n\n// component imports\nimport DetailPCMenu from '../DetailPCMenu/DetailPCMenu';\nimport Adventurers from '../Adventurers/Adventurers';\nimport AdventurerDetail from '../AdventurerDetail/AdventurerDetail';\nimport AdventurersPartial from '../AdventurersPartial/AdventurersPartial';\nimport Dungeon from '../Dungeon/Dungeon';\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_DETAIL_UPDATE } from '../../actions/types';\n\nimport menuTypes from '../../Utilities/pcMenus';\n\nclass Details extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      initialized: false\n    }\n\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.loadFormTable = this.loadFormTable.bind(this);\n    this.getDetail = this.getDetail.bind(this);\n  }\n\n  formTable = {};\n\n  componentDidMount() {\n    this.loadFormTable();\n    this.setState({ initialized: true });\n  }\n\n  loadFormTable() {\n    const forms = Object.values(menuTypes);\n    let tempTable = {};\n    for (let form of forms) {\n      tempTable[form] = null;\n    }\n    this.formTable = tempTable;\n    this.formTable['blank'] = (<div className=\"BlankForm\">detail type unknown</div>);\n    this.formTable[menuTypes.adventurers] = <Adventurers />;\n    this.formTable[menuTypes.adventurer] = <AdventurerDetail />;\n    this.formTable[menuTypes.dungeon] = <Dungeon />;\n    this.formTable[menuTypes.adventurersPartial] = <AdventurersPartial />;\n  }\n\n  getDetail() {\n    if (!this.state.initialized) return '';\n    if (this.props.detailUpdate) {\n      this.props.setDetailUpdate(false);\n      return '';\n    }\n    if (!this.props.pcDetailMenu) {\n      return (<div className=\"BlankForm\">no details to display</div>);\n    }\n\n    if (this.formTable[this.props.pcDetailMenu] === undefined) {\n      return this.formTable['blank'];\n    }\n    return this.formTable[this.props.pcDetailMenu];\n  }\n  \n  render() {\n    return (\n      <div className=\"Details primary-dark\">\n        <DetailPCMenu />\n        {this.getDetail()}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    pcDetailMenu: state.pcMenu.detail,\n    detailUpdate: state.detail.update\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setDetailUpdate: (value) => dispatch({ type: SET_DETAIL_UPDATE, value: value })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Details);","import React from 'react';\nimport './GameScreen.css';\n\n// import Title from '../../Components/Title/Title';\nimport Store from '../../Components/Store/Store';\nimport Suppliers from '../../Components/Suppliers/Suppliers';\nimport Days from '../../Components/Days/Days';\nimport Details from '../../Components/Details/Details';\n\nimport { connect } from 'react-redux';\n\nclass GameScreen extends React.Component {\n  render() {\n    return (\n      <div className=\"GameScreen flex-container primary-light\">\n        <div className=\"CommerceColumn\">\n          <Days />\n          <Store />\n          <Suppliers />\n        </div>\n        <Details />\n        \n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    storeName: state.storeState.name\n  }\n}\n\nexport default connect(mapStateToProps)(GameScreen);","import React from 'react';\nimport './Title.css';\n\nclass Title extends React.Component {\n  render() {\n    return (\n      <div className=\"Title\">VENDOR</div>\n    )\n  }\n}\n\nexport default Title;","import React from 'react';\nimport './StartScreen.css';\n\nimport Title from '../../Components/Title/Title';\n\nimport game from '../../game_modules/main';\n\nimport { connect } from 'react-redux';\nimport { SET_STORE_NAME, SET_GAME_STATE } from '../../actions/types';\n\n\nclass StartScreen extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      edited: false\n    }\n\n    this.handleStart = this.handleStart.bind(this);\n    this.handleNameInput = this.handleNameInput.bind(this);\n  }\n\n  componentDidMount() {\n    \n  }\n  \n  handleStart() {\n    const newName = this.props.name;\n    if (!newName || newName === '') {\n      return;\n    }\n    game.init({ name: newName });\n    this.props.setStarted(true);\n  }\n\n  handleNameInput(e) {\n    if (e.charCode === 13) {\n      this.handleStart();\n    }\n    if (!this.props.edited) {\n      this.setState({ edited: true });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"StartScreen primary-surface\">\n        <Title />\n        <div className=\"NameInput\">\n          <div className=\"nameInputGroup\">\n            <label htmlFor=\"name\" className=\"NameLabel\">Name: </label>\n            <input id=\"name\" \n              value={this.props.name}\n              type=\"text\"\n              onChange={(val) => this.props.setStoreName(val.target.value)}\n              onKeyPress={this.handleNameInput}\n            />\n          </div>\n          <button onClick={this.handleStart} \n            className=\"StartButton\">\n              Start!    \n          </button>\n        </div>\n          \n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    started: state.gameState.started,\n    name: state.storeState.name,\n    auth: state.auth\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setStoreName: (name) => dispatch({ type: SET_STORE_NAME, name: name }),\n    setStarted: (value) => dispatch({ type: SET_GAME_STATE, value: value })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StartScreen);","const userPutRequests = (function(){\n  return {\n    makeRequest: async function(putRoute, putBody) {\n      let subBody = {};\n      for ( let [ key, value ] of putBody) {\n        subBody[key] = value\n      }\n\n      subBody = JSON.stringify(subBody)\n\n      const putRes = fetch(`/${putRoute}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8'\n        },\n        body: subBody\n      });\n\n      return putRes;\n    }\n  }\n}());\n\nexport default userPutRequests;","import React from 'react';\nimport './ProfileViewer.css';\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_PROFILE_ACTIVE } from '../../actions/types';\nimport { fetchUser } from '../../actions'\n\n// utitlity imports\nimport userPutRequests from '../../Utilities/userPutRequests';\n\nclass ProfileViewer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.updateUser = this.updateUser.bind(this);\n  }\n\n  handleClose() {\n    if (this.props.profileActive) {\n      this.props.setProfileActive(false);\n    }\n  }\n\n  *updateUser(data) {\n    yield userPutRequests.makeRequest('user', data);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const data = new FormData(e.target);\n    let updateUser = this.updateUser(data);\n    updateUser.next().value.then(() => {\n      this.props.fetchUser();\n      this.props.setProfileActive(false);\n    });\n  }\n  \n  render() {\n    let newNickname = '';\n    let newImportNickname = false;\n    let newId = null;\n    console.log(this.props.auth);\n\n    if (this.props.auth) {\n      newNickname = this.props.auth.nickname;\n      newImportNickname = this.props.auth.import_nickname;\n      newId = this.props.auth.id;\n    }\n\n    return (\n      <div className=\"ProfileViewer primary-surface\">\n        <div className=\"ProfileForm\">\n          <form action={'/profile'}\n            className=\"input-fields-area\"\n            id=\"ProfileForm\"\n            method=\"POST\"\n            onSubmit={this.handleSubmit}>\n              <div className=\"input-group\">\n                <label className=\"item-label\" htmlFor=\"nickname\">Nickname</label>\n                <input type=\"text\" name=\"nickname\" id=\"nickname\" className=\"input-text\" placeholder=\"nickname\"\n                  maxLength=\"40\" defaultValue={newNickname}></input>\n              </div>\n              <div className=\"input-group\">\n                <input type=\"checkbox\" name=\"import_nickname\" id=\"import_nickname\" class=\"input-checkbox\" defaultChecked={newImportNickname} value={true}></input>\n                <label className=\"item-label\" htmlFor=\"import_nickname\">Import nickname as store name by default</label>\n              </div>\n              <input type=\"hidden\" name=\"id\" value={newId} />\n              <input type=\"submit\" value=\"Update Profile\" className=\"button profile-submit\"></input>\n          </form>\n        </div>\n        <div className=\"CloseButton\"\n          onClick={this.handleClose}>\n            X\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    profileActive: state.profile.active,\n    auth: state.auth\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setProfileActive: (value) => dispatch({ type: SET_PROFILE_ACTIVE, value: value }),\n    fetchUser: () => dispatch(fetchUser())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileViewer);","import React from 'react';\nimport './MobileStoreHeadbar.css';\n\nimport Coin from '../Coin/Coin';\n\n// redux imports\nimport { connect } from 'react-redux';\n\nclass MobileStoreHeadbar extends React.Component {\n  render() {\n    return (\n      <div className=\"MobileStoreHeadbar\">\n        <h2 className=\"StoreName\">{this.props.storeName}</h2>\n        <div className=\"GoldDisplay\">\n            <div className=\"StoreGold\"><span className=\"CoinSymbol\" role=\"img\" aria-label=\"coin\"><Coin /> </span>{this.props.gold}</div>\n          </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    storeName: state.storeState.name,\n    gold: state.storeState.gold,\n  }\n}\n\nexport default connect(mapStateToProps)(MobileStoreHeadbar);","import React from 'react';\nimport './MobileMenu.css';\n\n// component imports\nimport Days from '../Days/Days';\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_MOBILE_DROPDOWN } from '../../actions/types';\n\n// utility imports\nimport mobileScreens from '../../Utilities/mobileScreens';\n\nclass MobileMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.handlePrevious = this.handlePrevious.bind(this);\n    this.handleNext = this.handleNext.bind(this);\n    this.handleDropdown = this.handleDropdown.bind(this);\n    this.handleScreenChange = this.handleScreenChange.bind(this);\n    this.getMobileDropdown = this.getMobileDropdown.bind(this);\n  }\n\n  componentDidMount() {\n    mobileScreens.init();\n  }\n  \n  handlePrevious() {\n    mobileScreens.previousScreen();\n    mobileScreens.updateScreen();\n    if (this.props.mobileDropdown) {\n      this.props.setMobileDropdown(false);\n    }\n  }\n\n  handleNext() {\n    mobileScreens.nextScreen();\n    mobileScreens.updateScreen();\n    if (this.props.mobileDropdown) {\n      this.props.setMobileDropdown(false);\n    }\n  }\n\n  handleDropdown() {\n    this.props.setMobileDropdown(!this.props.mobileDropdown)\n  }\n\n  handleScreenChange(newScreen) {\n    mobileScreens.setScreen(newScreen);\n    mobileScreens.updateScreen();\n    this.props.setMobileDropdown(false);\n  }\n\n  getMobileDropdown() {\n    const allScreens = mobileScreens.getScreens();\n    if (this.props.mobileDropdown) {\n      return (\n        <div className=\"MobileDropdown primary-medium\">\n          <Days />\n          {allScreens.map(screen => {\n            return (\n              <div className=\"mobileDropdownOption\"\n                onClick={() => this.handleScreenChange(screen)}>{screen}</div>\n            )\n      })}\n      </div>)\n      \n    } else {\n      return false;\n    }\n  }\n  \n  render() {\n    let mobileMenuName = this.props.mobileScreen;\n    let allScreens = mobileScreens.getAllScreens();\n    if (mobileMenuName === allScreens.adventurersPartial) {\n      mobileMenuName = allScreens.adventurers;\n    }\n    return (\n      <div className=\"MobileMenu primary-saturated\">\n        <span className=\"previousScreen screenArrow\"\n          onClick={this.handlePrevious}\n        >&#8592;</span>\n        <span className=\"mobileTitle\"\n          onClick={this.handleDropdown}>{mobileMenuName}</span>\n        <span className=\"nextScreen screenArrow\"\n          onClick={this.handleNext}\n        >&#8594;</span>\n        {this.getMobileDropdown()}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    mobileScreen: state.mobileMenu.screen,\n    mobileDropdown: state.mobileMenu.dropdown,\n    dungeonLevelExplored: state.dungeon.exploredLevel\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setMobileDropdown: (value) => dispatch({ type: SET_MOBILE_DROPDOWN, value: value })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MobileMenu);","import React from 'react';\nimport './MobileGameScreen.css';\n\nimport Store from '../../Components/Store/Store';\nimport MobileStoreHeadbar from '../../Components/MobileStoreHeadbar/MobileStoreHeadbar';\nimport Suppliers from '../../Components/Suppliers/Suppliers';\nimport MobileMenu from '../../Components/MobileMenu/MobileMenu';\nimport Adventurers from '../../Components/Adventurers/Adventurers';\nimport AdventurerDetail from '../../Components/AdventurerDetail/AdventurerDetail';\nimport AdventurersPartial from '../../Components/AdventurersPartial/AdventurersPartial';\nimport Dungeon from '../../Components/Dungeon/Dungeon';\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_DETAIL_UPDATE } from '../../actions/types';\n\n// utility imports\nimport mobileScreens from '../../Utilities/mobileScreens';\n\nclass MobileGameScreen extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentScreen: 'store',\n      initialized: false\n    }\n\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.loadFormTable = this.loadFormTable.bind(this);\n  }\n\n  formTable = {};\n\n  componentDidMount() {\n    this.loadFormTable();\n    this.setState({ initialized: true });\n  }\n\n  loadFormTable() {\n    const allScreens = mobileScreens.getAllScreens();\n    const forms = Object.values(allScreens);\n    let tempTable = {};\n    for (let form of forms) {\n      tempTable[form] = null;\n    }\n    this.formTable = tempTable;\n    this.formTable['blank'] = (<div className=\"BlankForm\">detail type unknown</div>);\n    this.formTable[allScreens.store] = <Store />;\n    this.formTable[allScreens.suppliers] = (\n      <div>\n        <MobileStoreHeadbar />\n        <Suppliers />\n      </div>\n    );\n    this.formTable[allScreens.adventurers] = <Adventurers />;\n    this.formTable[allScreens.adventurer] = <AdventurerDetail />;\n    this.formTable[allScreens.dungeon] = <Dungeon />;\n    this.formTable[allScreens.adventurersPartial] = <AdventurersPartial />;\n  }\n\n  getCurrentScreen() {\n    if (!this.state.initialized) return '';\n    if (this.props.detailUpdate) {\n      this.props.setDetailUpdate(false);\n      return '';\n    }\n    if (!this.props.mobileScreen) {\n      return (<div className=\"BlankForm\">no details to display</div>)\n    }\n\n    if (this.formTable[this.props.mobileScreen] === undefined) {\n      return this.formTable['blank'];\n    }\n    return this.formTable[this.props.mobileScreen];\n  }\n  \n  render() {\n    return (\n      <div className=\"MobileGameScreen primary-dark\">\n        <MobileMenu />\n        {this.getCurrentScreen()}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    mobileScreen: state.mobileMenu.screen,\n    detailUpdate: state.detail.update\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setDetailUpdate: (value) => dispatch({ type: SET_DETAIL_UPDATE, value: value })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MobileGameScreen);","import React from 'react';\nimport './MenuBar.css';\n\n// redux imports\nimport { connect } from 'react-redux';\nimport { SET_PROFILE_ACTIVE } from '../../actions/types';\n\n// utility imports\nimport screenInfo from '../../Utilities/screenInfo';\n\nclass MenuBar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      mobileOpen: false\n    }\n\n    this.handleProfileActive = this.handleProfileActive.bind(this);\n    this.getLoginContainer = this.getLoginContainer.bind(this);\n    this.renderProfileLink = this.renderProfileLink.bind(this);\n    this.renderLogin = this.renderLogin.bind(this);\n    this.renderEditorLink = this.renderEditorLink.bind(this);\n    this.handleFullscreen = this.handleFullscreen.bind(this);\n    this.getFullScreenControls = this.getFullScreenControls.bind(this);\n    this.handleMobileOpen = this.handleMobileOpen.bind(this);\n  }\n\n  handleProfileActive() {\n    if (!this.props.profileActive) {\n      this.props.setProfileActive(true);\n    }\n    this.handleMobileOpen();\n  }\n\n  handleMobileOpen() {\n    if (this.props.profileActive && !this.state.mobileOpen) {\n      return;\n    }\n    this.setState({ mobileOpen: !this.state.mobileOpen});\n  }\n\n  renderProfileLink() {\n    switch(this.props.auth) {\n      case null:\n        return '';\n      case false:\n        return '';\n      default:\n        return <li key=\"profile\" class=\"profileLink\" onClick={this.handleProfileActive}>profile</li>\n    }\n  }\n\n  renderLogin() {\n    switch(this.props.auth) {\n      case null:\n        return;\n      case false:\n        return (\n          <li key=\"login\"><a href=\"/auth/facebook\" className=\"facebookLogo\"><span>f</span></a></li>\n        );\n      default:\n        return (\n          <li key=\"login\"><a href=\"/api/logout\">logout</a></li>\n        );\n    }\n  }\n\n  renderEditorLink() {\n    switch(this.props.auth) {\n      case null:\n        return false;\n      case false:\n        return false;\n      default:\n        const userType = this.props.auth.type;\n        if (userType === 'owner' && screenInfo.getIsPc()) {\n          return (\n            <li key=\"editorLink\"><a className=\"EditorLink\" href=\"/editor\">editor</a></li>\n          )\n        } else {\n          return false;\n        }\n    }\n\n  }\n\n  getLoginContainer() {\n    if (!this.props.isPc) {\n      return (\n        <div className=\"hamburgerContainer\"\n          onClick={this.handleMobileOpen}>\n          <div className=\"hamburgerLine primary\"></div>\n          <div className=\"hamburgerLine primary\"></div>\n          <div className=\"hamburgerLine primary\"></div>\n        </div>\n      )\n    }\n    return (\n      <ul className=\"LoginContainer\">\n        {this.renderProfileLink()}\n        {this.renderEditorLink()}\n        {this.renderLogin()}\n      </ul>\n    )\n  }\n\n  getMobileMenu() {\n    if (!this.props.isPc && this.state.mobileOpen) {\n      let mobileOffsetStyle = {};\n      let menuOffsets = 2;\n        if (this.props.auth) {\n          menuOffsets += 1;\n        }\n        // set style by default for tablet\n        mobileOffsetStyle.height = `calc(${(menuOffsets * 2.4)}rem + ${(menuOffsets * 2) * 0.8}rem - 1px)`;\n        if (this.props.isMobile) {\n          mobileOffsetStyle.height = `calc(${(menuOffsets * 1.8)}rem + ${(menuOffsets * 2) * 0.8}rem - 1px)`;\n        } \n        \n        \n      return (\n        <div className=\"mobileMenuContainer primary\"\n          onClick={this.handleMobileOpen}>\n          <ul className=\"LoginContainer mobileMenu primary-light\"\n            style={mobileOffsetStyle}\n            >\n            {this.getFullScreenControls()}\n            {this.renderProfileLink()}\n            {this.renderLogin()}\n          </ul>\n        </div>\n        \n      )\n    }\n  }\n\n  handleFullscreen() {\n    if (!this.props.isFullscreen) {\n      screenInfo.goFullScreen();\n    } else {\n      screenInfo.leaveFullScreen();\n    }\n  }\n\n  getFullScreenControls() {\n    if (!this.props.isFullscreen) {\n      return <li key=\"goFullscreen\" \n        className=\"Fullscreen screenLink\"\n        onClick={this.handleFullscreen}>[  ]</li>\n    } else {\n      return <li key=\"exitFullscren\"\n        className=\"ExitFullScreen screenLink\"\n        onClick={this.handleFullscreen}>&#9580;</li>\n    }\n  }\n  \n  render() {\n    return (\n      <div className=\"MenuBar primary-light\">\n        <span className=\"MenuTitle\"><a href=\"/\">VENDOR</a></span>\n        {this.getLoginContainer()}\n        {this.getMobileMenu()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    profileActive: state.profile.active,\n    isMobile: state.app.isMobile,\n    isPc: state.app.isPc,\n    isFullscreen: state.app.isFullscreen\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setProfileActive: (value) => dispatch({ type: SET_PROFILE_ACTIVE, value: value })\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuBar);","import React from 'react';\nimport './reset.css';\nimport './App.css';\n\n// game module imports\nimport GameScreen from '../../Containers/GameScreen/GameScreen';\nimport StartScreen from '../../Containers/StartScreen/StartScreen';\nimport ProfileViewer from '../../Containers/ProfileViewer/ProfileViewer';\nimport MobileGameScreen from '../../Containers/MobileGameScreen/MobileGameScreen';\n\n// utility imports\nimport screenInfo from '../../Utilities/screenInfo';\n\n// component imports\nimport MenuBar from '../../Components/MenuBar/MenuBar';\n\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getMainView = this.getMainView.bind(this);\n    this.getProfileViewer = this.getProfileViewer.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.fetchUser();\n    screenInfo.init();\n  }\n\n  getMainView() {\n    const gameState = this.props.started;\n    if (!gameState) {\n      return (\n        <StartScreen />\n      )\n    } else {\n      if (!this.props.isPc) {\n        return (\n          <MobileGameScreen />\n        )\n      } else {\n        return (\n          <GameScreen />\n        )\n      }\n    }\n  }\n\n  getProfileViewer() {\n    const profileStatus = this.props.profileActive;\n    if (profileStatus) {\n      return (\n        <ProfileViewer />\n      )\n    }\n  }  \n\n  render() {\n    return (\n      <div className=\"App\"\n        ref={ref => {\n          this.container = ref;\n        }}>\n        <MenuBar />\n        {this.getMainView()}\n        {this.getProfileViewer()}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    started: state.gameState.started,\n    profileActive: state.profile.active,\n    isMobile: state.app.isMobile,\n    isPc: state.app.isPc\n  }\n}\n\nexport default connect(mapStateToProps, actions)(App);","import { SET_DAY } from '../actions/types';\n\nconst initialState = {\n  day: 1\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_DAY:\n      return {\n        ...state,\n        day: action.day\n      }\n    default:\n      return state;\n  }\n}","import { SET_GAME_STATE,\n  SET_UPDATES,\n  SET_STORE_UPDATE}\n   from '../actions/types';\n\nconst initialState = {\n  started: false,\n  storeUpdate: false\n};\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_GAME_STATE:\n      return {\n        ...state,\n        started: action.value\n      }\n    case SET_UPDATES:\n      const updates = action.payload;\n      const { storeUpdate } = updates;\n      return {\n        ...state,\n        storeUpdate: storeUpdate\n      }\n    case SET_STORE_UPDATE:\n      return {\n        ...state,\n        storeUpdate: action.value\n      }\n    default:\n      return state;\n  }\n}","import { SET_STORE_NAME,\n  SET_STORE_GOLD,\n  SET_STORE_INVENTORY,\n  SET_STORE_FILTER,\n  SET_STORE_FILTER_ACTIVE,\n  SET_STORE_UPDATE_STATUS,\n  SET_STORE_MOBILE_DETAIL,\n  SET_STORE_MOBILE_DETAIL_ITEM } from '../actions/types';\n\nconst initialState = {\n  name: '',\n  gold: 0,\n  filterActive: false,\n  filter: 'all',\n  needsUpdate: false,\n  inventory: [],\n  inventoryCount: 0,\n  mobileDetail: null,\n  mobileItemDetail: null\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_STORE_NAME:\n      return {\n        ...state,\n        name: action.name\n      }\n    case SET_STORE_GOLD:\n      return {\n        ...state,\n        gold: action.amount\n      }\n    case SET_STORE_INVENTORY:\n      const newInventory = action.inventory;\n      let newCount = state.inventoryCount;\n      if (Array.isArray(newInventory)) {\n        newCount = newInventory.length;\n      }\n      return {\n        ...state,\n        inventory: newInventory,\n        inventoryCount: newCount\n      }\n    case SET_STORE_FILTER_ACTIVE:\n      return {\n        ...state,\n        filterActive: action.value\n      }\n    case SET_STORE_FILTER:\n      return {\n        ...state,\n        filter: action.filter\n      }\n    case SET_STORE_UPDATE_STATUS:\n      const newStatus = !state.needsUpdate;\n      return {\n        ...state,\n        needsUpdate: newStatus\n      }\n    case SET_STORE_MOBILE_DETAIL:\n      return {\n        ...state,\n        mobileDetail: action.detail\n      }\n    case SET_STORE_MOBILE_DETAIL_ITEM:\n      return {\n        ...state,\n        mobileItemDetail: action.itemDetail\n      }\n    default:\n      return state;\n  }\n}","import { SET_SUPPLIERS, SET_SUPPLIERS_INITIALIZED } from '../actions/types';\n\nconst initialState = {\n  suppliers: null,\n  count: 0,\n  initialized: false\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_SUPPLIERS:\n      let number = 0;\n      if (Array.isArray(action.payload)) {\n        number = action.payload.length;\n      }    \n      return {\n          ...state,\n          suppliers: action.payload,\n          count: number\n        }\n      case SET_SUPPLIERS_INITIALIZED:\n        return {\n          ...state,\n          initialized: action.value\n        }\n    default:\n      return state;\n  }\n}","import { SET_SUPPLY_READY, SET_SUPPLY_SPAWNED } from '../actions/types';\n\nconst initialState = {\n  ready: false,\n  spawned: false\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_SUPPLY_READY:\n      return {\n        ...state,\n        ready: action.value\n      }\n    case SET_SUPPLY_SPAWNED:\n      return {\n        ...state,\n        spawned: action.value\n      }\n    default:\n      return state;\n  }\n}","import { SET_PROFILE_ACTIVE } from '../actions/types';\n\nconst initialState = {\n  active: false\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_PROFILE_ACTIVE:\n      return {\n        ...state,\n        active: action.value\n      }\n    default:\n      return state;\n  }\n}","import { SET_IS_FULLSCREEN, SET_IS_PC, SET_IS_MOBILE } from '../actions/types';\n\nconst initialState = {\n  isFullscreen: false,\n  isPc: true,\n  isMobile: false\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_IS_FULLSCREEN:\n      return {\n        ...state,\n        isFullscreen: action.value\n      }\n    case SET_IS_PC:\n      return {\n        ...state,\n        isPc: action.value\n      }\n    case SET_IS_MOBILE:\n      return {\n        ...state,\n        isMobile: action.value\n      }\n    default:\n      return state;\n  }\n}","import { SET_MOBILE_SCREEN, SET_MOBILE_DROPDOWN } from '../actions/types';\n\nconst intitialState = {\n  screen: 'store',\n  dropdown: false\n}\n\nexport default function(state = intitialState, action) {\n  switch(action.type) {\n    case SET_MOBILE_SCREEN:\n      return {\n        ...state,\n        screen: action.screen\n      }\n    case SET_MOBILE_DROPDOWN:\n      return {\n        ...state,\n        dropdown: action.value\n      }\n    default:\n      return state;\n  }\n}","import { SET_ADVENTURERS, SET_PARTIAL_ADVENTURERS } from '../actions/types';\n\nconst initialState = {\n  adventurers: null,\n  partialAdventurers: null\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_ADVENTURERS:\n      return {\n        ...state,\n        adventurers: action.payload\n      }\n    case SET_PARTIAL_ADVENTURERS:\n      return {\n        ...state,\n        partialAdventurers: action.payload\n      }\n    default:\n      return state;\n  }\n}","import { SET_PC_DETAIL, SET_PC_DROPDOWN } from '../actions/types';\nimport pcMenus from '../Utilities/pcMenus';\n\nconst initialState = {\n  detail: pcMenus.adventurers,\n  dropdown: false\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_PC_DETAIL:\n      return {\n        ...state,\n        detail: action.detail\n      }\n    case SET_PC_DROPDOWN:\n      return {\n        ...state,\n        dropdown: action.value\n      }\n    default:\n      return state;\n  }\n}","import { SET_DETAIL_ID, SET_DETAIL_UPDATE } from '../actions/types';\n\nconst initialState = {\n  id: null,\n  update: false\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_DETAIL_ID:\n      return {\n        ...state,\n        id: action.id\n      }\n    case SET_DETAIL_UPDATE: {\n      return {\n        ...state,\n        update: action.value\n      }\n    }\n    default:\n      return state;\n  }\n}","import { SET_DUNGEON_LEVELS, \n  SET_DUNGEON_LEVEL_EXPLORED,\n  SET_DUNGEON_ADVENTURERS\n} from '../actions/types';\n\nconst initialState = {\n  levels: null,\n  exploredLevel: 0,\n  adventurers: null\n}\n\nexport default function(state = initialState, action) {\n  switch (action.type) {\n    case SET_DUNGEON_LEVELS:\n      return {\n        ...state,\n        levels: action.payload\n      }\n    case SET_DUNGEON_LEVEL_EXPLORED:\n      return {\n        ...state,\n        exploredLevel: action.level\n      }\n    case SET_DUNGEON_ADVENTURERS:\n      return {\n        ...state,\n        adventurers: action.adventurers\n      }\n    default:\n      return state;\n  }\n}","import { combineReducers } from 'redux';\nimport daysReducer from './daysReducer';\nimport gameStateReducer from './gameStateReducer'\nimport storeReducer from './storeReducer';\nimport authReducer from './authReducer';\nimport suppliersReducer from './suppliersReducer';\nimport suppliesReducer from './suppliesReducer';\nimport profileReducer from './profileReducer';\nimport appStateReducer from './appStateReducer';\nimport mobileMenuReducer from './mobileMenuReducer';\nimport adventurersReducer from './adventurersReducer';\nimport pcDetailReducer from './pcDetailReducer';\nimport detailReducer from './detailReducer';\nimport dungeonReducer from './dungeonReducer';\n\nexport default combineReducers({\n  auth: authReducer,\n  days: daysReducer,\n  gameState: gameStateReducer,\n  storeState: storeReducer,\n  suppliers: suppliersReducer,\n  supplies: suppliesReducer,\n  profile: profileReducer,\n  app: appStateReducer,\n  mobileMenu: mobileMenuReducer,\n  adventurers: adventurersReducer,\n  pcMenu: pcDetailReducer,\n  detail: detailReducer,\n  dungeon: dungeonReducer\n});","import { FETCH_USER } from '../actions/types';\n\nexport default function(state = null, action) {\n  switch(action.type) {\n    case FETCH_USER:\n      return action.payload || false;\n    default:\n      return state;\n  }\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport reduxThunk from 'redux-thunk';\n\nimport App from './Components/App/App.jsx';\nimport reducers from './reducers';\nimport * as serviceWorker from './serviceWorker';\n\nexport const store = createStore(reducers, {}, applyMiddleware(reduxThunk));\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// This is a comment made to test the build pipeline to the backend.\n// and this should test the pipeline to heroku.\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}